(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{FgZk:function(e,t,a){"use strict";var n=a("lwsE"),o=a.n(n),r=a("II3V"),i=a("tOq/");t.a=new function e(){o()(this,e),this.login=r.a.makePost("/api/wx/login",{extra:{source:"5"},successW:!1}),this.payUnifiedOrder=r.a.makeJPost("/api/wx/pay/unifiedOrder",{extra:{tradeType:"NATIVE"},successW:!1}),this.getCompanyQrCode=r.a.makeGet("/api/wx/getCompanyQrCode",{expire:i.a._5M})}},HHtw:function(e,t,a){},Hm5o:function(e,t,a){"use strict";var n=a("lSNA"),l=a.n(n),s=a("YY8R"),c=a("Cd74"),d=a("IUeo"),p=a("gV3c");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}var o={name:"CHeader",setup:function(){var e=Object(d.a)(),t=e.userInfo,a=e.companyName,n=e.logout,o=e.avatarUrl,r=Object(p.a)().router,i=Object(c.e)({companyName:a,userInfo:t,avatarUrl:o});return function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach(function(e){l()(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}({loginImg:s.a.LOGIN_LOGO},Object(c.g)(i),{handleCommand:function(e){0===e.indexOf("logout")?(n(),window.location.href="#/login"):0===e.indexOf("password")?r.push("/u-center/my/update-password"):0===e.indexOf("information")?r.push("/u-center/my/info"):e.indexOf("settings")},goBookHome:function(){r.push("/home")}})}},r=(a("lPGF"),a("KHd+")),i=Object(r.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-header"},[a("div",{staticClass:"main-header-title"},[null==e.companyName?a("div",{staticStyle:{"background-color":"#fff",width:"268px",border:"1px solid #379be9"}},[a("img",{attrs:{src:e.loginImg,alt:"三和商旅"}})]):a("div",{staticStyle:{"line-height":"60px","font-size":"26px"}},[a("span",{staticClass:"margin-right-xl"},[e._v(e._s(e.companyName))]),e._v(" "),a("span",{staticClass:"text-df cursor-pointer",on:{click:e.goBookHome}},[e._v("返回预订中心")])])]),e._v(" "),a("div",{staticClass:"main-header-right-group"},[a("div",{staticClass:"inline-block"},[a("span",{staticClass:"main-header-welcome"},[e._v("欢迎回来，"+e._s(e.userInfo.realName))]),e._v(" "),a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommand}},[a("el-button",{staticStyle:{padding:"5px 10px"},attrs:{type:"info"}},[a("img",{staticClass:"main-header-img avatar",attrs:{src:e.avatarUrl,alt:" "}}),e._v(" "),a("i",{staticClass:"el-icon-arrow-down"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"information"}},[a("i",{staticClass:"iconfont icon-people"}),e._v(" 个人信息")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"password"}},[a("i",{staticClass:"iconfont icon-reset_pwd"}),e._v(" 修改密码")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"logout"}},[a("i",{staticClass:"iconfont icon-sign_out"}),e._v(" 退出")])],1)],1)],1)])])},[],!1,null,"5c03be08",null);t.a=i.exports},"Hyk/":function(e,t,a){"use strict";a.r(t);var n=a("lSNA"),c=a.n(n),o=a("o0o1"),d=a.n(o),r=a("yXPU"),p=a.n(r),i=a("Hm5o"),l=a("VIuJ"),u=a("YY8R"),s=a("jxIu"),m=a("LLJ0"),f={name:"BatchImportDept",props:{data:{type:Object,default:function(){return{appendToBody:!1}}}},data:function(){return{visible:!0,loading:!1,title:this.data.title,appendToBody:this.data.appendToBody,form:{updateFlag:1,storageName:null,fileList:[]},errorList:[],rules:{notEmpty:s.a.notEmpty}}},created:function(){},computed:{canImport:function(){return 0<this.form.fileList.length&&0===this.errorList.length},templateUrl:function(){return u.a.CTX+"/api/department/downloadTemplate"},errorText:function(){return this.errorList?this.errorList.join("\r\n"):""}},methods:{changeLoading:function(e){this.loading=e,this.errorList=[]},downloadTemplate:function(){this.$refs.onDownload.click()},onOk:function(){var a=this;return p()(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.errorList=[],a.form.storageName=a.form.fileList[0].storageName,e.next=4,m.a.batchImportDept(a.form);case 4:null!=(t=e.sent).data&&0<t.data.length?a.errorList=t.data:(a.errorList=[],a.$emit("refreshDeptTree"),a.$emit("close"),a.visible=!1);case 6:case"end":return e.stop()}},e)}))()}}},v=a("KHd+"),b=Object(v.a)(f,function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("el-dialog",{attrs:{title:a.title,visible:a.visible,loading:a.loading,"append-to-body":a.appendToBody,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(e){a.visible=e},close:function(e){return a.$emit("close")}}},[n("el-form",{ref:"form",attrs:{"label-width":"50px",model:a.form,rules:a.rules,size:"mini"}},[n("el-form-item",{attrs:{label:" "}},[n("c-upload",{attrs:{drag:!1,limit:1,"max-file-size":5,accept:".xls,.xlsx"},on:{changeLoading:a.changeLoading},model:{value:a.form.fileList,callback:function(e){a.$set(a.form,"fileList",e)},expression:"form.fileList"}})],1),a._v(" "),n("el-form-item",{attrs:{label:" "}},[n("a",{attrs:{href:"javascript:void(0)",title:"点击下载组织结构模板"},on:{click:a.downloadTemplate}},[a._v("点击这里，下载模板")]),a._v(" "),n("a",{ref:"onDownload",staticStyle:{display:"none"},attrs:{href:a.templateUrl}})]),a._v(" "),n("el-form-item",{attrs:{label:" 当组织结构存在时，是否覆盖更新","label-width":"250px",rules:a.rules.notEmpty}},[n("el-radio-group",{model:{value:a.form.updateFlag,callback:function(e){a.$set(a.form,"updateFlag",e)},expression:"form.updateFlag"}},[n("el-radio",{staticClass:"myRadio",attrs:{label:1}},[a._v("是")]),a._v(" "),n("el-radio",{staticClass:"myRadio",attrs:{label:0}},[a._v("否")])],1)],1),a._v(" "),0<a.errorList.length?n("el-form-item",{attrs:{label:" 提示：","label-width":"60px"}},[n("div",{staticStyle:{"max-height":"300px",overflow:"auto"}},a._l(a.errorList,function(e,t){return n("div",{key:t},[a._v("\n          "+a._s(t+1)+". "+a._s(e)+"\n        ")])}),0),a._v(" "),0<a.errorList.length?n("c-copy",{attrs:{text:a.errorText}}):a._e()],1):a._e()],1),a._v(" "),n("div",{staticClass:"center-box"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){return a.$emit("close")}}},[a._v("关 闭")]),a._v(" "),n("easy-button",{attrs:{size:"small",type:"primary",loading:a.loading,disabled:!a.canImport},on:{click:a.onOk}},[a._v("导 入\n    ")])],1)],1)},[],!1,null,null,null).exports,_=a("RIqP"),h=a.n(_),g={name:"DepartEditDialog",props:{data:{type:Object}},data:function(){return{formLabelWidth:"100px",visible:!0,showMore:!1,deptOptions:[],deptForm:{departmentName:this.data.departmentName,parentId:this.data.parentId,id:this.data.id,departmentCode:this.data.departmentCode,createCostCenter:1,tel:this.data.tel,email:this.data.email,address:this.data.address,sortNo:this.data.sortNo,remark:this.data.remark},isDisabled:this.data.isDisabled,title:this.data.title,rules:{notEmpty:s.a.notEmpty,departmentCode:[].concat(h()(s.a.notEmpty),[{validator:this.checkDepartmentCode,trigger:"blur"}])}}},created:function(){var t=this;m.a.queryDeptList().then(function(e){t.deptOptions=e.data})},methods:{checkDepartmentCode:function(e,t,a){m.a.checkDeptCode({id:this.deptForm.id,departmentCode:t}).then(function(e){e.data?a(new Error("部门编号已存在")):a()}).catch(function(){a(new Error("部门编号校验失败"))})},close:function(){this.$emit("close")},submitForm:function(){var t=this;return p()(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$refs.deptForm.validate();case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return");case 8:return e.next=10,m.a.saveDept(t.deptForm);case 10:t.$emit("refreshDeptTree"),t.$emit("close"),t.visible=!1;case 13:case"end":return e.stop()}},e,null,[[0,5]])}))()}}},y=Object(v.a)(g,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.data.title,"close-on-click-modal":!1,visible:t.visible,width:"550px"},on:{"update:visible":function(e){t.visible=e},close:t.close}},[a("el-form",{ref:"deptForm",attrs:{"label-width":t.formLabelWidth,model:t.deptForm,rules:t.rules,size:"mini"}},[a("el-form-item",{attrs:{label:"上级部门："}},[a("el-select",{staticClass:"w350",attrs:{disabled:t.isDisabled,filterable:"",placeholder:"请选择"},model:{value:t.deptForm.parentId,callback:function(e){t.$set(t.deptForm,"parentId",e)},expression:"deptForm.parentId"}},[t._l(t.deptOptions,function(e){return[a("el-option",{key:e.key,attrs:{disabled:e.key===t.data.showId,label:e.value,value:e.key}})]})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"部门编号：",prop:"departmentCode",rules:t.rules.departmentCode}},[a("el-input",{staticClass:"w350",model:{value:t.deptForm.departmentCode,callback:function(e){t.$set(t.deptForm,"departmentCode",e)},expression:"deptForm.departmentCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"部门名称：",prop:"departmentName",rules:t.rules.notEmpty}},[a("el-input",{staticClass:"w350",model:{value:t.deptForm.departmentName,callback:function(e){t.$set(t.deptForm,"departmentName",e)},expression:"deptForm.departmentName"}})],1),t._v(" "),t.isDisabled?t._e():a("el-form-item",{attrs:{label:" "}},[a("el-checkbox",{attrs:{"false-label":0,"true-label":1},model:{value:t.deptForm.createCostCenter,callback:function(e){t.$set(t.deptForm,"createCostCenter",e)},expression:"deptForm.createCostCenter"}},[t._v(" 新建部门时自动生成相对应的成本中心\n      ")])],1),t._v(" "),t.showMore?[a("el-form-item",{attrs:{label:"联系电话：",prop:"tel"}},[a("el-input",{staticClass:"w350",model:{value:t.deptForm.tel,callback:function(e){t.$set(t.deptForm,"tel",e)},expression:"deptForm.tel"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"邮箱：",prop:"email"}},[a("el-input",{staticClass:"w350",model:{value:t.deptForm.email,callback:function(e){t.$set(t.deptForm,"email",e)},expression:"deptForm.email"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系地址：",prop:"address"}},[a("el-input",{staticClass:"w350",model:{value:t.deptForm.address,callback:function(e){t.$set(t.deptForm,"address",e)},expression:"deptForm.address"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序号：",prop:"sortNo"}},[a("el-input",{staticClass:"w350",attrs:{placeholder:"排序号大的排在前面",maxlength:"10"},model:{value:t.deptForm.sortNo,callback:function(e){t.$set(t.deptForm,"sortNo",e)},expression:"deptForm.sortNo"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[a("el-input",{staticClass:"w350",attrs:{type:"textarea",maxlength:"200"},model:{value:t.deptForm.remark,callback:function(e){t.$set(t.deptForm,"remark",e)},expression:"deptForm.remark"}})],1),t._v(" "),a("a",{staticClass:"padding-left iconfont icon-fold",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.showMore=!1}}},[t._v(" 隐藏更多 ")])]:[a("a",{staticClass:"padding-left iconfont icon-unfold",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.showMore=!0}}},[t._v(" 显示更多 ")])]],2),t._v(" "),a("div",{staticClass:"center-box"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){return t.$emit("close")}}},[t._v("关 闭")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitForm}},[t._v("确 定")])],1)],1)},[],!1,null,null,null).exports,w=a("P7/X"),C=a("cPtG"),x=a("IUeo"),O=a("Cd74"),k=a("eFjv"),T=a("Q5Tz"),I=a("9aTJ"),N=a("+n12");function j(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}var D={name:"EmployeeDetail",components:{CardEditDialog:C.a},props:{data:{type:Object,default:function(){return{id:null,title:null}}}},setup:function(e,t){var a=t.emit,n=Object(x.a)().userInfo,o=Object(O.e)({$detail:{},userInfo:n,loading:!0,visible:!0,title:e.data.title,hasAdminPriv:!0,dialog:{tag:"",data:{}},detail:{id:e.data.id,userId:null,status:1,realName:null,gender:"M",firstName:null,lastName:null,spellName:null,positionLevel:null,birthday:null,mobile:null,spareNumber:null,email:null,wx:null,qq:null,icon:null,level:null,departIds:[],isOfficial:0,isVip:0,isApprover:0,roleIds:[],companyId:e.data.companyId,costCenterId:null,needApprove:1,employeeNo:null,externalNo:null,isOpenBook:1,bookScope:null,cardList:[]},options:{departOption:[],costCenterOption:[],bookScopeOption:[],levelOption:[],positionLevelOption:[],roleTypeOption:[],cardTypeOption:[]},preference:{airRequiredCostCenter:1}});o.showCostCenter=Object(O.a)(function(){return 0!==o.preference.airRequiredCostCenter});var r=function(){var e=p()(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.detail.id)return o.loading=!0,e.prev=2,e.next=5,m.a.queryEmployeeDetail({employeeId:o.detail.id});e.next=15;break;case 5:(t=e.sent).data&&(Object.assign(o.detail,t.data),o.detail.departIds=t.data.departIds||[],o.detail.roleIds=t.data.roleIds||[]),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:return e.prev=12,o.loading=!1,e.finish(12);case 15:case"end":return e.stop()}},e,null,[[2,9,12,15]])}));return function(){return e.apply(this,arguments)}}(),i=function(){var e=p()(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),l=function(){var e=p()(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.queryByCompanyId();case 2:(t=e.sent).data&&(o.preference=t.data,null!==o.preference.airRequiredCostCenter&&void 0!==o.preference.airRequiredCostCenter||(o.preference.airRequiredCostCenter=1));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),s=function(){var e=p()(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([k.a.getDicts({types:"TMC_BOOK_SCOPE,SYS_POSITION_TITLE,SYS_ID_CARD"}),m.a.queryDeptList(),m.a.queryLevelList(),m.a.queryRoleList(),T.a.list()]);case 2:t=e.sent,o.options.bookScopeOption=t[0].data.TMC_BOOK_SCOPE,o.options.positionLevelOption=t[0].data.SYS_POSITION_TITLE,o.options.cardTypeOption=t[0].data.SYS_ID_CARD,o.options.departOption=t[1].data,o.options.levelOption=t[2].data,o.options.roleTypeOption=t[3].data,o.options.costCenterOption=t[4].data;case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return o.departNames=Object(O.a)(function(){var e=o.detail.departIds;return Object(N.e)(e)?"":(e||[]).map(function(t){var e=o.options.departOption.find(function(e){return e.key===t});return void 0!==e?e.value:t}).join(", ")}),o.roleNames=Object(O.a)(function(){var e=o.detail.roleIds;return Object(N.e)(e)?"":(e||[]).map(function(t){var e=o.options.roleTypeOption.find(function(e){return e.id===t});return void 0!==e?e.roleName:t}).join(", ")}),o.positionName=Object(O.a)(function(){var t=o.detail.positionLevel;if(Object(N.e)(t))return"";var e=o.options.positionLevelOption.find(function(e){return e.code===t.toString()});return void 0!==e?e.cname:t}),o.levelName=Object(O.a)(function(){var t=o.detail.level;if(Object(N.e)(t))return"";var e=o.options.levelOption.find(function(e){return e.key===t.toString()});return void 0!==e?e.value:t}),o.costCenterName=Object(O.a)(function(){var t=o.detail.costCenterId;if(Object(N.e)(t))return"";var e=o.options.costCenterOption.find(function(e){return e.id===t.toString()});return void 0!==e?e.name:t}),o.bookScopeName=Object(O.a)(function(){var t=o.detail.bookScope;if(Object(N.e)(t))return"";var e=o.options.bookScopeOption.find(function(e){return e.code===t.toString()});return void 0!==e?e.cname:t}),function(){var e=p()(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,s();case 3:i();case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?j(Object(a),!0).forEach(function(e){c()(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}({},Object(O.g)(o),{refresh:i,onClose:function(){o.visible=!1,a("close")},cardTypeFilter:function(t){if(!t&&0!==t)return t;var e=o.options.cardTypeOption.find(function(e){return e.code===t.toString()});return void 0!==e?e.cname:t}})}},L=(a("W17G"),Object(v.a)(D,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.visible,"close-on-click-modal":!1,width:"1000px"},on:{"update:visible":function(e){t.visible=e},close:t.onClose}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"$detail",attrs:{size:"mini",model:t.detail,"label-width":"110px"}},[a("el-card",{staticClass:"card-bottom-spacing"},[a("div",{staticClass:"card-title",attrs:{slot:"header"},slot:"header"},[t._v("基本信息")]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"中文姓名："}},[a("span",[t._v(t._s(t.detail.realName))]),t._v(" "),"M"===t.detail.gender?a("span",[t._v(" (男)")]):t._e(),t._v(" "),"F"===t.detail.gender?a("span",[t._v(" (女)")]):t._e()])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"英文姓名："}},[a("span",[t._v(t._s(t.detail.firstName)+" · "+t._s(t.detail.lastName))])])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"机票订票姓名："}},[a("span",[t._v(t._s(t.detail.spellName))])])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"手机号码："}},[a("span",[t._v(t._s(t.detail.mobile))])])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"邮箱："}},[a("span",[t._v(t._s(t.detail.email))])])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"微信："}},[a("span",[t._v(t._s(t.detail.wx))])])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"备用号码："}},[a("span",[t._v(t._s(t.detail.spareNumber))])])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"生日："}},[a("span",[t._v(t._s(t._f("dateFormat")(t.detail.birthday)))])])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"职称："}},[a("span",[t._v(t._s(t.positionName))])])],1)],1)],1),t._v(" "),a("el-card",{staticClass:"card-bottom-spacing"},[a("div",{staticClass:"card-title",attrs:{slot:"header"},slot:"header"},[t._v("身份信息")]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"员工工号："}},[a("span",[t._v(t._s(t.detail.employeeNo))])])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"就职状态："}},[1===t.detail.status?a("span",[t._v("在职")]):t._e(),t._v(" "),0===t.detail.status?a("span",[t._v("离职")]):t._e()])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"所属部门："}},[a("span",[t._v(t._s(t.departNames))])])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"平台角色："}},[a("span",[t._v(t._s(t.roleNames))])])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"职级："}},[a("span",[t._v(t._s(t.levelName))])])],1),t._v(" "),a("el-col",{attrs:{span:8}},[t.showCostCenter?a("el-form-item",{attrs:{label:"成本中心："}},[a("span",[t._v(t._s(t.costCenterName))])]):t._e()],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"是否公务员："}},[1===t.detail.isOfficial?a("span",[t._v("是")]):t._e(),t._v(" "),0===t.detail.isOfficial?a("span",[t._v("否")]):t._e()])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"是否VIP："}},[1===t.detail.isVip?a("span",[t._v("是")]):t._e(),t._v(" "),0===t.detail.isVip?a("span",[t._v("否")]):t._e()])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"是否审批员："}},[1===t.detail.isApprover?a("span",[t._v("是")]):t._e(),t._v(" "),0===t.detail.isApprover?a("span",[t._v("否")]):t._e()])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"订单是否需要审批："}},[1===t.detail.needApprove?a("span",[t._v("审批")]):t._e(),t._v(" "),0===t.detail.needApprove?a("span",[t._v("全免")]):t._e()])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"外部系统工号："}},[a("span",[t._v(t._s(t.detail.externalNo))])])],1)],1)],1),t._v(" "),a("el-card",{staticClass:"card-bottom-spacing"},[a("div",{staticClass:"card-title",attrs:{slot:"header"},slot:"header"},[t._v("帐号信息")]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"预订权限："}},[1===t.detail.isOpenBook?a("span",[t._v("已开通")]):t._e(),t._v(" "),0===t.detail.isOpenBook?a("span",[t._v("未开通")]):t._e()])],1),t._v(" "),a("el-col",{attrs:{span:8}},[1===t.detail.isOpenBook?a("el-form-item",{attrs:{label:"预订范围："}},[a("span",[t._v(t._s(t.bookScopeName))])]):t._e()],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"登录密码："}},[a("span",{staticClass:"msg-content"},[t._v("初始密码为 123456")])])],1)],1)],1),t._v(" "),a("el-card",{staticClass:"card-bottom-spacing"},[a("div",{staticClass:"card-title",attrs:{slot:"header"},slot:"header"},[t._v("证件信息")]),t._v(" "),a("el-row",{attrs:{gutter:10}},t._l(t.detail.cardList,function(e){return a("el-col",{key:e.id,attrs:{span:8}},[a("el-card",{staticClass:"card-edit",attrs:{shadow:"always"}},[a("div",{staticStyle:{padding:"10px","line-height":"1.8em"}},[a("div",{staticClass:"font-size18"},[t._v(t._s(t.cardTypeFilter(e.cardType)))]),t._v(" "),a("div",{staticClass:"font-size12"},[t._v(t._s(1===e.defaultUse?"默认证件":""))]),t._v(" "),a("div",{staticClass:"font-size18"},[t._v(t._s(e.cardNo))]),t._v(" "),a("div",{staticClass:"font-size18"},[t._v(t._s(t._f("dateFormat")(e.expiryDate)))])])])],1)}),1)],1)],1),t._v(" "),a("div",{staticClass:"center-box"},[a("el-button",{attrs:{size:"small",type:"",plain:""},on:{click:t.onClose}},[a("i",{staticClass:"iconfont icon-close"}),t._v(" 关 闭")])],1),t._v(" "),a(t.dialog.tag,{tag:"component",attrs:{data:t.dialog.data},on:{ok:t.refresh,close:function(e){t.dialog.tag=""}}})],1)},[],!1,null,"ba87940e",null).exports),P=a("FgZk"),F={name:"EmployeeInvite",props:{data:{type:Object,default:function(){return{id:"",title:null}}}},data:function(){return{loading:!1,visible:!0,title:this.data.title,QRCode:null}},computed:{},created:function(){this.loadQrcode()},methods:{loadQrcode:function(){var a=this;return p()(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.loading=!0,e.prev=1,e.next=4,P.a.getCompanyQrCode();case 4:t=e.sent,a.QRCode="data:image/png;base64,"+t.data;case 6:return e.prev=6,a.loading=!1,e.finish(6);case 9:case"end":return e.stop()}},e,null,[[1,,6,9]])}))()},onClose:function(){this.visible=!1,this.$emit("close")},onShare:function(){}}},S=(a("ReKv"),Object(v.a)(F,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"card-bottom-spacing"},[a("div",{staticClass:"card-title",attrs:{slot:"header"},slot:"header"},[e._v("可将下方小程序码发给员工使用微信扫码注册")]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"text-center padding"},[a("img",{staticClass:"qrcode",attrs:{src:e.QRCode}})])])],1)},[],!1,null,"7f680d4e",null).exports),E=a("TfcB"),z={name:"EmployeeLog",props:{data:{type:Object,default:function(){return{id:"",title:null}}}},data:function(){return{loading:!0,visible:!0,title:this.data.title,logList:[]}},computed:{},created:function(){this.loadLog()},methods:{loadLog:function(){var t=this;this.data.id?(this.loading=!0,m.a.queryEmployeeLog({employeeId:this.data.id}).then(function(e){e.code===E.b&&(t.logList=e.data),t.loading=!1})):this.loading=!1},onClose:function(){this.visible=!1,this.$emit("close")}}},B=Object(v.a)(z,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,loading:t.loading,visible:t.visible,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(e){t.visible=e},close:t.onClose}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"el-easy-ui-table",attrs:{data:t.logList,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"action",label:"操作","min-width":"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"content",label:"内容","min-width":"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createUser",label:"操作人",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作时间",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(t._f("datetimeFormat")(e.row.createTime)))])]}}])})],1),t._v(" "),a("div",{staticClass:"center-box"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.visible=!1}}},[t._v("关 闭")])],1)],1)},[],!1,null,null,null).exports,$={name:"BatchImportEmployee",props:{data:{type:Object,default:function(){return{appendToBody:!1}}}},data:function(){return{visible:!0,loading:!1,title:this.data.title,appendToBody:this.data.appendToBody,form:{orderId:this.data.orderId,orderNo:this.data.orderNo,storageName:null,empUniqueFlag:"EMPNO",updateFlag:1,fileList:[]},errorList:[],rules:{}}},created:function(){},computed:{canImport:function(){return 0<this.form.fileList.length&&0===this.errorList.length},templateUrl:function(){return u.a.CTX+"/api/employee/downloadTemplate"},errorText:function(){return this.errorList?this.errorList.join("\r\n"):""}},methods:{changeLoading:function(e){this.loading=e,this.errorList=[]},downloadTemplate:function(){this.$refs["on-download"].click()},onOk:function(){var a=this;return p()(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.errorList=[],a.form.storageName=a.form.fileList[0].storageName,e.next=4,m.a.batchImportEmployee(a.form);case 4:null!=(t=e.sent).data&&0<t.data.length?a.errorList=t.data:(a.errorList=[],a.$emit("ok"),a.$emit("close"),a.visible=!1);case 6:case"end":return e.stop()}},e)}))()}}},U=Object(v.a)($,function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("el-dialog",{attrs:{title:a.title,visible:a.visible,loading:a.loading,"append-to-body":a.appendToBody,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(e){a.visible=e},close:function(e){return a.$emit("close")}}},[n("el-form",{ref:"form",attrs:{"label-width":"80px",model:a.form,rules:a.rules,size:"mini"}},[n("el-form-item",{attrs:{label:" "}},[n("c-upload",{attrs:{drag:!1,limit:1,"max-file-size":5,accept:".xls,.xlsx"},on:{changeLoading:a.changeLoading},model:{value:a.form.fileList,callback:function(e){a.$set(a.form,"fileList",e)},expression:"form.fileList"}})],1),a._v(" "),n("el-form-item",{attrs:{label:" "}},[n("a",{attrs:{href:"javascript:void(0)",title:"点击下载员工导入模板"},on:{click:a.downloadTemplate}},[a._v("点击这里，下载模板")]),a._v(" "),n("a",{ref:"on-download",staticStyle:{display:"none"},attrs:{href:a.templateUrl}})]),a._v(" "),n("el-form-item",{attrs:{label:"唯一标识"}},[n("el-radio-group",{model:{value:a.form.empUniqueFlag,callback:function(e){a.$set(a.form,"empUniqueFlag",e)},expression:"form.empUniqueFlag"}},[n("el-radio",{attrs:{label:"EMPNO"}},[a._v("工号")]),a._v(" "),n("el-radio",{attrs:{label:"IDNO"}},[a._v("身份证")])],1)],1),a._v(" "),0<a.errorList.length?n("el-form-item",{attrs:{label:"提示："}},[n("div",{staticStyle:{"max-height":"300px",overflow:"auto"}},a._l(a.errorList,function(e,t){return n("div",{key:t},[a._v("\n          "+a._s(t+1)+". "+a._s(e)+"\n        ")])}),0),a._v(" "),0<a.errorList.length?n("c-copy",{attrs:{text:a.errorText}}):a._e()],1):a._e()],1),a._v(" "),n("div",{staticClass:"center-box"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){return a.$emit("close")}}},[a._v("关 闭")]),a._v(" "),n("easy-button",{attrs:{size:"small",type:"primary",loading:a.loading,disabled:!a.canImport},on:{click:a.onOk}},[a._v("导 入\n    ")])],1)],1)},[],!1,null,null,null).exports,q={name:"ImportUserDialog",props:{data:{type:Object,default:function(){return{success:null,fail:[]}}}},data:function(){return{loading:!1,visible:!0,formLabelWidth:"100px",title:"导入结果"}},computed:{},created:function(){},methods:{sex:function(e){return"M"===e?"男":"F"===e?"女":e},close:function(){this.$emit("close")}}},A=Object(v.a)(q,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,loading:t.loading,visible:t.visible,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(e){t.visible=e},close:t.close}},[a("el-card",{attrs:{header:"有"+t.data.fail.length+"条数据未导入"}},[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n      成功导入"),a("span",{staticClass:"text-green"},[t._v(t._s(t.data.success))]),t._v(" 条数据，其中新增"+t._s(t.data.add)+"条，修改"+t._s(t.data.update)+"条。\n      "),a("span",{staticClass:"text-red"},[t._v(t._s(t.data.fail.length))]),t._v(" 条数据未导入，以下为未导入的成员数据\n    ")]),t._v(" "),a("el-table",{staticClass:"el-easy-ui-table",attrs:{data:t.data.fail,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"头像",prop:"icon"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{"max-height":"50px","max-width":"130px"},attrs:{alt:"头像",src:e.row.icon}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"realName"}}),t._v(" "),a("el-table-column",{attrs:{label:"手机号",prop:"mobile",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"邮箱",prop:"email","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"性别",prop:"gender",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.sex(e.row.gender))+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"备注",prop:"remark"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.visible=!1}}},[t._v("关 闭")])],1)],1)},[],!1,null,null,null).exports,R=a("UMJ3"),M=a("33P3");function H(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}var V={components:{BatchImportDept:b,DepartEditDialog:y,EmployeeEdit:w.a,EmployeeDetail:L,EmployeeInvite:S,EmployeeLog:B,LeftMenu:l.a,Header:i.a,BatchImportEmployee:U,ImportUserDialog:A},name:"CompanyEmployee",setup:function(){function t(){m.a.queryDepartmentTree().then(function(e){l.deptTreeData=e.data})}var n={},e=Object(x.a)().userInfo,l=Object(O.e)({userInfo:e,$deptTree:{filter:function(){}},$positionLevelTree:{filter:function(){}},hasAdminPriv:!0,loginImg:u.a.LOGIN_LOGO,defaultDeptProps:{children:"children",label:"title"},defaultPositionLevelProps:{children:"children",label:"levelName"},filterDeptText:"",filterPositionLevelText:"",activeName:"department",deptTreeData:[],positionLevelTreeData:[],loading:!1,currentPage:1,pageSize:10,dialog:{tag:"",data:{}},searchTag:{dept:null,role:null,position:null},searchForm:{departId:null,roleId:null,level:null,realName:null,isApprover:null,bookScope:null,isOpenBook:null,companyId:null},options:{departOption:[],roleTypeOption:[],positionLevelOption:[],bookScopeOption:[],isApproverOption:[{key:1,value:"是"},{key:0,value:"否"}],isOpenBookOption:[{key:1,value:"开通"},{key:0,value:"不开通"}]},tableData:{records:0,page:1,rows:[]},inviteEmployeeDialog:{show:!1}});Object(O.h)(function(){return l.filterDeptText},function(e){l.$deptTree.filter(e)}),Object(O.h)(function(){return l.filterPositionLevelText},function(e){l.$positionLevelTree.filter(e)});function a(){Object.assign(n,l.searchForm),s(1)}var s=function(){var t=p()(d.a.mark(function e(t){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.currentPage=t,l.loading=!0,n.page=t,n.pageSize=l.pageSize,e.prev=4,e.next=7,m.a.queryEmployeePage(n);case 7:a=e.sent,l.tableData=a.data;case 9:return e.prev=9,l.loading=!1,e.finish(9);case 12:case"end":return e.stop()}},e,null,[[4,,9,12]])}));return function(e){return t.apply(this,arguments)}}(),o=function(){var e=p()(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.queryPositionLevelTree();case 2:t=e.sent,l.positionLevelTreeData=t.data;case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return k.a.getDicts({types:"TMC_BOOK_SCOPE"}).then(function(e){l.options.bookScopeOption=e.data.TMC_BOOK_SCOPE}),m.a.queryRoleList().then(function(e){l.options.roleTypeOption=e.data}),t(),function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?H(Object(a),!0).forEach(function(e){c()(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):H(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}({},Object(O.g)(l),{onSearch:a,handleCurrentChange:s,clickRole:function(e){l.searchForm.roleId=e.id,l.searchTag.role=e.roleName,a()},getDeptTreeData:t,handleTabClick:function(e){"positionLevel"===e.name?o():"employeeRole"===e.name||"department"===e.name&&t()},filterDeptNode:function(e,t){return!e||-1!==t.title.indexOf(e)},handleDeptNodeClick:function(e){l.searchForm.departId=e.id,l.searchTag.dept=e.title,l.searchForm.companyId=e.companyId,a()},batchImportDept:function(){l.dialog.tag="BatchImportDept",l.dialog.data={title:"批量导入组织结构"}},addDeptTreeNode:function(e){l.dialog.data={isDisabled:!1,id:null,parentId:e.id,departmentName:null,title:"新增部门"},l.dialog.tag="DepartEditDialog"},editDeptTreeNode:function(e){l.dialog.data={isDisabled:!0,id:e.id,showId:e.parentId,parentId:e.parentId,departmentName:e.title,departmentCode:e.code,tel:e.tel,email:e.email,address:e.address,sortNo:e.sortNo,remark:e.remark,title:"编辑部门"},l.dialog.tag="DepartEditDialog"},removeDeptTreeNode:function(o,r){return p()(d.a.mark(function e(){var t,a,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.confirm("确认删除该部门?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return");case 9:return e.next=11,m.a.deleteDepartment({id:r.id});case 11:t=o.parent,a=t.data.children||t.data,n=a.findIndex(function(e){return e.id===r.id}),a.splice(n,1),l.searchTag.dept=null;case 16:case"end":return e.stop()}},e,null,[[0,5]])}))()},filterPositionLevelNode:function(e,t){return!e||-1!==t.levelName.indexOf(e)},handlePositionLevelNodeClick:function(e){l.searchForm.level=e.id,l.searchTag.position=e.levelName,l.searchForm.companyId=e.companyId,a()},addPositionLevelTreeNode:function(a){null==a&&(a={companyId:l.userInfo.employee.companyId}),M.a.prompt("请输入要添加的下级职级名称","添加新职级",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var t=e.value;m.a.savePositionLevel({levelName:t,parentId:a.id,companyId:a.companyId}).then(function(e){o()})}).catch(function(){})},editPositionLevelTreeNode:function(a){M.a.prompt("请输入新名称","编辑职级",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:a.levelName}).then(function(e){var t=e.value;m.a.savePositionLevel({id:a.id,levelName:t,parentId:a.parentId,companyId:a.companyId}).then(function(e){a.levelName=t})}).catch(function(){})},removePositionLevelTreeNode:function(o,r){M.a.confirm("确认删除该职?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){m.a.deletePositionLevel({id:r.id}).then(function(e){var t=o.parent,a=t.data.children||t.data,n=a.findIndex(function(e){return e.id===r.id});a.splice(n,1),l.searchTag.position=null})}).catch(function(){})},onReset:function(){l.searchForm=Object.assign({identityCode:2},n)},handleSizeChange:function(e){l.pageSize=e},handleSortChange:function(e){var t=e.sidx,a=e.sord;n.sidx=t,n.sord=a,s(l.currentPage)},onAdd:function(){l.dialog.tag="EmployeeEdit",l.dialog.data={companyId:l.userInfo.employee.companyId,departId:l.searchForm.departId,roleId:l.searchForm.roleId,level:l.searchForm.level,title:"新增员工"}},handleCommand:function(e,t){var a,n,o,r,i;0===e.indexOf("freeze")?(i=t.userId,M.a.confirm("此员工帐号将冻结, 是否继续?","提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",type:"warning"}).then(function(){m.a.updateEmployeeStatus({employeeId:i,status:2}).then(function(e){s(l.tableData.page)})})):0===e.indexOf("unFreeze")?(r=t.userId,M.a.confirm("此员工帐号将解冻, 是否继续?","提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",type:"warning"}).then(function(){m.a.updateEmployeeStatus({employeeId:r,status:1}).then(function(e){s(l.tableData.page)})})):0===e.indexOf("delete")?(o=t.id,M.a.confirm("确认删除此员工？","提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",type:"warning"}).then(function(){m.a.deleteEmployee({employeeId:o}).then(function(e){s(l.tableData.page)})})):0===e.indexOf("log")?(n=t.id,l.dialog.tag="EmployeeLog",l.dialog.data={id:n,title:"查看日志"}):0===e.indexOf("password")&&(a=t.userId,M.a.confirm("确认重置此员工帐号密码？","提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",type:"warning"}).then(function(){R.a.resetPassword({userId:a})}))},handleEdit:function(e){l.dialog.tag="EmployeeEdit",l.dialog.data={id:e.id,title:"编辑员工资料"}},handleDetail:function(e){l.dialog.tag="EmployeeDetail",l.dialog.data={id:e.id,title:"查看员工资料"}},closeTag:function(e){"dept"===e?(l.searchForm.departId=null,l.searchTag.dept=null):"role"===e?(l.searchForm.roleId=null,l.searchTag.role=null):"position"===e&&(l.searchForm.level=null,l.searchTag.position=null),a()},batchAddEmployee:function(){l.dialog.tag="BatchImportEmployee",l.dialog.data={title:"批量导入员工"}},syncDept:function(){M.a.confirm("确定同步企业微信部门？","提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",type:"warning"}).then(function(){m.a.syncDepts().then(function(e){t()})}).catch(function(){})},syncUsers:function(){M.a.confirm("确认导入企业微信成员？","提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",type:"warning"}).then(function(){l.loading=!0,m.a.syncUsers().then(function(e){l.dialog.tag="ImportUserDialog",l.dialog.data=e.data,l.loading=!1})}).catch(function(){}).finally(function(){l.loading=!1})},onInvite:function(){l.inviteEmployeeDialog.show=!0}})}},G=(a("zIa3"),Object(v.a)(V,function(){var n=this,e=n.$createElement,o=n._self._c||e;return o("div",[o("el-row",{attrs:{gutter:15}},[o("el-col",{staticStyle:{width:"300px"},attrs:{span:6}},[o("el-card",{attrs:{"body-style":{padding:"0px"}}},[o("el-tabs",{staticClass:"employee-tab",attrs:{type:"border-card"},on:{"tab-click":n.handleTabClick},model:{value:n.activeName,callback:function(e){n.activeName=e},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"组织结构",name:"department"}},[o("section",{staticClass:"border space-p bg-extra-light-blue"},[o("div",{staticClass:"margin-bottom-xs"},[o("el-button",{staticClass:"w-full",attrs:{plain:"",icon:"el-icon-plus",size:"mini",type:"primary"},on:{click:function(e){return n.addDeptTreeNode({})}}},[n._v("新增部门")])],1),n._v(" "),o("div",{staticClass:"margin-bottom-xs"},[o("el-button",{staticClass:"w-full",attrs:{plain:"",icon:"el-icon-document",size:"mini",type:"primary"},on:{click:n.batchImportDept}},[n._v("导入部门")])],1),n._v(" "),o("div",{staticClass:"margin-bottom-xs"},[o("el-button",{staticClass:"w-full",attrs:{plain:"",icon:"el-icon-refresh",size:"mini",type:"success"},on:{click:n.syncDept}},[n._v("同步企业微信部门")])],1),n._v(" "),o("div",{staticClass:"tree-wrap"},[o("el-tree",{ref:"$deptTree",staticClass:"noborder bg-transparent scroll-bar",attrs:{data:n.deptTreeData,props:n.defaultDeptProps,"filter-node-method":n.filterDeptNode,"default-expand-all":!0,"expand-on-click-node":!1,"highlight-current":"",indent:16},on:{"node-click":n.handleDeptNodeClick},scopedSlots:n._u([{key:"default",fn:function(e){var t=e.node,a=e.data;return o("span",{staticClass:"custom-tree-node"},[o("span",[n._v(n._s(t.label))]),n._v(" "),o("span",[o("el-button",{staticClass:"font-bold font-green font-size16",attrs:{type:"text",size:"mini"},on:{click:function(){return n.addDeptTreeNode(a)}}},[o("i",{staticClass:"el-icon-plus"})]),n._v(" "),o("el-button",{staticClass:"font-bold font-blue font-size16",attrs:{type:"text",size:"mini"},on:{click:function(){return n.editDeptTreeNode(a)}}},[o("i",{staticClass:"el-icon-edit-outline"})]),n._v(" "),o("el-button",{staticClass:"font-bold font-red font-size16",attrs:{type:"text",size:"mini"},on:{click:function(){return n.removeDeptTreeNode(t,a)}}},[o("i",{staticClass:"el-icon-delete"})])],1)])}}])})],1)])]),n._v(" "),o("el-tab-pane",{attrs:{label:"员工角色",name:"employeeRole"}},[o("ul",n._l(n.options.roleTypeOption,function(t){return o("li",{key:t.roleCode,staticClass:"role",on:{click:function(e){return n.clickRole(t)}}},[o("i",{staticClass:"el-icon-s-custom"}),n._v(" "+n._s(t.roleName)+"\n              ")])}),0)]),n._v(" "),o("el-tab-pane",{attrs:{label:"员工职级",name:"positionLevel"}},[o("section",{staticClass:"border space-p bg-extra-light-blue"},[o("div",{staticClass:"margin-bottom-xs"},[o("el-button",{staticClass:"w-full",attrs:{plain:"",icon:"el-icon-plus",size:"mini"},on:{click:function(e){return n.addPositionLevelTreeNode()}}},[n._v("\n                  添加职级\n                ")])],1),n._v(" "),o("el-tree",{ref:"$positionLevelTree",staticClass:"noborder bg-transparent scroll-bar",attrs:{data:n.positionLevelTreeData,props:n.defaultPositionLevelProps,"filter-node-method":n.filterPositionLevelNode,"default-expand-all":!0,"expand-on-click-node":!1,"highlight-current":"",indent:16},on:{"node-click":n.handlePositionLevelNodeClick},scopedSlots:n._u([{key:"default",fn:function(e){var t=e.node,a=e.data;return o("span",{staticClass:"custom-tree-node"},[o("span",[n._v(n._s(t.label))]),n._v(" "),o("span",[o("el-button",{staticClass:"font-bold font-blue font-size16",attrs:{type:"text",size:"mini"},on:{click:function(){return n.editPositionLevelTreeNode(a)}}},[o("i",{staticClass:"el-icon-edit-outline"})]),n._v(" "),o("el-button",{staticClass:"font-bold font-red font-size16",attrs:{type:"text",size:"mini"},on:{click:function(){return n.removePositionLevelTreeNode(t,a)}}},[o("i",{staticClass:"el-icon-delete"})])],1)])}}])})],1)])],1)],1)],1),n._v(" "),o("el-col",{staticStyle:{width:"calc(100% - 300px)"},attrs:{span:18}},[o("el-card",[o("el-form",{attrs:{inline:!0,model:n.searchForm,size:"mini",onkeydown:"if(event.keyCode==13){return false;}"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&n._k(e.keyCode,"enter",13,e.key,"Enter")?null:n.onSearch(e)}}},[o("el-form-item",{attrs:{label:"员工姓名"}},[o("el-input",{staticClass:"w120",attrs:{clearable:""},model:{value:n.searchForm.realName,callback:function(e){n.$set(n.searchForm,"realName",e)},expression:"searchForm.realName"}})],1),n._v(" "),o("el-form-item",{attrs:{label:"预订范围"}},[o("el-select",{staticClass:"w150",attrs:{clearable:""},model:{value:n.searchForm.bookScope,callback:function(e){n.$set(n.searchForm,"bookScope",e)},expression:"searchForm.bookScope"}},n._l(n.options.bookScopeOption,function(e){return o("el-option",{key:e.code,attrs:{value:e.code,label:e.cname}})}),1)],1),n._v(" "),o("el-form-item",{attrs:{label:"是否审批人"}},[o("el-select",{staticClass:"w100",attrs:{clearable:""},model:{value:n.searchForm.isApprover,callback:function(e){n.$set(n.searchForm,"isApprover",e)},expression:"searchForm.isApprover"}},[o("el-option",{attrs:{label:"是",value:"1"}}),n._v(" "),o("el-option",{attrs:{label:"否",value:"0"}})],1)],1),n._v(" "),o("el-form-item",{attrs:{label:"是否开通预订"}},[o("el-select",{staticClass:"w100",attrs:{clearable:""},model:{value:n.searchForm.isOpenBook,callback:function(e){n.$set(n.searchForm,"isOpenBook",e)},expression:"searchForm.isOpenBook"}},[o("el-option",{attrs:{label:"已开通",value:"1"}}),n._v(" "),o("el-option",{attrs:{label:"未开通",value:"0"}})],1)],1),n._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:n.loading},on:{click:n.onSearch}},[n._v(" 查询")]),n._v(" "),o("el-button",{attrs:{loading:n.loading},on:{click:n.onReset}},[n._v(" 重置")])],1),n._v(" "),o("el-row",[null!=n.searchTag.dept||null!=n.searchTag.role||null!=n.searchTag.position?o("el-form-item",{attrs:{label:"您已选择："}},[null!=n.searchTag.dept?o("el-tag",{attrs:{size:"small",closable:""},on:{close:function(e){return n.closeTag("dept")}}},[n._v("\n                "+n._s(n.searchTag.dept)+"\n              ")]):n._e(),n._v(" "),null!=n.searchTag.role?o("el-tag",{attrs:{size:"small",closable:""},on:{close:function(e){return n.closeTag("role")}}},[n._v("\n                "+n._s(n.searchTag.role)+"\n              ")]):n._e(),n._v(" "),null!=n.searchTag.position?o("el-tag",{attrs:{size:"small",closable:""},on:{close:function(e){return n.closeTag("position")}}},[n._v("\n                "+n._s(n.searchTag.position)+"\n              ")]):n._e()],1):n._e()],1)],1),n._v(" "),o("div",{staticClass:"tool-button-box"},[o("el-button",{attrs:{type:"primary",size:"mini",loading:n.loading,icon:"el-icon-plus"},on:{click:n.onAdd}},[n._v(" 新增员工")]),n._v(" "),o("el-button",{attrs:{type:"primary",size:"mini",loading:n.loading,icon:"el-icon-upload",plain:""},on:{click:n.batchAddEmployee}},[n._v(" 导入员工")]),n._v(" "),o("el-button",{attrs:{type:"success",size:"mini",loading:n.loading,icon:"el-icon-refresh",plain:""},on:{click:n.syncUsers}},[n._v("导入企业微信成员")]),n._v(" "),o("el-button",{attrs:{type:"text",size:"mini",loading:n.loading,icon:"iconfont icon-share",plain:""},on:{click:n.onInvite}},[n._v("邀请员工")])],1),n._v(" "),o("c-page-table",{attrs:{data:n.tableData,"page-size":n.pageSize,loading:n.loading,stripe:"","default-sort":{prop:"createTime",order:"descending"}},on:{"size-change":n.handleSizeChange,"sort-change":n.handleSortChange,"current-change":n.handleCurrentChange}},[o("el-table-column",{attrs:{label:"序号",type:"index","min-width":"40"}}),n._v(" "),o("el-table-column",{attrs:{label:"操作","min-width":"105"},scopedSlots:n._u([{key:"default",fn:function(t){return[n.hasAdminPriv?o("el-dropdown",{attrs:{"split-button":"",size:"mini"},on:{click:function(e){return n.handleEdit(t.row)},command:function(e){return n.handleCommand(e,t.row)}}},[n._v("编辑\n                "),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:"password"}},[o("i",{staticClass:"iconfont icon-reset_pwd"}),n._v("重置密码")]),n._v(" "),1===t.row.status?o("el-dropdown-item",{attrs:{command:"freeze"}},[o("i",{staticClass:"iconfont icon-ban"}),n._v(" 冻 结\n                  ")]):n._e(),n._v(" "),2===t.row.status?o("el-dropdown-item",{attrs:{command:"unFreeze"}},[o("i",{staticClass:"iconfont icon-roundcheck"}),n._v(" 解 冻\n                  ")]):n._e(),n._v(" "),o("el-dropdown-item",{attrs:{command:"log"}},[o("i",{staticClass:"iconfont icon-history"}),n._v(" 日 志")]),n._v(" "),o("el-dropdown-item",{attrs:{command:"delete"}},[o("i",{staticClass:"iconfont icon-delete"}),n._v(" 删 除")])],1)],1):o("a",{attrs:{href:"javascript:void(0)",title:"查看详情"},on:{click:function(e){return n.handleDetail(t.row)}}},[n._v(" 查 看")])]}}])}),n._v(" "),o("el-table-column",{attrs:{label:"员工姓名","min-width":"90"},scopedSlots:n._u([{key:"default",fn:function(t){return[o("a",{attrs:{href:"javascript:void(0)",title:"查看员工详情"},on:{click:function(e){return n.handleDetail(t.row)}}},[n._v(n._s(t.row.realName||t.row.firstName+" "+t.row.lastName))]),n._v(" "),1==+t.row.isVip?o("i",{staticClass:"iconfont icon-vip",attrs:{title:"VIP"}}):n._e(),n._v(" "),t.row.isApprover?o("i",{staticClass:"iconfont icon-zhiwuzhiji font-orange",attrs:{title:"审批员"}}):n._e()]}}])}),n._v(" "),o("el-table-column",{attrs:{label:"手机/邮箱","min-width":"140"},scopedSlots:n._u([{key:"default",fn:function(e){return[o("div",[n._v(" "+n._s(e.row.mobile)+" / "+n._s(e.row.email))])]}}])}),n._v(" "),o("el-table-column",{attrs:{label:"所属部门/角色/职级","min-width":"180"},scopedSlots:n._u([{key:"default",fn:function(e){return[o("div",[n._v(" "+n._s(e.row.departName)+" / "+n._s(e.row.roleName)+" / "+n._s(e.row.levelName))])]}}])}),n._v(" "),o("el-table-column",{attrs:{label:"是否开通预订","min-width":"95"},scopedSlots:n._u([{key:"default",fn:function(e){return[1===e.row.isOpenBook?o("i",{staticClass:"font-size16 el-icon-success font-green"}):n._e(),n._v(" "),1!==e.row.isOpenBook?o("i",{staticClass:"font-size16 el-icon-error font-red"}):n._e()]}}])}),n._v(" "),o("el-table-column",{attrs:{label:"状态","min-width":"70"},scopedSlots:n._u([{key:"default",fn:function(e){return[1===e.row.status?o("el-tag",{attrs:{size:"small",type:"success"}},[n._v("正常")]):n._e(),n._v(" "),2===e.row.status?o("el-tag",{attrs:{size:"small",type:"danger"}},[n._v("冻结")]):n._e(),n._v(" "),0===e.row.status?o("el-tag",{attrs:{size:"small",type:"warning"}},[n._v("待审核")]):n._e(),n._v(" "),3===e.row.status?o("el-tag",{attrs:{size:"small",type:"info"}},[n._v("离职")]):n._e()]}}])}),n._v(" "),o("el-table-column",{attrs:{prop:"createUserName",label:"创建人","min-width":"80"}}),n._v(" "),o("el-table-column",{attrs:{label:"创建时间",sortable:"custom","min-width":"130",prop:"createTime"},scopedSlots:n._u([{key:"default",fn:function(e){return[n._v(n._s(n._f("datetimeFormat")(e.row.createTime)))]}}])})],1)],1)],1)],1),n._v(" "),o(n.dialog.tag,{tag:"component",attrs:{data:n.dialog.data},on:{ok:n.onSearch,close:function(e){n.dialog.tag=""},refreshDeptTree:n.getDeptTreeData}}),n._v(" "),o("el-dialog",{attrs:{title:"邀请员工",visible:n.inviteEmployeeDialog.show,"close-on-click-modal":!1,width:"650px"},on:{"update:visible":function(e){return n.$set(n.inviteEmployeeDialog,"show",e)}}},[n.inviteEmployeeDialog.show?o("employee-invite"):n._e()],1)],1)},[],!1,null,null,null));t.default=G.exports},ReKv:function(e,t,a){"use strict";var n=a("t7B6");a.n(n).a},VIuJ:function(e,t,a){"use strict";var n=a("lSNA"),s=a.n(n),c=a("Cd74"),d=a("gV3c"),p=a("IUeo");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}var o={name:"LeftMenu",setup:function(e,t){var a=t.emit,n=Object(p.a)().hasPermission,o=Object(c.e)({isCollapse:!1}),r=Object(d.a)(),i=r.router,l=r.route;return o.path=Object(c.a)(function(){return l.path}),function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach(function(e){s()(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}({},Object(c.g)(o),{hasPermission:n,handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},handleClick:function(e){i.push(e)},onToggleMenu:function(){o.isCollapse=!o.isCollapse,a("toggleMenu",o.isCollapse)}})}},r=a("KHd+"),i=Object(r.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.path,collapse:e.isCollapse},on:{open:e.handleOpen,close:e.handleClose,select:e.handleClick}},[a("li",{staticClass:"el-menu-item",staticStyle:{"padding-left":"20px"},attrs:{role:"menuitem",tabindex:"-1"},on:{click:e.onToggleMenu}},[a("i",{staticClass:"iconfont text-xl",class:e.isCollapse?"icon-expand":"icon-compress"}),e._v(" "),a("span",[e._v(e._s(e.isCollapse?"展开":"收起")+"菜单")])]),e._v(" "),a("el-submenu",{attrs:{index:"/company"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-office-building"}),e._v(" "),a("span",[e._v("企业管理")])]),e._v(" "),a("el-menu-item",{attrs:{index:"/company/home"}},[a("i",{staticClass:"el-icon-info"}),e._v("企业资料")]),e._v(" "),e.hasPermission("order.tmc.company.manage")?a("el-menu-item",{attrs:{index:"/company/employee"}},[a("i",{staticClass:"el-icon-user"}),e._v("员工管理\n      ")]):e._e(),e._v(" "),a("el-menu-item",{attrs:{index:"/company/cost-center"}},[a("i",{staticClass:"el-icon-help"}),e._v("成本中心")]),e._v(" "),e.hasPermission("order.tmc.company.manage")?a("el-menu-item",{attrs:{index:"/company/qywx-bind"}},[a("i",{staticClass:"el-icon-user"}),e._v("企业微信绑定\n      ")]):e._e()],2),e._v(" "),e.hasPermission("order.tmc.company.manage")?a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",[e._v("差旅管理")])]),e._v(" "),a("el-menu-item",{attrs:{index:"/company/trip-policy"}},[a("i",{staticClass:"el-icon-setting"}),e._v("政策设置")])],2):e._e(),e._v(" "),e.hasPermission("order.tmc.company.manage")?a("el-submenu",{attrs:{index:"3"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-data"}),a("span",[e._v("数据中心")])]),e._v(" "),a("el-menu-item",{attrs:{index:"/report/air-report"}},[a("i",{staticClass:"el-icon-s-data"}),e._v("机票明细")]),e._v(" "),a("el-menu-item",{attrs:{index:"/report/train-report"}},[a("i",{staticClass:"el-icon-s-data"}),e._v("火车票明细")]),e._v(" "),a("el-menu-item",{attrs:{index:"/report/hotel-report"}},[a("i",{staticClass:"el-icon-s-data"}),e._v("酒店明细")]),e._v(" "),a("el-menu-item",{attrs:{index:"/report/car-report"}},[a("i",{staticClass:"el-icon-s-data"}),e._v("用车明细")])],2):e._e()],1)],1)},[],!1,null,null,null);t.a=i.exports},W17G:function(e,t,a){"use strict";var n=a("Yt7G");a.n(n).a},Yt7G:function(e,t,a){},lPGF:function(e,t,a){"use strict";var n=a("HHtw");a.n(n).a},t7B6:function(e,t,a){},xNUu:function(e,t,a){},zIa3:function(e,t,a){"use strict";var n=a("xNUu");a.n(n).a}}]);