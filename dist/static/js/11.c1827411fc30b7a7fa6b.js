(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"29Rb":function(t,e,i){"use strict";var n=i("lwsE"),a=i.n(n),s=i("II3V"),r=i("tOq/");e.a=new function t(){a()(this,t),this.getAccountPeriod=s.a.makeGet("/api/tmc/accountPeriod/get"),this.queryAccount=s.a.makeGet("/api/tmc/account/queryAccount"),this.queryCityLevel=s.a.makeGet("/api/tmc/cityLevel/queryCityLevel",{expire:r.a._10S})}},"2gTY":function(t,e,i){"use strict";var n=i("HB/z");i.n(n).a},"56Ql":function(t,e,i){"use strict";e.a={AIR_HISTORY_CITY_LIST:"AirHistoryCityList",AIR_SELECT_CITY:"AirSelectCity",TRAIN_HISTORY_CITY_LIST:"TrainHistoryCityList",TRAIN_SELECT_CITY:"TrainSelectCity",HOTEL_SELECT_CITY:"hotel.select.city",HOTEL_SEARCH_HISTORY:"hotel.search.history"}},"5yRq":function(t,e,i){"use strict";var n=i("pS62");i.n(n).a},BoB9:function(t,e,i){"use strict";var r=i("xGbm"),n={getNumberOfBreakfast:function(t){if(t&&0<t.length){var e=t[0];if(e.dailyPrices&&0<e.dailyPrices.length){var i=e.dailyPrices[0].mealInfo;if(i)return i.numberOfBreakfast}}return""},getCancelRuleType:function(t,e){if(null!=e)return e;if(!t||0===t.length)return 1;var i=t[0];return r.a.parseDate(i.start)>new Date?1:0},getCancelPolicyTypeStr:function(t,e){if(null!=e)return["不可取消","限时取消","免费取消"][e];if(!t||0===t.length)return"免费取消";var i=t[0];return r.a.parseDate(i.start)>new Date?"限时取消":"不可取消"},getCancelPolicyDescription:function(t,e){if(e)return e;if(!t)return"可免费取消";var i=t.penaltyAmount.filter(function(t){return"DisplayCurrency"===t.type}).map(function(t){return t.amount})[0],n="";null!=i&&(n="RMB ".concat(i));var a=r.a.parseDate(t.start);if(new Date<a){var s=r.a.getFormatDate(t.start,"yyyy-MM-dd hh:mm");return"【".concat(s,"】前可免费取消修改，若未入住或过时取消修改将收取您全额房费").concat(n,"。我们会根据您的付款方式进行预授权或扣除房费，订单需等酒店或供应商确认后生效，订单确认结果以短信或邮件通知为准，如订单不确认将解除预授权或全额退款至您的付款账户。")}return"该订单确认后不可被取消修改，若未入住将收取您全额房费".concat(n,"。我们会根据您的付款方式进行预授权或扣除房费，订单需等酒店或供应商确认后生效，订单确认结果以短信或邮件通知为准，如订单不确认将解除预授权或全额退款至您的付款账户。")},getSmokingStr:function(t){return{1:"可吸烟",2:"禁烟","-100":"未知"}[t]||""},getBroadNetInfo:function(t,e){return 0===t&&0===e?"无宽带网络":2===t&&0===e?"全部房间支持免费无线宽带上网":0===t&&2===e?"全部房间支持免费有线宽带上网":2===t&&2===e?"全部房间支持免费有线和无线宽带上网":2===t?"全部房间支持免费无线宽带上网":2===e?"全部房间支持免费有线宽带上网":2===t?"全部房间支持免费无线宽带上网":4===t?"部分房间支持免费无线宽带上网":4===e?"部分房间支持免费有线宽带上网":"部分房间支持收费有线或无线宽带上网"},getWindowStr:function(t){return{0:"无窗",1:"部分有窗",2:"有窗",4:"内窗",5:"天窗",6:"封闭窗",7:"飘窗",unknow:"未知"}[t]||""}};e.a=n},"HB/z":function(t,e,i){},"HtQ+":function(t,e,i){},JHpf:function(t,e,i){"use strict";var n=i("lwsE"),a=i.n(n),s=i("II3V");e.a=new function t(){a()(this,t),this.put=s.a.makePost("/api/cache/put",{successW:!1}),this.get=s.a.makeGet("/api/cache/get",{expire:6e4})}},JZRg:function(t,e,i){"use strict";i.r(e);var n=i("lSNA"),O=i.n(n),a=i("o0o1"),k=i.n(a),s=i("yXPU"),x=i.n(s),r=i("RIqP"),I=i.n(r),w=i("Cd74"),D=i("gV3c"),j=i("/i9J"),P=i("lCPZ"),S=i("xGbm"),L=i("BoB9"),o={name:"CancelPolicyInfo",props:{infos:{type:Array,default:function(){return[]}},cancelType:{type:String},cancelRemark:{type:String}},computed:{info:function(){return this.infos&&0<this.infos.length?this.infos[0]:null},type:function(){return null!=this.cancelType&&""!==this.cancelType?Number(this.cancelType):this.info?S.a.parseDate(this.info.start)>new Date?1:0:2},description:function(){return L.a.getCancelPolicyDescription(this.info,this.cancelRemark)},text:function(){return["不可取消","限时取消","免费取消"][this.type]||""}}},c=(i("5yRq"),i("KHd+")),l=Object(c.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return 2!==t.type?i("el-popover",{attrs:{placement:"top",width:"230",trigger:"hover"}},[i("div",{staticClass:"text-sm"},[t._v("\n    "+t._s(t.description)+"\n  ")]),t._v(" "),i("span",{staticClass:"cursor-pointer",attrs:{slot:"reference"},slot:"reference"},[i("i",{staticClass:"iconfont icon-warn_circle"}),t._v(" "),i("span",{staticClass:"show-info"},[t._v(t._s(t.text))])])]):i("span",{staticClass:"text-green"},[t._v(t._s(t.text))])},[],!1,null,"dc78a854",null).exports,u={name:"MealInfo",props:{infos:{type:Array,default:function(){return[]}}},computed:{mealInfo:function(){var t,e=this.infos||[],i=e.some(function(t){return t.isOptionalMeal}),n=e.map(function(t){return t.mealInfo}).reduce(function(t,e){return t>e.numberOfBreakfast?t:e.numberOfBreakfast},0),a=e.map(function(t){return t.mealInfo}).reduce(function(t,e){return t>e.numberOfLunch?t:e.numberOfLunch},0),s=e.map(function(t){return t.mealInfo}).reduce(function(t,e){return t>e.numberOfDinner?t:e.numberOfDinner},0),r=[];return 0<n&&(1===n?r.push("单早"):2===n?r.push("双早"):r.push("".concat(n,"早"))),0<a&&r.push("午餐"),0<s&&r.push("晚餐"),t=i?"可选":0<r.length?r.join("+"):"无餐食",{list:e.map(function(t){var e,i=t.mealInfo,n=i.numberOfBreakfast,a=i.numberOfLunch,s=i.numberOfDinner,r=[];return 0<n&&r.push("".concat(n,"份早餐")),0<a&&r.push("".concat(a,"份午餐")),0<s&&r.push("".concat(s,"份晚餐")),e=0<r.length?r.join(","):"无餐食",{date:S.a.getFormatDate(t.effectiveDate,"MM-dd"),text:e}}),text:t}}}},f=(i("kmCM"),Object(c.a)(u,function(){var i=this,t=i.$createElement,n=i._self._c||t;return"无餐食"!==i.mealInfo.text?n("el-popover",{attrs:{placement:"top",trigger:"hover"}},[n("div",{staticClass:"text-sm"},[i._l(i.mealInfo.list,function(t,e){return n("div",{key:e},[n("span",[i._v(i._s(t.date)+":")]),i._v(" "),n("span",[i._v(i._s(t.text))])])}),i._v(" "),n("div",{staticClass:"clearfix margin-top"},[n("div",{staticClass:"float-right text-gray"},[i._v("每房/每晚")])])],2),i._v(" "),n("span",{staticClass:"cursor-pointer",attrs:{slot:"reference"},slot:"reference"},[n("i",{staticClass:"margin-right-xxs iconfont icon-eat"}),i._v(" "),n("span",{staticClass:"show-info"},[i._v(i._s(i.mealInfo.text))])])]):n("span",[n("i",{staticClass:"margin-right-xxs iconfont icon-eat"}),i._v(" "),n("span",[i._v(i._s(i.mealInfo.text))])])},[],!1,null,"9bc9b980",null).exports),p=i("ekXw"),m=i("+n12");function v(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var d={name:"ImageList",props:{title:String,pictures:{type:Array,default:function(){return[]}},hotelFacilities:{type:Array,default:function(){return[]}},roomFacilities:{type:Array,default:function(){return[]}},roomInfo:{type:Object,default:function(){}}},setup:function(t,e){var i=e.emit,n=Object(w.e)({active:0,$imgScroll:{}});return n.activeNo=Object(w.a)(function(){return n.active+1}),n.cover=Object(w.a)(function(){return t.pictures[n.active]||{}}),n.roomFacilityGroup=Object(w.a)(function(){var i={};return t.roomFacilities.forEach(function(t){var e;(e=Object(m.f)(i,t.CategoryName,{CategoryName:t.CategoryName,FacilityItem:[]}).FacilityItem).push.apply(e,I()(t.FacilityItem))}),Object.values(i)}),Object(w.d)(function(){console.log(n.$imgScroll),console.log(n.$imgScroll.scroll)}),Object(w.h)(function(){return n.active},function(){var e=x()(k.a.mark(function t(e){var i;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(w.b)();case 2:0<(i=124*e-600)?n.$imgScroll.scroll(i,0):n.$imgScroll.scroll(0,0);case 5:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}()),function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?v(Object(i),!0).forEach(function(t){O()(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},Object(w.g)(n),{onClose:function(){i("close")},onNext:function(){n.active=(n.active+1)%t.pictures.length},onPrev:function(){n.active=(n.active+t.pictures.length-1)%t.pictures.length}})}},g=(i("vYGq"),Object(c.a)(d,function(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"image-list",staticStyle:{height:"100%","min-height":"400px"}},[n("div",{staticClass:"album-main"},[n("div",{staticClass:"album-article"},[n("div",{staticClass:"album-title"},[i._v(i._s(i.title))]),i._v(" "),n("div",{staticClass:"flex",staticStyle:{height:"calc(100% - 60px)"}},[n("div",{staticClass:"arrow-box",on:{click:i.onPrev}},[n("i",{staticClass:"iconfont icon-back "})]),i._v(" "),n("div",{staticClass:"flex-sub album-cover-box"},[n("el-image",{staticClass:"album-image",attrs:{fit:"cover",src:i.cover.url}}),i._v(" "),n("div",{staticClass:"image-info padding-bottom-xs flex justify-between"},[n("div",{staticClass:"padding-lr"},[i._v(i._s(i.cover.caption))]),i._v(" "),n("div",{staticClass:"padding-lr"},[i._v(i._s(i.activeNo)+" / "+i._s(i.pictures.length))])])],1),i._v(" "),n("div",{staticClass:"arrow-box",on:{click:i.onNext}},[n("i",{staticClass:"iconfont icon-right"})])])]),i._v(" "),n("div",{staticClass:"album-aside"},[n("div",{staticClass:"scrollable"},[0<i.hotelFacilities.length?[n("div",{staticClass:"facility-title"},[i._v("基础设施")]),i._v(" "),n("div",{staticClass:"facility"},i._l(i.hotelFacilities,function(t,e){return n("div",{key:e,staticClass:"facility-item"},[n("i",{staticClass:"iconfont icon-roundcheck margin-right-sm"}),i._v(" "+i._s(t.Name)+"\n            ")])}),0)]:i._e(),i._v(" "),0<i.roomFacilities.length?[n("div",{staticClass:"facility-title"},[i._v("基本信息")]),i._v(" "),n("ul",{staticClass:"base-info"},[n("li",[n("i",{staticClass:"iconfont icon-area margin-right-sm"}),i._v(i._s(i.roomInfo.AreaRange)+"平方米\n            ")]),i._v(" "),n("li",[n("i",{staticClass:"iconfont icon-bed margin-right-sm"}),i._v(i._s(i.roomInfo.StandardRoomType)+"\n            ")]),i._v(" "),n("li",[n("i",{staticClass:"iconfont icon-floors margin-right-sm"}),i._v(i._s(i.roomInfo.FloorRange)+"楼\n            ")])]),i._v(" "),n("div",{staticClass:"facility-title"},[i._v("全部设施")]),i._v(" "),i._l(i.roomFacilityGroup,function(t,e){return n("div",{key:e},[n("div",{staticClass:"facility-sub-title"},[i._v(i._s(t.CategoryName))]),i._v(" "),n("div",{staticClass:"facility"},i._l(t.FacilityItem,function(t,e){return n("div",{key:e,staticClass:"facility-item"},[n("i",{staticClass:"iconfont icon-roundcheck margin-right-sm"}),i._v(i._s(t.Name)+"\n              ")])}),0)])})]:i._e()],2),i._v(" "),n("div",{staticStyle:{"margin-top":"30px"}},[n("el-button",{attrs:{type:"primary"},on:{click:i.onClose}},[i._v("选择房间")])],1)])]),i._v(" "),n("div",{staticClass:"album-nav"},[n("ul",{staticClass:"album-tab"},[n("li",{staticClass:"active"},[i._v("全部"+i._s(i.pictures.length))])]),i._v(" "),n("ul",{ref:"$imgScroll",staticClass:"album-nav-img"},i._l(i.pictures,function(t,e){return n("li",{key:e,class:{active:i.active===e},on:{click:function(t){i.active=e}}},[n("el-image",{staticClass:"album-image",attrs:{fit:"cover",src:t.url}})],1)}),0)])])},[],!1,null,"5f6ae7e0",null).exports),T=i("JHpf"),F=i("krE8"),B=i("Lmx9"),N=i("29Rb");function R(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var y={name:"Detail",components:{ImageList:g,BedInfo:p.a,MealInfo:f,CancelPolicyInfo:l},setup:function(){var t=Object(P.a)(),e=t.searchForm,i=t.isEmployee,n=t.onBusiness,a=t.pickerOptions1,s=t.pickerOptions2,r=t.passengerList,o=t.approveList,c=t.onRemovePassenger,l=Object(B.a)("hotel"),u=l.showList,f=l.transList,p=l.commonPolicy,m=Object(w.e)({$map:{},loading:!1,loadingPrice:!1,isEmployee:i,onBusiness:n,pickerOptions1:a,pickerOptions2:s,searchForm:e,passengerList:r,approveList:o,query:{checkInDate:"",checkOutDate:""},filter:[],detail:{hotelId:"",hotelName:"",starRating:4,businessDistrict:"",contactInfo:{telephone:""},address:"",roomQuantity:"",pic:"/200g070000002jyn21226.jpg",pictures:[],desc:"北京广播大厦酒店位于北京广播大厦内，北依长安街、东望东三环，西靠建国门，坐拥北京建国门商圈，长安街南侧，位于王府井商圈和CBD商圈之间，交通便利，四通八达，地理位置优越。是您商务旅行的好选择。",lng:"116.44976006474",lat:"39.913236986346",ratings:[],openYear:new Date,hotelFeatures:[],facilities:[],transportations:[],polices:[],rootCityId:""},level:"",priceList:[],commonPolicy:p,policyShowList:u,policyTransList:f,imageListDialog:{title:"",visible:!1,pictures:[],hotelFacilities:[],roomFacilities:[],roomInfo:{}}}),v=Object(D.a)(),d=v.router,g=v.route;m.hotelPictures=Object(w.a)(function(){return m.detail.pictures.map(function(t){return t.url})}),m.score=Object(w.a)(function(){var t=m.detail.ratings.find(function(t){return"GuestOverallRating"===t.Type});return t?t.Value:"-"}),m.openYear=Object(w.a)(function(){return S.a.getFormatDate(m.detail.openYear,"yyyy年MM月dd日")}),m.hotelFacilities=Object(w.a)(function(){return m.detail.facilities.filter(function(t){return"1"===t.Type})}),m.roomFacilities=Object(w.a)(function(){return m.detail.facilities.filter(function(t){return"2"===t.Type})}),m.fitPolicy=Object(w.a)(function(){if(!m.onBusiness)return null;var t=Object.keys(m.passengerList.filter(function(t){return"colleague"===t.key}).groupBy(function(t){return t.detail.level||""})),e=m.policyTransList.toMap(function(t){return t.level});return t.map(function(t){return e[t]||m.commonPolicy}).map(function(t){return Object.assign({},t,{amount:(t.cityLimitList.toMap(function(t){return t.level})[m.level]||{}).amount})}).findMax(function(t){return+t.amount})});function y(t){return!!m.fitPolicy&&m.fitPolicy.amount<t}m.templist=Object(w.a)(function(){return m.priceList.map(function(c){return Object.assign({},c,{info:{windowStr:L.a.getWindowStr(c.roomType.HasWindow)},roomPriceInfos:c.roomPriceInfos.map(function(t){var e,i=t.priceInfos[0].prices.filter(function(t){return"DisplayCurrency"===t.type}).map(function(t){return t.inclusiveAmount})[0],n=y(i),a=t.priceInfos.map(function(t){return"10+"===t.remainingRooms?10:+t.remainingRooms}),s=Math.min.apply(Math,I()(a).concat([10])),r=m.passengerList.length,o=s*(c.roomType.MaxOccupancy||1);return n&&0===m.fitPolicy.violation&&(e="超标不能预订"),o<r&&(e="房间数量不足，请预订少于".concat(o,"人")),Object.assign({},t,{info:{remainingRooms:s,amount:i,isViolation:y(i),canBook:(!n||0!==m.fitPolicy.violation)&&r<=o,tip:e}})})})})}),m.filterList=Object(w.a)(function(){var t=m.templist;return m.filter.includes("含早餐")&&(t=t.map(function(t){return Object.assign({},t,{roomPriceInfos:t.roomPriceInfos.filter(function(t){return 0<L.a.getNumberOfBreakfast(t.priceInfos)})})})),m.filter.includes("限时取消")&&(t=t.map(function(t){return Object.assign({},t,{roomPriceInfos:t.roomPriceInfos.filter(function(t){return"限时取消"===L.a.getCancelPolicyTypeStr(t.cancelPolicyInfos,t.cancelType)})})})),m.filter.includes("立即确认")&&(t=t.map(function(t){return Object.assign({},t,{roomPriceInfos:t.roomPriceInfos.filter(function(t){return t.priceInfos[0].isInstantConfirm})})})),m.filter.includes("协议房间")&&(t=t.map(function(t){return Object.assign({},t,{roomPriceInfos:t.roomPriceInfos.filter(function(t){return!!t.agreement})})})),t=t.filter(function(t){return 0<t.roomPriceInfos.length})}),m.filterPolices=Object(w.a)(function(){return(m.detail.polices||[]).filter(function(t){return["CheckInCheckOut","Child","Meal","Pet"].includes(t.code)})});var _=function(){var e=x()(k.a.mark(function t(e){var i,n,a;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.hotelName,n=e.lat,a=e.lng,t.next=3,j.a.loaded();case 3:m.$map.addMarker(j.a.makeMarker({title:i,label:i,position:j.a.getPoint({lat:n,lng:a})}));case 4:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),h=function(){var t=x()(k.a.mark(function t(){var e,i,n;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return m.loading=!0,t.prev=1,t.next=4,F.a.detail({hotelId:g.query.hotelId});case 4:if(e=t.sent,i=e.data,Object.fillInEmpty(i,"transportations",function(){return[]}),m.detail=i,_({hotelName:m.detail.hotelName,lat:+m.detail.lat,lng:+m.detail.lng}),m.isEmployee)return t.next=12,N.a.queryCityLevel({cityId:i.rootCityId});t.next=14;break;case 12:n=t.sent,m.level=n.data||"99";case 14:return t.prev=14,m.loading=!1,t.finish(14);case 17:case"end":return t.stop()}},t,null,[[1,,14,17]])}));return function(){return t.apply(this,arguments)}}(),b=function(){var t=x()(k.a.mark(function t(){var e;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return m.loadingPrice=!0,t.prev=1,t.next=4,F.a.price(m.query);case 4:e=t.sent,m.priceList=e.data||[],t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),m.priceList=[];case 11:return t.prev=11,m.loadingPrice=!1,t.finish(11);case 14:case"end":return t.stop()}},t,null,[[1,8,11,14]])}));return function(){return t.apply(this,arguments)}}(),C=function(){var t=x()(k.a.mark(function t(){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return m.query.checkInDate=m.searchForm.checkInDate,m.query.checkOutDate=m.searchForm.checkOutDate,t.next=4,b();case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return Object(w.h)(function(){return m.searchForm.onBusiness},function(t){m.query.onBusiness=t}),function(){var t=x()(k.a.mark(function t(){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:m.query.hotelId=g.query.hotelId,h(),C();case 3:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?R(Object(i),!0).forEach(function(t){O()(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):R(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},Object(w.g)(m),{filterItemList:["含早餐","限时取消","立即确认","协议房间"],onRemovePassenger:c,onBook:function(i,n){return x()(k.a.mark(function t(){var e;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.a.put({value:JSON.stringify({passengerList:m.passengerList,onBusiness:m.query.onBusiness,checkInDate:m.query.checkInDate,checkOutDate:m.query.checkOutDate,roomType:i.roomType,room:n,hotel:m.detail})});case 2:return e=t.sent,t.next=5,d.push({path:"/hotel/book",query:{t:e.data}});case 5:case"end":return t.stop()}},t)}))()},getSmokingStr:function(t){return L.a.getSmokingStr(t)},getWindowStr:function(t){return{0:"无窗",1:"部分有窗",2:"有窗",4:"内窗",5:"天窗",6:"封闭窗",7:"飘窗",unknow:"未知"}[t]||""},onShowHotelInfo:function(){m.imageListDialog.visible=!0,m.imageListDialog.title=m.detail.hotelName,m.imageListDialog.pictures=m.detail.pictures||[],m.imageListDialog.hotelFacilities=m.hotelFacilities||[],m.imageListDialog.roomFacilities=[]},onShowRoomInfo:function(t){m.imageListDialog.visible=!0,m.imageListDialog.title=t.roomType.RoomTypeName,m.imageListDialog.pictures=t.roomType.Pictures.map(function(t){return{caption:"",url:t.URL}}),m.imageListDialog.hotelFacilities=[],m.imageListDialog.roomFacilities=t.roomType.Facilities,m.imageListDialog.roomInfo=t.roomType},onSearchPrice:C})}},_=(i("zxp1"),Object(c.a)(y,function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],staticClass:"padding z-2 bg-white margin-tb"},[a("div",{staticClass:"flex justify-between margin-bottom"},[a("div",[a("div",{staticClass:"font-blue text-xxl text-bold"},[n._v(n._s(n.detail.hotelName))]),n._v(" "),a("div",n._l(n.detail.starRating,function(t){return a("i",{key:t,staticClass:"iconfont text-lg icon-vip-diamond-fill",staticStyle:{color:"#FCAD00"}})}),0),n._v(" "),a("div",[n.detail.businessDistrict?a("span",[n._v("["+n._s(n.detail.businessDistrict.name)+"]")]):n._e(),n._v(n._s(n.detail.address))])]),n._v(" "),a("div",{staticClass:"score-box"},[a("div",[a("span",{staticClass:"text-xxl",attrs:{title:"客户评分"}},[n._v(n._s(n.score))]),n._v(" "),a("span",[n._v("/5分")])])])]),n._v(" "),a("div",{staticClass:"flex justify-between"},[a("div",{staticClass:"hotel-images clearfix",on:{click:n.onShowHotelInfo}},n._l(9,function(t){return a("div",{key:t,class:"pic"+t},[n.hotelPictures[t-1]?a("el-image",{staticClass:"hotel-pic",attrs:{src:n.hotelPictures[t-1]}}):n._e()],1)}),0),n._v(" "),a("div",[a("b-map",{ref:"$map",staticClass:"hotel-map"})],1)])]),n._v(" "),a("el-row",{staticClass:"margin-bottom",attrs:{gutter:20,type:"flex"}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"solid-border bg-white margin-bottom z-2"},[a("div",{staticClass:"padding margin-bottom-sm border-bottom"},[a("div",{staticClass:"margin-bottom-sm"},[a("el-form",{attrs:{size:"mini",inline:"","label-width":"80px"}},[a("div",[n.isEmployee?a("el-form-item",[a("el-select",{staticClass:"w100",model:{value:n.searchForm.onBusiness,callback:function(t){n.$set(n.searchForm,"onBusiness",t)},expression:"searchForm.onBusiness"}},[a("el-option",{attrs:{label:"因公",value:"1"}}),n._v(" "),a("el-option",{attrs:{label:"因私",value:"0"}})],1)],1):n._e(),n._v(" "),a("el-form-item",{attrs:{label:"入住日期",prop:"checkInDate"}},[a("el-date-picker",{staticClass:"w160",attrs:{"popper-class":"disabled-next-year","picker-options":n.pickerOptions1,clearable:!1,type:"date",placeholder:"yyyy-mm-dd"},model:{value:n.searchForm.checkInDate,callback:function(t){n.$set(n.searchForm,"checkInDate",t)},expression:"searchForm.checkInDate"}})],1),n._v(" "),a("el-form-item",{attrs:{label:"退房日期",prop:"checkOutDate"}},[a("el-date-picker",{staticClass:"w160",attrs:{"popper-class":"disabled-next-year","picker-options":n.pickerOptions2,clearable:!1,type:"date",placeholder:"yyyy-mm-dd"},model:{value:n.searchForm.checkOutDate,callback:function(t){n.$set(n.searchForm,"checkOutDate",t)},expression:"searchForm.checkOutDate"}})],1),n._v(" "),a("el-form-item",[a("easy-button",{attrs:{size:"mini",type:"primary"},on:{click:n.onSearchPrice}},[n._v("搜索")])],1)],1),n._v(" "),a("div",[a("el-form-item",[n._l(n.passengerList,function(t,e){return a("el-tag",{key:t.type+t.detail.id,staticClass:"margin-right-sm",attrs:{size:"small",closable:""},on:{close:function(t){return n.onRemovePassenger(e)}}},[n._v(n._s(t.showName)+"\n                    ")])}),n._v(" "),a("c-select-passenger",{attrs:{max:40,type:"hotel","on-business":n.onBusiness},model:{value:n.passengerList,callback:function(t){n.passengerList=t},expression:"passengerList"}},[a("el-button",{staticClass:"margin-sm-reverse padding-sm",attrs:{type:"text"}},[a("i",{staticClass:"el-icon-circle-plus"},[n._v("选择入住人")])])],1)],2)],1)])],1),n._v(" "),a("el-checkbox-group",{attrs:{size:"mini"},model:{value:n.filter,callback:function(t){n.filter=t},expression:"filter"}},n._l(n.filterItemList,function(t){return a("el-checkbox-button",{key:t,attrs:{label:t}},[n._v(n._s(t))])}),1)],1),n._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:n.loadingPrice,expression:"loadingPrice"}],staticClass:"roomlist"},[0<n.filterList.length?n._l(n.filterList,function(i,t){return a("div",{key:t,staticClass:"roomlist-baseroom-card"},[a("div",{staticClass:"roomname"},[n._v(n._s(i.roomType.RoomTypeName))]),n._v(" "),a("div",{staticClass:"roomtitle"},[a("span",{staticClass:"t1"},[n._v("房间类型")]),n._v(" "),a("span",{staticClass:"t2"},[n._v("床型 & 酒店设施")]),n._v(" "),a("span",{staticClass:"t3"},[n._v("政策")]),n._v(" "),a("span",{staticClass:"t4"},[n._v("每晚均价")])]),n._v(" "),a("div",{staticClass:"roomcard icon-df"},[a("div",{staticClass:"roompanel"},[a("div",{staticClass:"roompanel-pic",on:{click:function(t){return n.onShowRoomInfo(i)}}},[a("el-image",{staticClass:"m-img",attrs:{src:i.roomType.Pictures.map(function(t){return t.URL})[0]}})],1),n._v(" "),a("div",{staticClass:"padding"},[a("ul",{staticStyle:{"line-height":"20px"}},[a("li",[a("i",{staticClass:"iconfont icon-area margin-right-xxs"}),n._v(n._s(i.roomType.AreaRange)+"m²")]),n._v(" "),0<i.roomType.RoomBedInfos.length?a("li",[a("bed-info",{attrs:{infos:i.roomType.RoomBedInfos}})],1):n._e(),n._v(" "),a("li",[a("i",{staticClass:"iconfont icon-floors margin-right-xxs"}),n._v(n._s(i.roomType.FloorRange)+"楼")]),n._v(" "),"unknow"!==i.roomType.HasWindow?a("li",[a("i",{staticClass:"iconfont icon-window margin-right-xxs"}),n._v(" "),a("span",[n._v(n._s(n.getWindowStr(i.roomType.HasWindow)))])]):n._e()]),n._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(t){return n.onShowRoomInfo(i)}}},[n._v("查看客房信息")])],1)]),n._v(" "),a("div",{staticClass:"saleroomlist"},[a("div",{staticClass:"salecardlist-rooms"},n._l(i.roomPriceInfos,function(e,t){return a("div",{key:t,staticClass:"salecard"},[a("div",{staticClass:"flex"},[a("div",{staticClass:"salecard-bedfacility"},[a("div",{staticClass:"facility"},[n._v("\n                              "+n._s(e.roomName)+"\n                            ")]),n._v(" "),i.roomType.MaxOccupancy<=4?a("div",{staticClass:"facility"},n._l(i.roomType.MaxOccupancy,function(t){return a("i",{key:t,staticClass:"iconfont icon-peoplefill"})}),0):a("div",{staticClass:"facility"},[a("i",{staticClass:"iconfont icon-peoplefill"}),n._v(" × "+n._s(i.roomType.MaxOccupancy)+"\n                            ")]),n._v(" "),e.roomInfo&&0<e.roomInfo.RoomBedInfos.length?a("div",{staticClass:"facility"},[a("bed-info",{attrs:{infos:e.roomInfo.RoomBedInfos}})],1):n._e(),n._v(" "),a("div",{staticClass:"facility"},[a("meal-info",{attrs:{infos:e.priceInfos[0].dailyPrices}})],1),n._v(" "),a("div",{staticClass:"facility"},[e.roomInfo&&"-100"!==e.roomInfo.Smoking.IsAllowSmoking?a("div",[a("span",{staticClass:"margin-right-xxs"},["1"===e.roomInfo.Smoking.IsAllowSmoking?a("i",{staticClass:"iconfont icon-smoking"}):a("i",{staticClass:"iconfont icon-nosmoking"})]),n._v(" "),a("span",[n._v(n._s(n.getSmokingStr(e.roomInfo.Smoking.IsAllowSmoking)))])]):n._e()])]),n._v(" "),a("div",{staticClass:"salecard-policy"},[a("div",{staticClass:"policy"},[a("cancel-policy-info",{attrs:{infos:e.cancelPolicyInfos,"cancel-type":e.cancelType,"cancel-remark":e.cancelRemark}})],1),n._v(" "),a("div",{staticClass:"policy"},[e.priceInfos[0].isInstantConfirm?[a("el-popover",{attrs:{placement:"top",width:"230",trigger:"hover"}},[a("div",{staticClass:"text-sm"},[n._v("\n                                    预订此房型后可快速确认订单。\n                                  ")]),n._v(" "),a("span",{staticClass:"cursor-pointer text-green",attrs:{slot:"reference"},slot:"reference"},[a("i",{staticClass:"iconfont icon-roundcheck margin-right-xxs"}),n._v(" "),a("span",{staticClass:"show-info"},[n._v("立即确认")])])])]:a("div",{staticClass:"text-green"},[n._v("均30分钟确认")]),n._v(" "),e.agreement?a("el-popover",{attrs:{trigger:"hover"}},[a("div",[n._v(n._s(e.remark))]),n._v(" "),a("el-tag",{attrs:{slot:"reference",type:"primary",size:"mini"},slot:"reference"},[n._v("协议")])],1):n._e(),n._v(" "),e.info.isViolation?a("el-tag",{attrs:{type:"danger",size:"mini"}},[n._v("超标")]):n._e()],2)]),n._v(" "),a("div",{staticClass:"salecard-price"},[a("div",{staticClass:"salecard-price-panel"},[a("div",{staticClass:"salecard-price-button"},[a("easy-button",{attrs:{type:"warning",tip:e.info.tip,disabled:!e.info.canBook},on:{click:function(t){return n.onBook(i,e)}}},[n._v("预订")]),n._v(" "),e.info.remainingRooms<6?a("div",{staticClass:"text-black"},[n._v("仅剩"+n._s(e.info.remainingRooms)+"间")]):n._e()],1),n._v(" "),a("div",{staticClass:"margin-bottom-xs"},["PP"===e.priceInfos[0].payType?[n._v("在线付")]:"FG"===e.priceInfos[0].payType?[n._v("到店付")]:n._e()],2),n._v(" "),a("div",{staticClass:"room-price"},[n._v("\n                                ¥ "+n._s(e.info.amount)+"\n                              ")])])])])])}),0)])])])}):n.loadingPrice?n._e():[a("div",{staticClass:"text-center margin-bottom-sm",staticStyle:{height:"300px","line-height":"300px"}},[a("div",{staticClass:"text-bold text-gray",staticStyle:{"font-size":"66px"}},[n._v("暂无数据")])])]],2)]),n._v(" "),a("div",{staticClass:"solid-border bg-white margin-bottom z-2"},[a("div",{staticClass:"bg-gray padding-sm"},[n._v("酒店详情")]),n._v(" "),a("div",{staticClass:"padding-sm"},[a("table",[a("tbody",{staticClass:"description-table"},[a("tr",[a("th",[n._v("酒店介绍")]),n._v(" "),a("td",{domProps:{innerHTML:n._s(n.detail.description)}})]),n._v(" "),a("tr",[a("th",[n._v("客房数")]),n._v(" "),a("td",{domProps:{innerHTML:n._s(n.detail.roomQuantity)}})]),n._v(" "),a("tr",[a("th",[n._v("酒店电话")]),n._v(" "),a("td",[n._v(n._s(n.detail.contactInfo.telephone))])]),n._v(" "),a("tr",[a("th",[n._v("开业时间")]),n._v(" "),a("td",[n._v(n._s(n.openYear))])]),n._v(" "),a("tr",[a("th",[n._v("酒店服务")]),n._v(" "),a("td",[a("el-row",n._l(n.hotelFacilities,function(t,e){return a("el-col",{key:e,attrs:{span:8}},[n._v("\n                        "+n._s(t.Name)+"\n                      ")])}),1)],1)]),n._v(" "),a("tr",[a("th",[n._v("房间设施")]),n._v(" "),a("td",[a("el-row",n._l(n.roomFacilities,function(t,e){return a("el-col",{key:e,attrs:{span:8}},[n._v("\n                        "+n._s(t.Name)+"\n                      ")])}),1)],1)]),a("tr",[a("th",[n._v("酒店政策")]),n._v(" "),a("td",n._l(n.filterPolices,function(t,e){return a("div",{key:e,staticClass:"margin-bottom-xs"},[a("div",{domProps:{innerHTML:n._s(t.text)}})])}),0)])])])])])]),n._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"solid-border bg-white margin-bottom z-2"},[a("div",{staticClass:"bg-gray padding-sm"},[n._v("差旅政策")]),n._v(" "),a("ul",{staticClass:"padding-sm"},n._l(n.policyShowList,function(t,e){return a("li",{key:t.levelName+e,staticClass:"margin-bottom-xs"},[a("div",{staticClass:"text-black text-bold"},[n._v("\n                "+n._s(t.levelName)+":\n              ")]),n._v(" "),n._l(t.tips,function(t){return a("div",{key:t.type},[a("span",[n._v(n._s(t.typeName)+":")]),a("span",[n._v(n._s(t.msg))])])})],2)}),0)]),n._v(" "),0<n.detail.transportations.length?a("div",{staticClass:"solid-border bg-white margin-bottom z-2",staticStyle:{position:"sticky",top:"10px"}},[a("div",{staticClass:"bg-gray padding-sm"},[n._v("交通信息")]),n._v(" "),a("ul",{staticClass:"padding-sm transportation-l"},n._l(n.detail.transportations,function(t,e){return a("li",{key:e},[a("div",{staticStyle:{"margin-bottom":"2px"}},[n._v(n._s(t.name))]),n._v(" "),a("div",{staticClass:"text-gray"},[n._v(n._s(t.directions))])])}),0)]):n._e()])],1),n._v(" "),a("el-dialog",{staticClass:"dark-dialog",attrs:{fullscreen:"",visible:n.imageListDialog.visible,"destroy-on-close":"","close-on-click-modal":!1},on:{"update:visible":function(t){return n.$set(n.imageListDialog,"visible",t)}}},[a("div",{staticClass:"text-white",staticStyle:{height:"100vh"}},[a("image-list",{attrs:{title:n.imageListDialog.title,pictures:n.imageListDialog.pictures,"hotel-facilities":n.imageListDialog.hotelFacilities,"room-facilities":n.imageListDialog.roomFacilities,"room-info":n.imageListDialog.roomInfo},on:{close:function(t){n.imageListDialog.visible=!1}}})],1)])],1)},[],!1,null,"c80d7ea2",null));e.default=_.exports},NyPl:function(t,e,i){},XS0u:function(t,e,i){"use strict";e.a={getStorage:function(t){try{return JSON.parse(localStorage.getItem(t)||"null")}catch(t){return null}},setStorage:function(t,e){localStorage.setItem(t,JSON.stringify(e))},removeStorage:function(t){localStorage.removeItem(t)},getStorageInfo:function(){return{keys:Object.keys(localStorage)}},clearAll:function(){localStorage.clear()}}},b76Z:function(t,e,i){},ekXw:function(t,e,i){"use strict";var n={name:"BedInfo",props:{infos:{required:!0,type:Array,default:function(){return[]}}},computed:{bedName:function(){return this.infos&&0<this.infos.length?"363"===this.infos[0].ID?"多床":this.infos.map(function(t){return t.Name}).join("或"):""}}},a=(i("2gTY"),i("KHd+")),s=Object(a.a)(n,function(){var n=this,t=n.$createElement,a=n._self._c||t;return n.infos&&0<n.infos.length?a("el-popover",{attrs:{placement:"top",trigger:"hover"}},[a("div",{staticClass:"text-sm"},["多床"===n.bedName?[n._l(n.infos,function(t,i){return n._l(t.BedInfo,function(t,e){return a("div",{key:i+"-"+e},[n._v("\n          "+n._s(t.NumberOfBeds)+"张"+n._s(t.Name)+" ("+n._s(t.BedWidth)+"米)\n        ")])})})]:[n._l(n.infos,function(t,i){return[0<i?a("div",{key:i,staticClass:"text-sm padding-tb-xs text-gray"},[n._v("或")]):n._e(),n._v(" "),n._l(t.BedInfo,function(t,e){return a("div",{key:i+"-"+e},[n._v("\n          "+n._s(t.NumberOfBeds)+"张"+n._s(t.Name)+" ("+n._s(t.BedWidth)+"米)\n        ")])})]})]],2),n._v(" "),a("span",{staticClass:"cursor-pointer",attrs:{slot:"reference"},slot:"reference"},[a("span",{staticClass:"margin-right-xxs"},["双床"===n.bedName?[a("i",{staticClass:"iconfont icon-bed"}),n._v(" "),a("i",{staticClass:"iconfont icon-bed",staticStyle:{"margin-left":"-4px"}})]:"单人床"===n.bedName?[a("i",{staticClass:"iconfont icon-bed"})]:[a("i",{staticClass:"iconfont icon-double_bed"})]],2),n._v(" "),a("span",{staticClass:"show-info"},[n._v(n._s(n.bedName))])])]):n._e()},[],!1,null,"5f4800f8",null);e.a=s.exports},kmCM:function(t,e,i){"use strict";var n=i("HtQ+");i.n(n).a},lCPZ:function(t,e,i){"use strict";var n=i("lSNA"),r=i.n(n),o=i("Cd74"),c=i("xGbm"),l=i("IUeo"),u=i("gV3c"),a=i("XS0u"),s=i("56Ql");function f(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var p=new Date,m=a.a.getStorage(s.a.HOTEL_SELECT_CITY)||{city:"1"};console.log(m.city);var v=Object(o.e)({searchForm:{onBusiness:"1",checkInDate:new Date(p.getFullYear(),p.getMonth(),p.getDate()),checkOutDate:new Date(p.getFullYear(),p.getMonth(),p.getDate()+1),city:m.city,starRating:"",keyword:"",spNo:"",queryType:"keyword",queryData:{}},passengerList:[],approveList:[]});e.a=function(){var t=Object(l.a)().isEmployee,e=Object(u.a)().route.query,i=e.checkInDate,n=e.checkOutDate,a=e.onBusiness;n&&(v.searchForm.checkOutDate=c.a.parseDate(n)),i&&(v.searchForm.checkInDate=c.a.parseDate(i)),a&&(v.searchForm.onBusiness=a);var s=Object(o.e)({isEmployee:t});return Object(o.h)(function(){return{isEmployee:s.isEmployee,onBusiness:v.searchForm.onBusiness}},function(t){"1"===t.onBusiness&&(v.searchForm.onBusiness=t.isEmployee?"1":"0")}),Object(o.h)(function(){return v.searchForm.checkInDate},function(){var t=c.a.parseDate(v.searchForm.checkInDate);c.a.parseDate(v.searchForm.checkOutDate)<=t&&(v.searchForm.checkOutDate=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1))}),function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?f(Object(i),!0).forEach(function(t){r()(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},Object(o.g)(v),{},Object(o.g)(s),{pickerOptions1:Object(o.a)(function(){var t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();return{disabledDate:function(t){return t.getTime()<e}}}),pickerOptions2:Object(o.a)(function(){var t=c.a.parseDate(c.a.getFormatDate(v.searchForm.checkInDate,"yyyy-MM-dd"));t.setHours(0),t.setDate(t.getDate()+1);var e=t.getTime();return{disabledDate:function(t){return t.getTime()<e}}}),onBusiness:Object(o.a)({set:function(t){v.searchForm.onBusiness=t?"1":"0"},get:function(){return"1"===v.searchForm.onBusiness}}),onRemovePassenger:function(t){v.passengerList.splice(t,1)}})}},pS62:function(t,e,i){},vYGq:function(t,e,i){"use strict";var n=i("b76Z");i.n(n).a},zxp1:function(t,e,i){"use strict";var n=i("NyPl");i.n(n).a}}]);