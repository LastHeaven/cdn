(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"56Ql":function(e,t,r){"use strict";t.a={AIR_HISTORY_CITY_LIST:"AirHistoryCityList",AIR_SELECT_CITY:"AirSelectCity",TRAIN_HISTORY_CITY_LIST:"TrainHistoryCityList",TRAIN_SELECT_CITY:"TrainSelectCity",HOTEL_SELECT_CITY:"hotel.select.city",HOTEL_SEARCH_HISTORY:"hotel.search.history"}},"7ZU/":function(e,t,r){"use strict";var a=r("o0o1"),s=r.n(a),n=r("yXPU"),o=r.n(n),i=r("lwsE"),c=r.n(i),l=r("II3V"),u=l.a.makeGet("/api/wx/cp/getApproveInfo"),p=new function e(){c()(this,e),this.login=l.a.makePost("/api/wx/cp/login"),this.getApproveInfo=function(){var e=o()(s.a.mark(function e(){var t,r=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.apply(void 0,r);case 2:return(t=e.sent).data=(t.data||[]).sort(function(e,t){return t.applyTime-e.applyTime}),e.abrupt("return",t);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()};t.a=p},V6UG:function(e,t,r){"use strict";r.r(t);var a=r("lSNA"),h=r.n(a),s=r("o0o1"),y=r.n(s),n=r("yXPU"),g=r.n(n),f=r("lCPZ"),b=r("Cd74"),_=r("gV3c"),O=r("+n12"),k=r("xGbm"),C=r("zta6"),D=r("7ZU/"),w=r("jxIu");function F(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}var o={name:"Home",setup:function(){var e=Object(_.a)(),r=e.router,t=e.route,a=Object(f.a)(),s=a.searchForm,n=a.isEmployee,o=a.onBusiness,i=a.pickerOptions1,c=a.pickerOptions2,l=a.passengerList,u=a.approveList,p=a.onRemovePassenger,m=Object(b.e)({loading:!1,$searchForm:{},isEmployee:n,route:t,searchForm:s,preference:{airShowGp:0},passengerList:l,approveList:u,pickerOptions1:i,pickerOptions2:c,onBusiness:o}),v=function(){var t=g()(y.a.mark(function e(t){var r,a,s;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=m.approveList.find(function(e){return e.spNo===t}))return e.next=4,C.a.getStationCodeByName(r.departure);e.next=11;break;case 4:return a=e.sent,e.next=7,C.a.getStationCodeByName(r.destination);case 7:s=e.sent,m.searchForm.dCity=a,m.searchForm.aCity=s,m.searchForm.departDate=k.a.parseDate(1e3*r.beginTime);case 11:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),d=function(){var e=g()(y.a.mark(function e(){var t,r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.getApproveInfo();case 2:return t=e.sent,r=t.data||[],m.approveList=r.filter(function(e){return"PASSED"===e.status&&"CC"===e.type}),e.next=7,v(m.searchForm.spNo);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return m.isEmployee&&(m.searchForm.spNo=m.route.query.spNo||"",d()),function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?F(Object(r),!0).forEach(function(e){h()(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},Object(b.g)(m),{onSelectSpNo:v,onRemovePassenger:p,rules:{notEmpty:w.a.notEmpty},onSearch:function(){return g()(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.$searchForm.validate();case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return");case 8:return(t=Object(O.h)(m.searchForm,["aCity","spNo","onBusiness"])).startDate=k.a.getFormatDate(m.searchForm.startDate,"yyyy-MM-dd"),t.endDate=k.a.getFormatDate(m.searchForm.endDate,"yyyy-MM-dd"),e.next=13,r.push({path:"/hotel/list",query:t});case 13:case"end":return e.stop()}},e,null,[[0,5]])}))()},onShowDetail:function(){return g()(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.push({path:"/hotel/detail"});case 2:case"end":return e.stop()}},e)}))()}})}},i=r("KHd+"),c=Object(i.a)(o,function(){var r=this,e=r.$createElement,a=r._self._c||e;return a("div",{staticClass:"page-container padding-top"},[a("div",{staticClass:"bg-white padding z-2 margin-bottom"},[a("el-form",{ref:"$searchForm",attrs:{model:r.searchForm,inline:"",size:"mini"}},[a("div",[r.isEmployee?a("el-form-item",[a("el-select",{staticClass:"w100",model:{value:r.searchForm.onBusiness,callback:function(e){r.$set(r.searchForm,"onBusiness",e)},expression:"searchForm.onBusiness"}},[a("el-option",{attrs:{label:"因公",value:"1"}}),r._v(" "),a("el-option",{attrs:{label:"因私",value:"0"}})],1)],1):r._e(),r._v(" "),a("el-form-item",{attrs:{prop:"aCity",label:"目的地",rules:r.rules.notEmpty}},[a("div",{staticClass:"w160"},[a("c-select-hotel-city",{attrs:{placeholder:"目的地"},model:{value:r.searchForm.aCity,callback:function(e){r.$set(r.searchForm,"aCity",e)},expression:"searchForm.aCity"}})],1)]),r._v(" "),a("el-form-item",{attrs:{label:"入住日期",prop:"startDate",rules:r.rules.notEmpty}},[a("el-date-picker",{staticClass:"w160",attrs:{"popper-class":"disabled-next-year","picker-options":r.pickerOptions1,clearable:!1,type:"date",placeholder:"yyyy-mm-dd"},model:{value:r.searchForm.startDate,callback:function(e){r.$set(r.searchForm,"startDate",e)},expression:"searchForm.startDate"}})],1),r._v(" "),a("el-form-item",{attrs:{label:"退房日期",prop:"endDate",rules:r.rules.notEmpty}},[a("el-date-picker",{staticClass:"w160",attrs:{"popper-class":"disabled-next-year","picker-options":r.pickerOptions1,clearable:!1,type:"date",placeholder:"yyyy-mm-dd"},model:{value:r.searchForm.endDate,callback:function(e){r.$set(r.searchForm,"endDate",e)},expression:"searchForm.endDate"}})],1),r._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"(选填)酒店名/地标/商圈"},model:{value:r.searchForm.key,callback:function(e){r.$set(r.searchForm,"key",e)},expression:"searchForm.key"}})],1),r._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:r.loading},on:{click:r.onSearch}},[r._v("重新搜索")])],1)],1),r._v(" "),a("div",[a("el-form-item",{attrs:{label:"房间数",prop:"roomNum",rules:r.rules.notEmpty}},[a("el-select",{staticClass:"w100",model:{value:r.searchForm.roomNum,callback:function(e){r.$set(r.searchForm,"roomNum",e)},expression:"searchForm.roomNum"}},r._l(10,function(e){return a("el-option",{key:e,attrs:{value:e,label:e+"间"}})}),1)],1),r._v(" "),a("el-form-item",{attrs:{label:"酒店级别",prop:"roomLevel"}},[a("el-select",{staticClass:"w120",model:{value:r.searchForm.roomLevel,callback:function(e){r.$set(r.searchForm,"roomLevel",e)},expression:"searchForm.roomLevel"}},[a("el-option",{attrs:{value:"",label:"不限"}}),r._v(" "),a("el-option",{attrs:{value:"5",label:"五星级/豪华"}}),r._v(" "),a("el-option",{attrs:{value:"4",label:"四星级/高档"}}),r._v(" "),a("el-option",{attrs:{value:"3",label:"三星级/舒适"}}),r._v(" "),a("el-option",{attrs:{value:"2",label:"三星级以下/经济"}})],1)],1),r._v(" "),r.isEmployee?a("el-form-item",{attrs:{label:"审批单"}},[a("el-select",{staticClass:"w150",attrs:{clearable:""},on:{change:r.onSelectSpNo},model:{value:r.searchForm.spNo,callback:function(e){r.$set(r.searchForm,"spNo",e)},expression:"searchForm.spNo"}},r._l(r.approveList,function(e,t){return a("el-option",{key:t,attrs:{value:e.spNo,label:e.spNo}})}),1)],1):r._e(),r._v(" "),a("el-form-item",{attrs:{label:"入住人："}},[r._l(r.passengerList,function(e,t){return a("el-tag",{key:e.type+e.detail.id,staticClass:"margin-right-sm",attrs:{size:"small",closable:""},on:{close:function(e){return r.onRemovePassenger(t)}}},[r._v(r._s(e.showName))])}),r._v(" "),a("c-select-passenger",{attrs:{type:"air","on-business":r.onBusiness},model:{value:r.passengerList,callback:function(e){r.passengerList=e},expression:"passengerList"}},[a("el-button",{staticClass:"margin-sm-reverse padding-sm",attrs:{type:"text"}},[a("i",{staticClass:"el-icon-circle-plus"},[r._v("添加入住人")])])],1)],2)],1)])],1),r._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"solid-border bg-white margin-bottom z-2"},[a("div",{staticClass:"bg-gray padding-sm"},[r._v("浏览历史")]),r._v(" "),a("ul",r._l(3,function(e){return a("li",{key:e,staticClass:"padding-sm flex align-center"},[a("div",[a("el-image",{staticStyle:{width:"50px",height:"36px"},attrs:{src:"//dimg10.c-ctrip.com/images/200k1b000001bqcveD4E9_R_130_130.jpg"}})],1),r._v(" "),a("div",{staticClass:"flex-sub padding-left"},[a("div",[r._v("广州大酒店")]),r._v(" "),a("el-rate",{attrs:{value:4,disabled:""}})],1),r._v(" "),a("div",{staticClass:"w50"},[r._v("\n              ¥ 200\n            ")]),r._v(" "),a("div",[a("i",{staticClass:"iconfont icon-close"})])])}),0)]),r._v(" "),a("div",{staticClass:"solid-border bg-white margin-bottom z-2"},[a("div",{staticClass:"bg-gray padding-sm"},[r._v("差旅政策")]),r._v(" "),a("ul",{staticClass:"padding-sm"},[a("li",{staticClass:"margin-bottom-xs"},[a("div",{staticClass:"text-black text-bold"},[r._v("部门经理:")]),r._v(" "),a("div",[r._v("只能预订经济舱、商务舱")]),r._v(" "),a("div",[r._v("里程必须超过800km")]),a("div",[r._v("不能超过8折")]),r._v(" "),a("div",[r._v("至少提前1天预订")])]),r._v(" "),a("li",{staticClass:"margin-bottom-xs"},[a("div",{staticClass:"text-black text-bold"},[r._v("职员:")]),r._v(" "),a("div",[r._v("只能预订经济舱")]),a("div",[r._v("里程必须超过800km")]),r._v(" "),a("div",[r._v("不能超过4折")]),a("div",[r._v("至少提前2天预订")])]),r._v(" "),a("li",{staticClass:"margin-bottom-xs"},[a("div",{staticClass:"text-black text-bold"},[r._v("通用:")]),r._v(" "),a("div",[r._v("只能预订经济舱")]),r._v(" "),a("div",[r._v("里程必须超过800km")]),r._v(" "),a("div",[r._v("不能超过8折")]),r._v(" "),a("div",[r._v("至少提前3天预订")])])])])]),r._v(" "),a("el-col",{attrs:{span:18}},[a("div",{staticClass:"solid-border bg-white margin-bottom z-2"},[a("div",{staticClass:"bg-gray padding-sm"},[r._v("热门城市")]),r._v(" "),a("div",{staticClass:"flex flex-wrap"},[a("div",{staticClass:"flex"},[a("div"),r._v(" "),a("div")])])])])],1)],1)},[],!1,null,null,null);t.default=c.exports},XS0u:function(e,t,r){"use strict";t.a={getStorage:function(e){try{return JSON.parse(localStorage.getItem(e)||"null")}catch(e){return null}},setStorage:function(e,t){localStorage.setItem(e,JSON.stringify(t))},removeStorage:function(e){localStorage.removeItem(e)},getStorageInfo:function(){return{keys:Object.keys(localStorage)}},clearAll:function(){localStorage.clear()}}},lCPZ:function(e,t,r){"use strict";var a=r("lSNA"),o=r.n(a),i=r("Cd74"),c=r("xGbm"),l=r("IUeo"),u=r("gV3c"),s=r("XS0u"),n=r("56Ql");function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}var m=new Date,v=s.a.getStorage(n.a.HOTEL_SELECT_CITY)||{city:"1"};console.log(v.city);var d=Object(i.e)({searchForm:{onBusiness:"1",checkInDate:new Date(m.getFullYear(),m.getMonth(),m.getDate()),checkOutDate:new Date(m.getFullYear(),m.getMonth(),m.getDate()+1),city:v.city,starRating:"",keyword:"",spNo:"",queryType:"keyword",queryData:{}},passengerList:[],approveList:[]});t.a=function(){var e=Object(l.a)().isEmployee,t=Object(u.a)().route.query,r=t.checkInDate,a=t.checkOutDate,s=t.onBusiness;a&&(d.searchForm.checkOutDate=c.a.parseDate(a)),r&&(d.searchForm.checkInDate=c.a.parseDate(r)),s&&(d.searchForm.onBusiness=s);var n=Object(i.e)({isEmployee:e});return Object(i.h)(function(){return{isEmployee:n.isEmployee,onBusiness:d.searchForm.onBusiness}},function(e){"1"===e.onBusiness&&(d.searchForm.onBusiness=e.isEmployee?"1":"0")}),Object(i.h)(function(){return d.searchForm.checkInDate},function(){var e=c.a.parseDate(d.searchForm.checkInDate);c.a.parseDate(d.searchForm.checkOutDate)<=e&&(d.searchForm.checkOutDate=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1))}),function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach(function(e){o()(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},Object(i.g)(d),{},Object(i.g)(n),{pickerOptions1:Object(i.a)(function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime();return{disabledDate:function(e){return e.getTime()<t}}}),pickerOptions2:Object(i.a)(function(){var e=c.a.parseDate(c.a.getFormatDate(d.searchForm.checkInDate,"yyyy-MM-dd"));e.setHours(0),e.setDate(e.getDate()+1);var t=e.getTime();return{disabledDate:function(e){return e.getTime()<t}}}),onBusiness:Object(i.a)({set:function(e){d.searchForm.onBusiness=e?"1":"0"},get:function(){return"1"===d.searchForm.onBusiness}}),onRemovePassenger:function(e){d.passengerList.splice(e,1)}})}}}]);