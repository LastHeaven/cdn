(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"29Rb":function(e,t,a){"use strict";var r=a("lwsE"),n=a.n(r),o=a("II3V"),i=a("tOq/");t.a=new function e(){n()(this,e),this.getAccountPeriod=o.a.makeGet("/api/tmc/accountPeriod/get"),this.queryAccount=o.a.makeGet("/api/tmc/account/queryAccount"),this.queryCityLevel=o.a.makeGet("/api/tmc/cityLevel/queryCityLevel",{expire:i.a._10S})}},"2gTY":function(e,t,a){"use strict";var r=a("HB/z");a.n(r).a},"5Hw/":function(e,t,a){"use strict";var r=a("ey23");a.n(r).a},BoB9:function(e,t,a){"use strict";var i=a("xGbm"),r={getNumberOfBreakfast:function(e){if(e&&0<e.length){var t=e[0];if(t.dailyPrices&&0<t.dailyPrices.length){var a=t.dailyPrices[0].mealInfo;if(a)return a.numberOfBreakfast}}return""},getCancelRuleType:function(e,t){if(null!=t)return t;if(!e||0===e.length)return 1;var a=e[0];return i.a.parseDate(a.start)>new Date?1:0},getCancelPolicyTypeStr:function(e,t){if(null!=t)return["不可取消","限时取消","免费取消"][t];if(!e||0===e.length)return"免费取消";var a=e[0];return i.a.parseDate(a.start)>new Date?"限时取消":"不可取消"},getCancelPolicyDescription:function(e,t){if(t)return t;if(!e)return"可免费取消";var a=e.penaltyAmount.filter(function(e){return"DisplayCurrency"===e.type}).map(function(e){return e.amount})[0],r="";null!=a&&(r="RMB ".concat(a));var n=i.a.parseDate(e.start);if(new Date<n){var o=i.a.getFormatDate(e.start,"yyyy-MM-dd hh:mm");return"【".concat(o,"】前可免费取消修改，若未入住或过时取消修改将收取您全额房费").concat(r,"。我们会根据您的付款方式进行预授权或扣除房费，订单需等酒店或供应商确认后生效，订单确认结果以短信或邮件通知为准，如订单不确认将解除预授权或全额退款至您的付款账户。")}return"该订单确认后不可被取消修改，若未入住将收取您全额房费".concat(r,"。我们会根据您的付款方式进行预授权或扣除房费，订单需等酒店或供应商确认后生效，订单确认结果以短信或邮件通知为准，如订单不确认将解除预授权或全额退款至您的付款账户。")},getSmokingStr:function(e){return{1:"可吸烟",2:"禁烟","-100":"未知"}[e]||""},getBroadNetInfo:function(e,t){return 0===e&&0===t?"无宽带网络":2===e&&0===t?"全部房间支持免费无线宽带上网":0===e&&2===t?"全部房间支持免费有线宽带上网":2===e&&2===t?"全部房间支持免费有线和无线宽带上网":2===e?"全部房间支持免费无线宽带上网":2===t?"全部房间支持免费有线宽带上网":2===e?"全部房间支持免费无线宽带上网":4===e?"部分房间支持免费无线宽带上网":4===t?"部分房间支持免费有线宽带上网":"部分房间支持收费有线或无线宽带上网"},getWindowStr:function(e){return{0:"无窗",1:"部分有窗",2:"有窗",4:"内窗",5:"天窗",6:"封闭窗",7:"飘窗",unknow:"未知"}[e]||""}};t.a=r},FI2E:function(e,t,a){"use strict";var r={name:"MealInfo",props:{mealInfo:{type:Object,default:function(){}}},computed:{mealInfoStr:function(){var e,t=this.mealInfo,a=t.numberOfBreakfast,r=t.numberOfLunch,n=t.numberOfDinner,o=t.isOptionalMeal,i=[];0<a&&i.push("早"),0<r&&i.push("午"),0<n&&i.push("晚"),e=o?"可选":0<i.length?i.join("")+"餐":"无餐食";var c=[];0<a&&c.push("".concat(a,"份早餐")),0<r&&c.push("".concat(r,"份午餐")),0<n&&c.push("".concat(n,"份晚餐"));return{description:0<c.length?c.join(","):"无餐食",text:e}}}},n=(a("5Hw/"),a("KHd+")),o=Object(n.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return"无餐食"!==e.mealInfoStr.text?a("el-popover",{attrs:{placement:"top",trigger:"hover"}},[a("div",{staticClass:"text-sm"},[e._v("\n    "+e._s(e.mealInfoStr.description)+"\n  ")]),e._v(" "),a("span",{staticClass:"cursor-pointer",attrs:{slot:"reference"},slot:"reference"},[a("span",{staticClass:"show-info"},[e._v(e._s(e.mealInfoStr.text))])])]):a("span",[a("span",[e._v(e._s(e.mealInfoStr.text))])])},[],!1,null,"7ae8034e",null);t.a=o.exports},GxGS:function(e,t,a){"use strict";var r=a("o0o1"),n=a.n(r),o=a("yXPU"),i=a.n(o),c=a("Cd74"),s=a("9aTJ");t.a=function(){var a=Object(c.e)({airFilterTakeOffTime:0,airLimitTakeOffTime:0,airShowGp:0,airLimitMessage:"",airRequiredCostCenter:1,airCostCenter:1}),r=!1,e=function(){var e=i()(n.a.mark(function e(){var t;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=5;break}return e.next=3,s.a.queryByCompanyId();case 3:(t=e.sent).data&&(Object.assign(a,t.data),null!==a.airRequiredCostCenter&&void 0!==a.airRequiredCostCenter||(a.airRequiredCostCenter=1),r=!0);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return e(),{preference:a,loadPreferenceSetting:e}}},"HB/z":function(e,t,a){},JHpf:function(e,t,a){"use strict";var r=a("lwsE"),n=a.n(r),o=a("II3V");t.a=new function e(){n()(this,e),this.put=o.a.makePost("/api/cache/put",{successW:!1}),this.get=o.a.makeGet("/api/cache/get",{expire:6e4})}},S6Xx:function(e,t,a){"use strict";a.r(t);var r=a("lSNA"),b=a.n(r),n=a("o0o1"),y=a.n(n),o=a("yXPU"),g=a.n(o),i=a("RIqP"),_=a.n(i),k=a("Cd74"),x=a("gV3c"),I=a("JHpf"),O=a("sOS3"),C=a("jxIu"),D=a("xGbm"),c=a("FI2E"),w=a("Q5Tz"),j=a("BoB9"),P=a("krE8"),N=a("kwYm"),B=a("IUeo"),L=a("+n12"),F=a("1m11"),R=a("29Rb"),T=a("Lmx9"),S=a("GxGS");function E(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)}return a}var s={name:"Book",components:{BedInfo:a("ekXw").a,MealInfo:c.a},setup:function(){var e=Object(x.a)(),s=e.router,t=e.route,a=Object(O.a)().serviceFee,r=Object(B.a)(),n=r.costCenterId,o=r.isTongYe,i=r.userInfo,c=Object(T.a)("hotel"),l=c.transList,u=c.commonPolicy,m=Object(S.a)().preference,f=Object(k.e)({$form:{},error:{priceInfo:!1},level:"",costCenterId:n,isTongYe:o,userInfo:i,passengerList:[],query:{hotelId:"",roomId:"",checkInDate:"",checkOutDate:"",priceType:"",agreement:""},searchForm:{checkInDate:"",checkOutDate:""},serviceFee:a,roomPriceInfo:{priceInfos:[]},detail:{checkInDate:"",checkOutDate:"",hotel:{hotelId:"",hotelName:"",address:""},room:{agreement:"",roomID:"",roomName:"",roomInfo:{Smoking:{IsAllowSmoking:"-100"},RoomBedInfos:[]},priceInfos:[],cancelPolicyInfos:[]},roomType:{MaxOccupancy:1,RoomTypeID:"",RoomTypeName:""}},form:{onBusiness:"",roomNum:1,roomList:[],needs:[],otherNeed:"",bedType:"",areaRange:"",extraBedFee:"",wirelessBroadnet:"",wiredBroadnet:"",smoking:"",checkInDate:"",checkOutDate:"",contactName:"",contactPhone:"",contactEmail:"",costCenter:"",violation:{option:"",reason:""}},options:{costCenter:[],violationReason:["符合标准的房间已售完","其它"]},checkAgreement:!0,commonPolicy:u,policyTransList:l});f.bedInfos=Object(k.a)(function(){return f.detail.room.roomInfo.RoomBedInfos}),f.onBusiness=Object(k.a)(function(){return"1"===f.form.onBusiness}),f.cacheId=Object(k.a)(function(){return t.query.t}),f.cancelRuleDesc=Object(k.a)(function(){return j.a.getCancelPolicyDescription((f.detail.room.cancelPolicyInfos||[])[0],f.detail.room.cancelRemark)}),f.checkInDate=Object(k.a)(function(){return D.a.parseDate(f.form.checkInDate)}),f.checkOutDate=Object(k.a)(function(){return D.a.parseDate(f.form.checkOutDate)}),f.checkInDateStr=Object(k.a)(function(){return D.a.getFormatDate(f.form.checkInDate,"yyyy-MM-dd（周w）")}),f.checkOutDateStr=Object(k.a)(function(){return D.a.getFormatDate(f.form.checkOutDate,"yyyy-MM-dd（周w）")}),f.roomDays=Object(k.a)(function(){return D.a.getBetweenDay(f.checkInDate,f.checkOutDate)-1}),f.maxRoomNum=Object(k.a)(function(){var e=f.roomPriceInfo.priceInfos.map(function(e){return"10+"===e.remainingRooms?10:+e.remainingRooms});return Math.min.apply(Math,_()(e).concat([10]))}),f.dailyPrices=Object(k.a)(function(){var e=[];if(0<f.roomPriceInfo.priceInfos.length){for(var t=f.roomPriceInfo.priceInfos[0],a=t.dailyPrices.length,r=0;r<a;r++){var n=t.dailyPrices[r],o=D.a.parseDate(n.effectiveDate),i={numberOfBreakfast:0,isOptionalMeal:!1,numberOfLunch:0,numberOfDinner:0};if(i.numberOfDinner=n.mealInfo.numberOfDinner,0<r){var c=t.dailyPrices[r-1];i.numberOfBreakfast=c.mealInfo.numberOfBreakfast,i.numberOfLunch=c.mealInfo.numberOfLunch,i.isOptionalMeal=c.mealInfo.isOptionalMeal}e.push({dateStr:D.a.getFormatDate(o,"MM-dd"),price:n.prices.filter(function(e){return"DisplayCurrency"===e.type}).map(function(e){return e.inclusiveAmount})[0],mealInfo:i})}var s=t.dailyPrices[a-1],l=D.a.parseDate(s.effectiveDate);e.push({dateStr:D.a.getFormatDate(new Date(l.getFullYear(),l.getMonth(),l.getDate()+1),"MM-dd"),price:"",mealInfo:{numberOfBreakfast:s.mealInfo.numberOfBreakfast,isOptionalMeal:!1,numberOfLunch:0,numberOfDinner:0}})}return e}),f.totalRoomFee=Object(k.a)(function(){return f.dailyPrices.reduce(function(e,t){return t.price&&(e+=+t.price),e},0)*f.form.roomNum}),f.servicePrice=Object(k.a)(function(){var t=f.form.onBusiness;return+(f.serviceFee.amountList.find(function(e){return e.type===t&&"HOTEL"===e.product&&e.productType===(f.detail.room.agreement?"AGREEMENT":"NORMAL")})||{onlineAmount:0}).onlineAmount}),f.totalServicePrice=Object(k.a)(function(){return f.servicePrice*f.roomDays*f.form.roomNum}),f.priceList=Object(k.a)(function(){return[{feeType:"房费",price:f.totalRoomFee},{feeType:"服务费",price:f.totalServicePrice}]}),f.totalFee=Object(k.a)(function(){return f.priceList.reduce(function(e,t){return e+t.price},0)}),f.broadNetInfo=Object(k.a)(function(){return j.a.getBroadNetInfo(f.form.wirelessBroadnet,f.form.wiredBroadnet)}),f.extraBedInfo=Object(k.a)(function(){if(""===f.form.extraBedFee||null===f.form.extraBedFee||void 0===f.form.extraBedFee)return"不能加床";if("Unknown"===f.form.extraBedFee)return"未知";var e=+f.form.extraBedFee;return 0==e?"免费加床":"加床费"+e+"元"}),f.costCenterRules=Object(k.a)(function(){return 2===m.airRequiredCostCenter?C.a.notEmpty:[]}),f.fitPolicy=Object(k.a)(function(){if(!f.onBusiness)return null;var e=Object.keys(f.passengerList.filter(function(e){return"colleague"===e.key}).groupBy(function(e){return e.detail.level||""})),t=f.policyTransList.toMap(function(e){return e.level});return e.map(function(e){return t[e]||f.commonPolicy}).map(function(e){return Object.assign({},e,{amount:((e.cityLimitList||[]).toMap(function(e){return e.level})[f.level]||{}).amount})}).findMax(function(e,t){return+e.amount>+t.amount})}),f.averageRoomFee=Object(k.a)(function(){var e=f.dailyPrices.reduce(function(e,t){return t.price&&(e+=+t.price),e},0);return Math.ceil(e/(f.dailyPrices.length-1))}),f.isViolation=Object(k.a)(function(){return!!f.fitPolicy&&f.fitPolicy.amount<f.averageRoomFee}),f.canBook=Object(k.a)(function(){return!(f.fitPolicy&&f.fitPolicy.amount<f.averageRoomFee)||0!==f.fitPolicy.violation}),f.violationMsg=Object(k.a)(function(){return f.fitPolicy?{1:"一线城市",2:"二线城市",3:"三线城市",99:"其他城市"}[f.level]+"不能超过¥"+f.fitPolicy.amount:""});var d=function(){var e=g()(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.list();case 2:t=e.sent,f.options.costCenter=t.data||[];case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();f.showCostCenter=Object(k.a)(function(){return f.onBusiness}),Object(k.h)(function(){return f.searchForm.checkInDate},function(){var e=D.a.parseDate(f.searchForm.checkInDate);D.a.parseDate(f.searchForm.checkOutDate)<=e&&(f.searchForm.checkOutDate=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1))}),Object(k.h)(function(){return f.userInfo},function(e){Object(L.e)(f.form.contactPhone)&&(f.form.contactPhone=e.mobile||""),Object(L.e)(f.form.contactName)&&(f.form.contactName=e.realName||e.nickName||""),Object(L.e)(f.form.contactEmail)&&(f.form.contactEmail=e.email||"")}),Object(k.h)(function(){return f.showCostCenter},function(){d()});var p=function(){var e=g()(y.a.mark(function e(){var t,a,r,n,o,i,c;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get({key:f.cacheId});case 2:if(t=e.sent,a=t.data){e.next=7;break}return e.next=7,s.replace("/home");case 7:if(r=JSON.parse(a),Object.fillInEmpty(r,"passengerList",[]),Object.fillInEmpty(r,"room",function(){return{}}),Object.fillInEmpty(r,"room.roomInfo",function(){return{}}),Object.fillInEmpty(r,"room.roomInfo.RoomBedInfos",function(){return[]}),Object.fillInEmpty(r,"room.roomInfo.Smoking",function(){return{}}),Object.fillInEmpty(r,"room.roomInfo.Smoking.IsAllowSmoking",function(){return"-100"}),f.onBusiness)return e.prev=15,e.next=18,R.a.queryCityLevel({cityId:r.hotel.rootCityId});e.next=24;break;case 18:n=e.sent,f.level=n.data||"99",e.next=24;break;case 22:e.prev=22,e.t0=e.catch(15);case 24:return f.detail=r,f.searchForm.checkInDate=D.a.parseDate(f.detail.checkInDate),f.searchForm.checkOutDate=D.a.parseDate(f.detail.checkOutDate),f.form.onBusiness=f.detail.onBusiness||"0",f.form.checkInDate=f.searchForm.checkInDate,f.form.checkOutDate=f.searchForm.checkOutDate,f.query.hotelId=f.detail.hotel.hotelId,f.query.roomId=f.detail.room.roomID,f.query.agreement=f.detail.room.agreement,f.query.checkInDate=f.searchForm.checkInDate,f.query.checkOutDate=f.searchForm.checkOutDate,o=f.detail.room,i=f.detail.roomType,o.roomInfo&&(f.form.bedType=JSON.stringify(o.roomInfo.RoomBedInfos),f.form.smoking=j.a.getSmokingStr(o.roomInfo.Smoking.IsAllowSmoking),f.form.extraBedFee=o.roomInfo.ExtraBedFee),f.form.areaRange=i.AreaRange+"平方米",f.form.wirelessBroadnet=i.BroadNet.WirelessBroadnet,f.form.wiredBroadnet=i.BroadNet.WiredBroadnet,c=r.passengerList,f.form.roomNum=Math.ceil(c.length/r.roomType.MaxOccupancy),console.log(Math.ceil(c.length/r.roomType.MaxOccupancy)),e.next=46,Object(k.b)();case 46:f.passengerList=c;case 47:case"end":return e.stop()}},e,null,[[15,22]])}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=g()(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.a.simplePrice(f.query);case 3:t=e.sent,f.roomPriceInfo=t.data,f.form.checkInDate=f.query.checkInDate,f.form.checkOutDate=f.query.checkOutDate,f.error.priceInfo=!1,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),f.error.priceInfo=!0;case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(){return e.apply(this,arguments)}}();f.maxGuestNum=Object(k.a)(function(){return f.form.roomList.map(function(e){return e.guestList.length}).reduce(function(e,t){return e+t},0)}),f.guestList=Object(k.a)(function(){var r=f.form.roomList.length,n=new Array(f.maxGuestNum);return f.form.roomList.forEach(function(e,a){e.guestList.forEach(function(e,t){n[t*r+a]=e})}),n}),Object(k.h)(function(){return f.passengerList},function(e,t){f.guestList.forEach(function(e){"select"===e.type&&(e.type="input",e.data={detail:{name:""},uKey:""})}),e.forEach(function(e,t){var a=f.guestList[t];a.type="select",a.data=e})});function h(){return{type:"input",data:{detail:{name:""},uKey:""}}}return Object(k.h)(function(){return f.form.roomNum},function(e){var t=f.detail.roomType.MaxOccupancy;6<t&&(t=6);var a=f.form.roomList;e<=a.length?f.form.roomList=a.slice(0,e):a.push.apply(a,_()(new Array(e-a.length).fill("").map(function(){return{costCenter:"",guestList:new Array(t).fill("").map(function(){return h()}),violationReason:""}})))}),Object(k.h)(function(){return f.detail.roomType.MaxOccupancy},function(r){6<r&&(r=6),f.form.roomList.forEach(function(e){var t,a=e.guestList.length;a<=r?(t=e.guestList).push.apply(t,_()(new Array(r-a).fill("").map(function(){return h()}))):e.guestList=e.guestList.slice(0,r)})}),function(){var e=g()(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.loading=!0,e.prev=1,e.next=4,p();case 4:return e.next=6,v();case 6:return e.prev=6,f.loading=!1,e.finish(6);case 9:case"end":return e.stop()}},e,null,[[1,,6,9]])}));return function(){return e.apply(this,arguments)}}()(),function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?E(Object(a),!0).forEach(function(e){b()(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}({},Object(k.g)(f),{reLoadPriceInfo:function(){return g()(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.query.checkInDate=f.form.checkInDate,f.query.checkOutDate=f.form.checkOutDate,e.next=4,v();case 4:case"end":return e.stop()}},e)}))()},pickerOptions1:Object(k.a)(function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime();return{disabledDate:function(e){return e.getTime()<t}}}),pickerOptions2:Object(k.a)(function(){var e=D.a.parseDate(D.a.getFormatDate(f.searchForm.checkInDate,"yyyy-MM-dd"));e.setHours(0),e.setDate(e.getDate()+1);var t=e.getTime();return{disabledDate:function(e){return e.getTime()<t}}}),rules:{notEmpty:C.a.notEmpty,email:C.a.email},onRemoveGuest:function(t){var e=f.passengerList.findIndex(function(e){return e===t.data});-1<e&&f.passengerList.splice(e,1)},onSubmit:function(){return g()(y.a.mark(function e(){var t,a,r,n,o,i,c;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.$form.validate();case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return");case 8:return t=f.detail.hotel,a=f.detail.room,r=f.detail.roomType,n=f.form,o=f.roomPriceInfo.priceInfos[0],i={agreementNo:f.detail.room.agreement,agreementPriceId:f.detail.room.roomID,MaxOccupancy:f.detail.roomType.MaxOccupancy,FloorRange:f.detail.roomType.FloorRange,areaRange:n.areaRange,bedType:n.bedType,cancelRuleDesc:f.cancelRuleDesc,cancelRuleType:j.a.getCancelRuleType(f.detail.room.cancelPolicyInfos,f.detail.room.cancelType),checkInDate:n.checkInDate,checkOutDate:n.checkOutDate,cityId:t.cityId,cityName:t.cityName,rootCityId:t.rootCityId,costCenter:n.costCenter,violationReason:"其它"===n.violation.option?n.violation.reason:n.violation.option,contactEmail:n.contactEmail,contactName:n.contactName,contactPhone:n.contactPhone,dailyPriceList:o.dailyPrices.map(function(e){return{checkInDate:D.a.parseDate(e.effectiveDate),mealsPolicy:JSON.stringify(e.mealInfo),salePrice:100*e.prices.filter(function(e){return"DisplayCurrency"===e.type}).map(function(e){return e.inclusiveAmount})[0],serviceFee:100*f.servicePrice}}),extraBedFee:n.extraBedFee,hotelAddress:t.address,hotelId:t.hotelId,hotelLat:t.lat,hotelLng:t.lng,hotelName:t.hotelName,hotelTel:t.contactInfo.telephone,onBusiness:n.onBusiness,orderClass:"N",orderSource:F.b,prepaidIndicator:"PP"===o.PayType,purchaseRemark:[].concat(_()(n.needs),[n.otherNeed]).filter(function(e){return!!e}).join(","),roomId:a.roomID,roomList:n.roomList.map(function(e){return Object.assign({},e,{guestList:e.guestList.filter(function(e){return!("input"===e.type&&!e.data.detail.name)}).map(function(e){return"input"===e.type?{vipName:e.data.detail.name}:{employeeId:"colleague"===e.data.key?e.data.detail.id:"",vipId:e.data.detail.userId,vipMobile:e.data.detail.mobile,vipName:e.data.detail.name}})})}),roomName:a.roomName,roomNum:n.roomNum,roomTypeId:r.RoomTypeID,roomTypeName:r.RoomTypeName,serviceFee:100*f.totalServicePrice,smoking:n.smoking,starRating:t.starRating,total:100*f.totalFee,travelApprovalNo:"",windowType:r.HasWindow,wiredBroadnet:n.wiredBroadnet,wirelessBroadnet:n.wirelessBroadnet},e.next=16,N.a.submitOrder(i);case 16:return c=e.sent,e.next=19,s.replace("/hotel/order-detail?id=".concat(c.data.orderId));case 19:case"end":return e.stop()}},e,null,[[0,5]])}))()},onChangeCheckDate:function(){return g()(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.query.checkInDate=f.searchForm.checkInDate,f.query.checkOutDate=f.searchForm.checkOutDate,e.next=4,v();case 4:case"end":return e.stop()}},e)}))()}})}},l=(a("yNc/"),a("KHd+")),u=Object(l.a)(s,function(){var r=this,e=r.$createElement,n=r._self._c||e;return n("div",{staticClass:"page-container"},[n("el-form",{ref:"$form",attrs:{model:r.form,size:"mini"}},[n("el-row",{staticClass:"margin-tb",attrs:{gutter:20}},[n("el-col",{attrs:{span:16}},[n("div",{staticClass:"bg-white solid-border"},[n("div",{staticClass:"flex justify-between align-center padding border-bottom"},[n("div",{staticClass:"text-xl text-bold"},[r._v("\n              "+r._s(r.detail.hotel.hotelName)+" | "+r._s(r.detail.roomType.RoomTypeName)+"\n            ")]),r._v(" "),n("div",[r._e()],1)]),r._v(" "),n("div",{staticClass:"padding border-bottom"},[n("div",{staticClass:"text-xl margin-bottom-sm"},[r._v("预订信息")]),r._v(" "),n("table",{staticClass:"book-msg-t"},[n("tbody",[n("tr",[n("th",[r._v("入离日期")]),r._v(" "),n("td",[r._v("\n                    "+r._s(r.checkInDateStr)+"至"+r._s(r.checkOutDateStr)+"共"),n("span",{staticClass:"text-orange"},[r._v(r._s(r.roomDays))]),r._v("晚\n                    "),n("el-popover",{attrs:{placement:"bottom",title:"修改入离日期",trigger:"click"}},[n("div",[n("el-form-item",{attrs:{label:"入住日期"}},[n("el-date-picker",{attrs:{placeholder:"入住日期","picker-options":r.pickerOptions1},model:{value:r.searchForm.checkInDate,callback:function(e){r.$set(r.searchForm,"checkInDate",e)},expression:"searchForm.checkInDate"}})],1),r._v(" "),n("el-form-item",{attrs:{label:"离店日期"}},[n("el-date-picker",{attrs:{placeholder:"离店日期","picker-options":r.pickerOptions2},model:{value:r.searchForm.checkOutDate,callback:function(e){r.$set(r.searchForm,"checkOutDate",e)},expression:"searchForm.checkOutDate"}})],1)],1),r._v(" "),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("easy-button",{attrs:{type:"primary",size:"mini"},on:{click:r.onChangeCheckDate}},[r._v("确定")])],1),r._v(" "),n("a",{staticClass:"margin-left",attrs:{slot:"reference",href:"javascript:void(0)"},slot:"reference"},[r._v("修改")])])],1)]),r._v(" "),n("tr",[n("th",[r._v("房间数量")]),r._v(" "),n("td",[n("el-input-number",{attrs:{min:1,max:r.maxRoomNum,size:"mini"},model:{value:r.form.roomNum,callback:function(e){r.$set(r.form,"roomNum",e)},expression:"form.roomNum"}}),r._v(" "),n("span",{staticClass:"margin-left"},[r._v("每间最多入住"+r._s(r.detail.roomType.MaxOccupancy)+"人")]),r._v(" "),r.maxRoomNum<6?n("span",{staticClass:"margin-left text-orange"},[r._v("仅剩"+r._s(r.maxRoomNum)+"间")]):r._e()],1)]),r._v(" "),n("tr",[n("th",[r._v("每日房费")]),r._v(" "),n("td",[r.error.priceInfo?n("div",[n("easy-button",{attrs:{type:"text"},on:{click:r.reLoadPriceInfo}},[r._v("重新获取")])],1):n("div",{staticClass:"clearfix w450"},r._l(r.dailyPrices,function(e,t){return n("div",{key:t,staticClass:"float-left price-item"},[n("div",{staticClass:"padding-sm date"},[r._v(r._s(e.dateStr))]),r._v(" "),n("div",{staticClass:"padding-sm text-center"},[n("div",{staticStyle:{"line-height":"18px",height:"18px"}},[""!==e.price?n("div",[r._v("¥ "),n("span",{staticClass:"text-orange"},[r._v(r._s(e.price))])]):r._e()]),r._v(" "),n("div",{staticStyle:{"line-height":"18px",height:"18px"}},[n("meal-info",{attrs:{"meal-info":e.mealInfo}})],1)])])}),0)])])])])]),r._v(" "),n("div",{staticClass:"padding border-bottom"},[n("div",{staticClass:"margin-bottom-sm clearfix"},[n("div",{staticClass:"text-xl float-left"},[r._v("入住人信息")]),r._v(" "),n("div",{staticClass:"float-right"},[n("c-select-passenger",{attrs:{check:"","hotel-info":{level:r.level,price:r.averageRoomFee},max:r.maxGuestNum,type:"hotel","on-business":r.onBusiness},model:{value:r.passengerList,callback:function(e){r.passengerList=e},expression:"passengerList"}},[n("el-button",{staticClass:"margin-sm-reverse padding-sm",attrs:{type:"text"}},[n("i",{staticClass:"el-icon-circle-plus"},[r._v("添加入住人")])])],1)],1)]),r._v(" "),n("table",{staticClass:"check-in-t"},[n("tbody",r._l(r.form.roomList,function(e,a){return n("tr",{key:a},[n("th",[r._v("房间"+r._s(a+1))]),r._v(" "),n("td",[n("el-row",{attrs:{gutter:10}},r._l(e.guestList,function(t,e){return n("el-col",{key:e,attrs:{span:12}},[n("el-form-item",{key:t.type,attrs:{label:"住客"+(e+1),prop:"roomList["+a+"].guestList["+e+"].data.detail.name","label-width":"70px",rules:0===e?r.rules.notEmpty:[]}},["input"===t.type?[n("el-input",{staticClass:"w200",attrs:{placeholder:"住客姓名",size:"mini"},model:{value:t.data.detail.name,callback:function(e){r.$set(t.data.detail,"name",e)},expression:"guest.data.detail.name"}})]:[n("el-tag",{attrs:{size:"small",closable:""},on:{close:function(e){return r.onRemoveGuest(t)}}},[r._v(r._s(t.data.detail.name))])]],2)],1)}),1)],1)])}),0)]),r._v(" "),n("div",{staticClass:"margin-top"},[n("i",{staticClass:"iconfont icon-info_fill text-blue"}),r._v(" "),n("span",{staticClass:"text-gray"},[r._v("每间房至少填写1位住客姓名，所填姓名需与入住时所持证件姓名保持一致。")]),r._v(" "),n("el-popover",{attrs:{trigger:"hover"}},[n("div",[n("div",[r._v("1、所填姓名需与入住时所持证件姓名保持一致。")]),r._v(" "),n("div",[n("div",[r._v("2、中文姓名填写方法：")]),r._v(" "),n("div",[r._v('姓名中有生僻字，须全名用拼音代替。例如：“王鬳军”填写为“Wang/Yanjun"。')]),r._v(" "),n("div",[r._v("姓名中有特殊符号，可省略输入。例如：“汉祖然·买买提”填写为“汉祖然买买提”。")])]),r._v(" "),n("div",[n("div",[r._v("3、英文姓名填写方法：")]),r._v(" "),n("div",[r._v("英文姓名中不能包含数字或特殊符号。")]),r._v(" "),n("div",[r._v("姓在前，姓和名之间用/隔开，如有中间名则空一格紧随名之后。格式：Surname(姓)/Given name(名) Middle name(中间名)。例如：Green/Jim Stephanie。")])])]),r._v(" "),n("span",{staticClass:"cursor-pointer",staticStyle:{"border-bottom":"1px dashed black"},attrs:{slot:"reference"},slot:"reference"},[r._v("填写规则")])])],1)]),r._v(" "),r.onBusiness?n("div",{staticClass:"padding border-bottom"},[n("div",{staticClass:"text-xl margin-bottom-sm"},[r._v("政策信息")]),r._v(" "),n("div",{staticClass:"padding"},[r.isViolation?n("el-form-item",{attrs:{label:" ","label-width":"80px"}},[n("el-popover",{attrs:{title:"超标原因",width:"400",trigger:"hover"}},[n("div",[r._v(r._s(r.violationMsg))]),r._v(" "),n("span",{staticClass:"text-red text-help",attrs:{slot:"reference"},slot:"reference"},[r._v("超标")])])],1):n("el-form-item",{attrs:{label:" ","label-width":"80px"}},[n("span",{staticClass:"text-green"},[r._v("符合政策")])]),r._v(" "),n("el-form-item",{attrs:{label:"成本中心",prop:"costCenter","label-width":"80px",rules:r.costCenterRules}},[n("el-select",{model:{value:r.form.costCenter,callback:function(e){r.$set(r.form,"costCenter",e)},expression:"form.costCenter"}},r._l(r.options.costCenter,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r._v(" "),r.isViolation?n("div",[n("div",{staticClass:"inline-block"},[n("el-form-item",{attrs:{label:"超标原因","label-width":"80px",prop:"violation.option",rules:r.rules.notEmpty}},[n("el-select",{model:{value:r.form.violation.option,callback:function(e){r.$set(r.form.violation,"option",e)},expression:"form.violation.option"}},r._l(r.options.violationReason,function(e){return n("el-option",{key:e,attrs:{value:e}})}),1)],1)],1),r._v(" "),n("div",{staticClass:"inline-block"},["其它"===r.form.violation.option?n("el-form-item",{attrs:{"label-width":"0",prop:"violation.reason",rules:r.rules.notEmpty}},[n("el-input",{attrs:{placeholder:"请填写超标原因"},model:{value:r.form.violation.reason,callback:function(e){r.$set(r.form.violation,"reason",e)},expression:"form.violation.reason"}})],1):r._e()],1)]):r._e()],1)]):r._e(),r._v(" "),n("div",{staticClass:"padding border-bottom"},[n("div",{staticClass:"text-xl margin-bottom-sm"},[r._v("联系人信息")]),r._v(" "),n("div",{staticClass:"padding"},[n("el-form-item",{attrs:{label:"姓名",prop:"contactName",rules:r.rules.notEmpty,"label-width":"70px"}},[n("el-input",{staticClass:"w200",attrs:{placeholder:"联系人姓名"},model:{value:r.form.contactName,callback:function(e){r.$set(r.form,"contactName",e)},expression:"form.contactName"}})],1),r._v(" "),n("el-form-item",{attrs:{label:"手机",prop:"contactPhone",rules:r.rules.notEmpty,"label-width":"70px"}},[n("el-input",{staticClass:"w200",attrs:{placeholder:"联系人手机"},model:{value:r.form.contactPhone,callback:function(e){r.$set(r.form,"contactPhone",e)},expression:"form.contactPhone"}})],1),r._v(" "),n("el-form-item",{attrs:{label:"邮箱",prop:"contactEmail","label-width":"70px",rules:r.rules.email}},[n("el-input",{staticClass:"w200",attrs:{placeholder:"联系人邮箱"},model:{value:r.form.contactEmail,callback:function(e){r.$set(r.form,"contactEmail",e)},expression:"form.contactEmail"}})],1)],1)]),r._v(" "),n("div",{staticClass:"padding border-bottom"},[n("div",{staticClass:"text-xl margin-bottom-sm"},[r._v("更多需求")]),r._v(" "),n("el-checkbox-group",{staticClass:"margin-bottom-sm",model:{value:r.form.needs,callback:function(e){r.$set(r.form,"needs",e)},expression:"form.needs"}},[n("el-checkbox",{attrs:{label:"尽量安排安静的房间"}}),r._v(" "),n("el-checkbox",{attrs:{label:"尽量高楼层"}}),r._v(" "),n("el-checkbox",{attrs:{label:"尽量安排相近的房间"}})],1),r._v(" "),n("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:8},placeholder:"(其它需求我们尽量转达给酒店，但不一定能满足您的要求)"},model:{value:r.form.otherNeed,callback:function(e){r.$set(r.form,"otherNeed",e)},expression:"form.otherNeed"}})],1),r._v(" "),n("div",{staticClass:"padding border-bottom"},[n("div",{staticClass:"text-xl margin-bottom-sm"},[r._v("预订须知")]),r._v(" "),n("table",{staticClass:"common-t"},[n("tbody",[n("tr",[n("th",[r._v("取消条款")]),r._v(" "),n("td",[r._v(r._s(r.cancelRuleDesc))])])])])]),r._v(" "),n("div",{staticClass:"padding flex align-center justify-between"},[n("div",[n("el-checkbox",{model:{value:r.checkAgreement,callback:function(e){r.checkAgreement=e},expression:"checkAgreement"}},[r._v("我已阅读并同意以上预订需求")])],1),r._v(" "),n("div",[n("span",{staticClass:"margin-right-xl"},[r._v("订单总价 "),n("span",{staticClass:"text-orange"},[r._v("¥ "+r._s(r.totalFee))])]),r._v(" "),r.checkAgreement?r.canBook?[n("easy-button",{attrs:{type:"warning"},on:{click:r.onSubmit}},[r._v("提交订单")])]:[n("easy-button",{attrs:{disabled:"",tip:"超标无法预订",type:"warning"}},[r._v("提交订单")])]:[n("easy-button",{attrs:{disabled:"",tip:"请勾选同意",type:"warning"}},[r._v("提交订单")])]],2)])])]),r._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"bg-white solid-border margin-bottom z-2"},[n("el-image",{staticStyle:{width:"100%",height:"200px"},attrs:{fit:"cover",src:"//dimg12.c-ctrip.com/images/200c160000010jy0vEBE6_R_730_350.jpg"}}),r._v(" "),n("div",{staticClass:"padding"},[n("div",{staticClass:"text-xl text-blue margin-bottom-sm"},[r._v(r._s(r.detail.hotel.hotelName))]),r._v(" "),n("div",{staticClass:"text-sm margin-bottom-sm"},[r._v(r._s(r.detail.hotel.address))]),r._v(" "),n("div",{staticClass:"margin-bottom-sm"},[r._v(r._s(r.detail.room.roomName))]),r._v(" "),n("div",[n("table",{staticClass:"hotel-msg-t"},[n("tbody",[r.form.bedType?n("tr",[n("th",{staticClass:"w50"},[r._v("床型")]),r._v(" "),n("td",[n("bed-info",{attrs:{infos:r.bedInfos}})],1)]):r._e(),r._v(" "),n("tr",[n("th",[r._v("面积")]),r._v(" "),n("td",[r._v(r._s(r.form.areaRange))])]),r._v(" "),n("tr",[n("th",[r._v("加床")]),r._v(" "),n("td",[r._v(r._s(r.extraBedInfo))])]),r._v(" "),n("tr",[n("th",[r._v("宽带")]),r._v(" "),n("td",[r._v(r._s(r.broadNetInfo))])]),r._v(" "),r.form.smoking?n("tr",[n("th",[r._v("烟信息")]),r._v(" "),n("td",[r._v(r._s(r.form.smoking))])]):r._e()])])])])],1),r._v(" "),n("div",{staticClass:"bg-white solid-border margin-bottom z-2"},[n("div",{staticClass:"flex text-xxl justify-between align-center padding"},[n("div",{},[r._v("订单总额")]),r._v(" "),n("div",{staticClass:"text-orange"},[r._v("¥ "+r._s(r.totalFee))])]),r._v(" "),n("div",{staticClass:"padding",staticStyle:{"background-color":"#F5F9FC"}},r._l(r.priceList,function(e,t){return n("div",{key:t,staticClass:"flex margin-bottom-xs align-center"},[n("div",[r._v(r._s(e.feeType))]),r._v(" "),n("div",{staticClass:"flex-sub margin-lr",staticStyle:{"border-bottom":"1px dashed #999"}}),r._v(" "),n("div",[n("span",[r._v("¥ "+r._s(e.price))])])])}),0)])])],1)],1)],1)},[],!1,null,"3d26ef1a",null);t.default=u.exports},XqnC:function(e,t,a){},ekXw:function(e,t,a){"use strict";var r={name:"BedInfo",props:{infos:{required:!0,type:Array,default:function(){return[]}}},computed:{bedName:function(){return this.infos&&0<this.infos.length?"363"===this.infos[0].ID?"多床":this.infos.map(function(e){return e.Name}).join("或"):""}}},n=(a("2gTY"),a("KHd+")),o=Object(n.a)(r,function(){var r=this,e=r.$createElement,n=r._self._c||e;return r.infos&&0<r.infos.length?n("el-popover",{attrs:{placement:"top",trigger:"hover"}},[n("div",{staticClass:"text-sm"},["多床"===r.bedName?[r._l(r.infos,function(e,a){return r._l(e.BedInfo,function(e,t){return n("div",{key:a+"-"+t},[r._v("\n          "+r._s(e.NumberOfBeds)+"张"+r._s(e.Name)+" ("+r._s(e.BedWidth)+"米)\n        ")])})})]:[r._l(r.infos,function(e,a){return[0<a?n("div",{key:a,staticClass:"text-sm padding-tb-xs text-gray"},[r._v("或")]):r._e(),r._v(" "),r._l(e.BedInfo,function(e,t){return n("div",{key:a+"-"+t},[r._v("\n          "+r._s(e.NumberOfBeds)+"张"+r._s(e.Name)+" ("+r._s(e.BedWidth)+"米)\n        ")])})]})]],2),r._v(" "),n("span",{staticClass:"cursor-pointer",attrs:{slot:"reference"},slot:"reference"},[n("span",{staticClass:"margin-right-xxs"},["双床"===r.bedName?[n("i",{staticClass:"iconfont icon-bed"}),r._v(" "),n("i",{staticClass:"iconfont icon-bed",staticStyle:{"margin-left":"-4px"}})]:"单人床"===r.bedName?[n("i",{staticClass:"iconfont icon-bed"})]:[n("i",{staticClass:"iconfont icon-double_bed"})]],2),r._v(" "),n("span",{staticClass:"show-info"},[r._v(r._s(r.bedName))])])]):r._e()},[],!1,null,"5f4800f8",null);t.a=o.exports},ey23:function(e,t,a){},kwYm:function(e,t,a){"use strict";var r=a("II3V"),n={queryPage:r.a.makeGet("/api/hotel/order/queryPage4User"),detail:r.a.makeGet("/api/hotel/order/detail"),submitOrder:r.a.makeJPost("/api/hotel/order/submitOrder"),cancel:r.a.makePost("/api/hotel/order/cancel")};t.a=n},sOS3:function(e,t,a){"use strict";var r=a("o0o1"),n=a.n(r),o=a("yXPU"),i=a.n(o),c=a("lwsE"),s=a.n(c),l=a("II3V"),u=new function e(){s()(this,e),this.get=l.a.makeGet("/api/serviceFee/get",{failedW:!1,expire:1e4})},m=a("+n12"),f=a("Cd74");t.a=function(){var a=!1,r=Object(f.e)({busiInsuranceType:null,busiInsurance:null,persInsuranceType:null,persInsurance:null,amountList:[]});return function(){var e=i()(n.a.mark(function e(){var t;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=6;break}return e.next=3,u.get();case 3:(t=e.sent).data&&(Object.assign(r,Object(m.h)(t.data,Object.keys(r))),r.amountList=r.amountList||[]),a=!0;case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),{serviceFee:r}}},"yNc/":function(e,t,a){"use strict";var r=a("XqnC");a.n(r).a}}]);