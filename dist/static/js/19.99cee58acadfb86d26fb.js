(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"0xhm":function(t,e,r){},"1OrG":function(t,e,r){"use strict";var a=r("0xhm");r.n(a).a},"56Ql":function(t,e,r){"use strict";e.a={AIR_HISTORY_CITY_LIST:"AirHistoryCityList",AIR_SELECT_CITY:"AirSelectCity",TRAIN_HISTORY_CITY_LIST:"TrainHistoryCityList",TRAIN_SELECT_CITY:"TrainSelectCity",HOTEL_SELECT_CITY:"hotel.select.city",HOTEL_SEARCH_HISTORY:"hotel.search.history"}},"7ZU/":function(t,e,r){"use strict";var a=r("o0o1"),n=r.n(a),i=r("yXPU"),s=r.n(i),o=r("lwsE"),c=r.n(o),l=r("II3V"),u=l.a.makeGet("/api/wx/cp/getApproveInfo"),d=new function t(){c()(this,t),this.login=l.a.makePost("/api/wx/cp/login"),this.getApproveInfo=function(){var t=s()(n.a.mark(function t(){var e,r=arguments;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.apply(void 0,r);case 2:return(e=t.sent).data=(e.data||[]).sort(function(t,e){return e.applyTime-t.applyTime}),t.abrupt("return",e);case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()};e.a=d},JHpf:function(t,e,r){"use strict";var a=r("lwsE"),n=r.n(a),i=r("II3V");e.a=new function t(){n()(this,t),this.put=i.a.makePost("/api/cache/put",{successW:!1}),this.get=i.a.makeGet("/api/cache/get",{expire:6e4})}},JjU2:function(t,e,r){"use strict";var a=r("RIqP"),n=r.n(a),i=r("lSNA"),s=r.n(i),o=r("Cd74"),c=r("jxIu"),l=r("xGbm"),u=r("IUeo");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}e.a=function(a){var t=Object(u.a)().isEmployee,e=Object(o.e)({isEmployee:t});e.arriveDate=Object(o.a)(function(){return"RT"===a.journeyType?c.a.notEmpty:[]}),e.pickerOptions1=Object(o.a)(function(){var t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();return{disabledDate:function(t){return t.getTime()<e}}}),e.pickerOptions2=Object(o.a)(function(){var t=l.a.parseDate(l.a.getFormatDate(a.departDate,"yyyy-MM-dd"));t.setHours(0);var e=t.getTime();return{disabledDate:function(t){return t.getTime()<e}}}),e.onBusiness=Object(o.a)({set:function(t){a.onBusiness=t?"1":"0"},get:function(){return"1"===a.onBusiness}});return Object(o.h)(function(){return{isEmployee:e.isEmployee,onBusiness:a.onBusiness}},function(t){"1"===t.onBusiness&&(a.onBusiness=t.isEmployee?"1":"0")}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){s()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},Object(o.g)(e),{rules:{notEmpty:c.a.notEmpty,aCity:[].concat(n()(c.a.notEmpty),[{validator:function(t,e,r){""===e&&r(),e===a.dCity?r(new Error("出发到达城市不能一样")):r()},trigger:"blur"}]),arriveDate:e.arriveDate},onExChangeCity:function(){var t=a.dCity;a.dCity=a.aCity,a.aCity=t}})}},"Pk/8":function(t,e,r){"use strict";var a=r("lwsE"),n=r.n(a),i=r("II3V"),s=r("tOq/");e.a=new function t(){n()(this,t),this.searchTicket=i.a.makeGet("/api/train/searchTicket"),this.searchChangeTicket=i.a.makeGet("/api/train/searchChangeTicket"),this.getTrainInfo=i.a.makeGet("/api/train/getTrainInfo",{showLoading:!0,expire:s.a._5M})}},XS0u:function(t,e,r){"use strict";e.a={getStorage:function(t){try{return JSON.parse(localStorage.getItem(t)||"null")}catch(t){return null}},setStorage:function(t,e){localStorage.setItem(t,JSON.stringify(e))},removeStorage:function(t){localStorage.removeItem(t)},getStorageInfo:function(){return{keys:Object.keys(localStorage)}},clearAll:function(){localStorage.clear()}}},k25D:function(t,e,r){"use strict";r.r(e);var a=r("lSNA"),n=r.n(a),i=r("o0o1"),C=r.n(i),s=r("yXPU"),x=r.n(s),o=r("RIqP"),w=r.n(o),O=r("+n12"),c=r("zCTp"),k=r.n(c),D=r("zta6"),j=r("ynVR"),l=r("oZW5"),S=r("XS0u"),T=r("xGbm"),F=r("56Ql"),A=r("Cd74"),E=r("JjU2"),P=r("gV3c"),N=r("IUeo"),I=r("Pk/8"),B=r("JHpf"),M=r("33P3"),L=r("7ZU/");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){n()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var d={name:"List",components:{Timetable:l.a},setup:function(){var t={onBusiness:"1",dCity:"CSQ",aCity:"BJP",departDate:"",arriveDate:"",spNo:""},e=Object.assign({},t),r=Object(N.a)(),a=r.isOpenBook,n=r.isEmployee,i=r.isTongYe,s=Object(P.a)(),o=s.router,d=s.route,p=Object(A.e)({$searchForm:{},isOpenBook:a,isEmployee:n,isTongYe:i,searchForm:t,query:e,timer:null,loading:!1,list:[],tick:Date.now(),order:{cur:"time1",order:!0},filter:{showOnlyTicket:!1,cur:"train_type",tabList:[{id:"train_type",name:"车次类型"},{id:"from_station",name:"出发车站"},{id:"to_station",name:"到达车站"},{id:"departureTime",name:"出发时间"}],query:{train_type:[],from_station:[],to_station:[],departureTime:[]},show:!1},approveList:[]}),c=Object(E.a)(p.searchForm),l=c.onBusiness,u=c.rules,m=c.onExChangeCity;p.pickerOptions1=Object(A.a)(function(){var t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),r=new Date(t.getFullYear(),t.getMonth(),t.getDate()+29).getTime();return{disabledDate:function(t){return t.getTime()<e||t.getTime()>r}}}),p.onBusiness=l,p.gtdcFilter=Object(A.a)({get:function(){var t=p.filter.query.train_type;return-1<t.indexOf("G")&&-1<t.indexOf("D")},set:function(t){var r=p.filter.query.train_type;["G","D"].forEach(t?function(t){r.indexOf(t)<0&&r.push(t)}:function(t){var e=r.indexOf(t);-1<e&&r.splice(e,1)})}}),p.path=Object(A.a)(function(){var t=p.query.aCity,e=p.query.dCity,r=D.a.getStationNameByCode(t),a=D.a.getStationNameByCode(e);return{title:"去程",aCity:p.query.aCity,dCity:p.query.dCity,aCityName:r,dCityName:a}}),p.minDate=Object(A.a)(function(){var t=new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())}),p.tempList=Object(A.a)(function(){var s=Object.keys(j.a.keyMap),o=s.map(function(t){return t+"_price"});return p.list.map(function(e){var t="",r=e.run_time_minute||99;if(r<=60)t=r+"分钟";else{var a=(e.run_time+"").split(":");t="".concat(+a[0],"小时").concat(+a[1],"分钟")}var n=o.map(function(t){return+(e[t]||0)}).filter(function(t){return!!t}),i=[];return s.forEach(function(t){"--"!==e[t+"_num"]&&0<e[t+"_price"]&&i.push({key:t,name:j.a.keyMap[t],num:e[t+"_num"],price:e[t+"_price"]})}),Object.assign(e,{minPrice:Math.min.apply(Math,w()(n)),runTimeStr:t,tickets:i})}).filter(function(t){return(t.note+"").indexOf("停运")<0})}),p.lowestPrice=Object(A.a)(function(){return p.tempList.reduce(function(t,e){return t>e.lowestSalePrice?e.lowestSalePrice:t},999999)}),p.filterList=Object(A.a)(function(){var i={1:[0,6],2:[6,12],3:[12,18],4:[18,24]},t=p.tempList;p.filter.showOnlyTicket&&(t=t.filter(function(t){return 0<t.tickets.filter(function(t){return 0<t.num}).length})),t=t.filter(function(r){var a=+r.start_time.split(":")[0],t=p.filter.query.departureTime,n=p.filter.query,e=n.train_type;return!(0<t.length&&!t.some(function(t){var e=i[t];return a>=e[0]&&a<=e[1]}))&&(!(0<e.length&&!e.some(function(t){return r.train_type===t}))&&["from_station","to_station"].every(function(t){var e=n[t];return!(0<e.length&&e.indexOf(r[t+"_code"])<0)}))});return({time1:function(){t=t.sort(function(t,e){var r=t.start_time>e.start_time?1:-1;return r=t.start_time===e.start_time?0:r,p.order.order?r:-r})},time2:function(){t=t.sort(function(t,e){var r=t.arrive_days+""+t.arrive_time,a=e.arrive_days+""+e.arrive_time,n=a<r?1:-1;return n=r==a?0:n,p.order.order?n:-n})},runtime:function(){t=t.sort(function(t,e){var r=t.run_time_minute-e.run_time_minute;return p.order.order?r:-r})},ticketPrice:function(){t=t.sort(function(t,e){var r=t.minPrice-e.minPrice;return p.order.order?r:-r})}}[p.order.cur]||function(){})(),t}),p.filterOptions=Object(A.a)(function(){var a={train_type:[{id:"G",name:"G-高速动车"},{id:"D",name:"D-动车组"},{id:"Z",name:"Z-直达特快"},{id:"T",name:"T-空调特快"},{id:"K",name:"K-快车"}],from_station:[],to_station:[],departureTime:[{id:1,name:"00:00-06:00"},{id:2,name:"06:00-12:00"},{id:3,name:"12:00-18:00"},{id:4,name:"18:00-24:00"}]},n={from_station:new Set,to_station:new Set};return p.list.forEach(function(r){["from_station","to_station"].forEach(function(t){var e=n[t];e.has(r["".concat(t,"_code")])||(e.add(r["".concat(t,"_code")]),a[t].push({id:r["".concat(t,"_code")],name:r["".concat(t,"_name")]||""}))})}),a}),Object(A.h)(function(){return p.searchForm.departDate},function(t){if(p.query.arriveDate){var e=T.a.parseDate(t);T.a.parseDate(p.query.arriveDate)<e&&(p.searchForm.arriveDate=new Date(e.getFullYear(),e.getMonth(),e.getDate()+2))}}),Object(A.h)(function(){return p.filterList},x()(C.a.mark(function t(){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return p.loading=!0,t.next=3,Object(A.b)();case 3:p.loading=!1;case 4:case"end":return t.stop()}},t)})),{deep:!0});function f(){var t=Object(O.h)(p.searchForm,["onBusiness","dCity","aCity","spNo"]);t.departDate=T.a.getFormatDate(p.searchForm.departDate,"yyyy-MM-dd"),t.gtdc=p.gtdcFilter?"1":"0",Object(O.b)(t)}var v=function(){var t=x()(C.a.mark(function t(){var e;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(p.loading)return t.abrupt("return");t.next=2;break;case 2:return p.loading=!0,p.tick=Date.now(),t.prev=4,t.next=7,I.a.searchTicket({fromStation:p.query.dCity,toStation:p.query.aCity,trainDate:T.a.getShortDate(p.query.departDate)});case 7:e=t.sent,p.list=e.data||[],t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),p.list=[];case 14:return t.prev=14,t.next=17,Object(A.b)();case 17:return p.loading=!1,p.filter.query.from_station=[],p.filter.query.to_station=[],t.finish(14);case 21:case"end":return t.stop()}},t,null,[[4,11,14,21]])}));return function(){return t.apply(this,arguments)}}();p.departDate=Object(A.a)({get:function(){return p.query.departDate},set:function(t){p.loading||(p.query.departDate=t,p.searchForm.departDate=t,f())}}),p.chooseDate=Object(A.a)(function(){if(!p.departDate)return new Date;var t=p.departDate;return new Date(t.getFullYear(),t.getMonth(),t.getDate())}),p.dateList=Object(A.a)(function(){var t=p.chooseDate,e=[],r=6,a=Math.floor((t-p.minDate)/864e5);for(3<a&&(a=3);0<a;)e.push(new Date(t.getFullYear(),t.getMonth(),t.getDate()-a)),r--,a--;e.push(t);for(var n=1;n<=r;n++)e.push(new Date(t.getFullYear(),t.getMonth(),t.getDate()+n));var i=new Date;return e.map(function(t){var e="";if(t.getFullYear()>i.getFullYear()){var r=t.getFullYear()+"";e=r.substr(r.length-2)+"/"}return e+=t.format("MM/dd"),{date:t,dateStr:e,week:t.format("周w"),active:t===p.chooseDate}})});var g=function(){var e=x()(C.a.mark(function t(e){var r,a,n;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=p.approveList.find(function(t){return t.spNo===e}))return t.next=4,D.a.getStationCodeByName(r.departure);t.next=11;break;case 4:return a=t.sent,t.next=7,D.a.getStationCodeByName(r.destination);case 7:n=t.sent,p.searchForm.dCity=a,p.searchForm.aCity=n,p.searchForm.departDate=T.a.parseDate(1e3*r.beginTime);case 11:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),y=function(){var t=x()(C.a.mark(function t(){var e,r;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.a.getApproveInfo();case 2:e=t.sent,r=e.data||[],p.approveList=r.filter(function(t){return"PASSED"===t.status&&"CC"===t.type});case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),h=function(){var t=x()(C.a.mark(function t(){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.$searchForm.validate();case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return");case 8:return Object.assign(p.query,p.searchForm),t.next=11,v();case 11:case"end":return t.stop()}},t,null,[[0,5]])}));return function(){return t.apply(this,arguments)}}(),_=function(){var t=x()(C.a.mark(function t(){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(f(),p.loading){t.next=4;break}return t.next=4,h();case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();y();var b=function(){var t=x()(C.a.mark(function t(){var e,r,a,n,i,s,o,c,l,u;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=d.query,r=e.aCity,a=e.dCity,n=e.departDate,i=e.onBusiness,s=e.gtdc,o=e.spNo,c=S.a.getStorage(F.a.TRAIN_SELECT_CITY)||{},l=new Date,u=T.a.parseDate(n||c.departDate||l),p.searchForm.departDate=u<l?l:u,p.gtdcFilter="1"===(s||c.gtdc),p.searchForm.aCity=r||c.aCity||"BJP",p.searchForm.dCity=a||c.dCity||"CSQ",p.searchForm.onBusiness=i||"1",p.searchForm.spNo=o||"",t.next=12,D.a.getStationNameByCode(r);case 12:return p.aCityName=t.sent,t.next=15,D.a.getStationNameByCode(a);case 15:if(p.dCityName=t.sent,a&&r)return t.next=19,_();t.next=19;break;case 19:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return Object(A.h)(function(){return d.query},function(){b()}),b(),Object(A.c)(function(){S.a.setStorage(F.a.TRAIN_SELECT_CITY,{departDate:p.searchForm.departDate,dCity:p.searchForm.dCity,aCity:p.searchForm.aCity,gtdc:p.gtdcFilter?"1":"0"})}),Y({},Object(A.g)(p),{getShortDate:T.a.getShortDate,lowestIcon:k.a,rules:u,onExChangeCity:m,onSelectSpNo:g,refresh:v,reSearch:function(){return x()(C.a.mark(function t(){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v();case 2:case"end":return t.stop()}},t)}))()},onSearch:_,search:h,onSelectDate:function(t){var e=new Date,r=new Date(e.getFullYear(),e.getMonth(),e.getDate()+29);t.date>r?M.a.alert(T.a.getFormatDate(r,"MM月dd日")+"开始预售，请选择之前的日期"):p.loading||(p.departDate=t.date)},onChangeOrder:function(t){p.order.cur!==t?(p.order.cur=t,p.order.order=!0):p.order.order=!p.order.order},onBook:function(r,a){return x()(C.a.mark(function t(){var e;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.a.put({value:JSON.stringify(Y({},p.query,{detail:r,seatType:a}))});case 2:return e=t.sent,t.next=5,o.push({path:"/train/book",query:{t:e.data}});case 5:case"end":return t.stop()}},t)}))()}})}},p=(r("1OrG"),r("KHd+")),m=Object(p.a)(d,function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("div",{staticClass:"air-content padding-top"},[n("div",{staticClass:"bg-white padding z-2 margin-bottom"},[n("el-form",{ref:"$searchForm",attrs:{model:a.searchForm,inline:"",size:"mini"}},[n("div",[a.isEmployee?n("el-form-item",[n("el-select",{staticClass:"w100",model:{value:a.searchForm.onBusiness,callback:function(t){a.$set(a.searchForm,"onBusiness",t)},expression:"searchForm.onBusiness"}},[n("el-option",{attrs:{label:"因公",value:"1"}}),a._v(" "),n("el-option",{attrs:{label:"因私",value:"0"}})],1)],1):a._e(),a._v(" "),n("el-form-item",{attrs:{prop:"dCity",rules:a.rules.notEmpty}},[n("div",{staticClass:"w160"},[n("c-select-train-station",{attrs:{placeholder:"出发城市"},model:{value:a.searchForm.dCity,callback:function(t){a.$set(a.searchForm,"dCity",t)},expression:"searchForm.dCity"}})],1)]),a._v(" "),n("el-form-item",[n("span",{staticClass:"margin-sm-reverse padding-sm cursor-pointer",attrs:{title:"交换"},on:{click:a.onExChangeCity}},[n("i",{staticClass:"iconfont icon-refresh"})])]),a._v(" "),n("el-form-item",{attrs:{prop:"aCity",rules:a.rules.aCity}},[n("div",{staticClass:"w160"},[n("c-select-train-station",{attrs:{placeholder:"到达城市"},model:{value:a.searchForm.aCity,callback:function(t){a.$set(a.searchForm,"aCity",t)},expression:"searchForm.aCity"}})],1)]),a._v(" "),n("el-form-item",{attrs:{prop:"departDate",rules:a.rules.notEmpty}},[n("el-date-picker",{staticClass:"w160",attrs:{"popper-class":"disabled-next-year","picker-options":a.pickerOptions1,clearable:!1,type:"date",placeholder:"出发日期"},model:{value:a.searchForm.departDate,callback:function(t){a.$set(a.searchForm,"departDate",t)},expression:"searchForm.departDate"}})],1),a._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",loading:a.loading},on:{click:a.onSearch}},[a._v("重新搜索")])],1)],1),a._v(" "),a.isEmployee?n("div",[n("el-form-item",{attrs:{label:"审批单"}},[n("el-select",{staticClass:"w150",attrs:{clearable:""},on:{change:a.onSelectSpNo},model:{value:a.searchForm.spNo,callback:function(t){a.$set(a.searchForm,"spNo",t)},expression:"searchForm.spNo"}},a._l(a.approveList,function(t,e){return n("el-option",{key:e,attrs:{value:t.spNo,label:t.spNo}})}),1)],1)],1):a._e()])],1),a._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("div",{},[n("ul",{staticClass:"flex margin-bottom date-tab-select"},a._l(a.dateList,function(e,t){return n("li",{key:t,staticClass:"flex-sub padding",class:{active:e.active},on:{click:function(t){return a.onSelectDate(e)}}},[a._v("\n            "+a._s(e.dateStr)+" "+a._s(e.week)+"\n          ")])}),0),a._v(" "),n("div",{staticClass:"margin-bottom"},a._l(a.filter.tabList,function(e){return n("div",{key:e.id,staticStyle:{"line-height":"30px",height:"30px"}},[n("span",{staticClass:"margin-right"},[a._v(a._s(e.name))]),a._v(" "),n("a",{staticClass:"margin-right",attrs:{href:"javascript: void(0)"},on:{click:function(t){a.filter.query[e.id]=[]}}},[a._v("不限")]),a._v(" "),n("el-checkbox-group",{staticClass:"inline-block",model:{value:a.filter.query[e.id],callback:function(t){a.$set(a.filter.query,e.id,t)},expression:"filter.query[item.id]"}},a._l(a.filterOptions[e.id],function(t){return n("el-checkbox",{key:t.id,attrs:{label:t.id}},[a._v(a._s(t.name))])}),1)],1)}),0),a._v(" "),n("div",{staticClass:"margin-bottom-sm  bg-white z-2"},[n("div",{staticClass:"flex text-bold text-lg align-center bg-gray padding-lr padding-tb-sm"},[n("div",[a._v(a._s(a.path.title)+"：")]),a._v(" "),n("div",[a._v(a._s(a.path.dCityName))]),a._v(" "),n("div",{staticClass:"air-arrow-right margin-lr-sm",staticStyle:{width:"2em"}}),a._v(" "),n("div",[a._v(a._s(a.path.aCityName))]),a._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!a.loading,expression:"!loading"}],staticClass:"margin-left text-df text-gray"},[a._v("("+a._s(a.list.length)+"个车次)")])]),a._v(" "),n("div",{staticClass:"padding-lr-lg padding-tb flex align-center"},[n("div",{staticClass:"w120"},[a._v("车次信息")]),a._v(" "),n("div",{staticClass:"flex-sub flex align-center",staticStyle:{width:"360px"}},[n("div",{staticClass:"margin-left-sm w140 text-right",staticStyle:{"min-width":"140px"}},[n("div",{staticClass:"margin-sm-reverse padding-sm cursor-pointer",class:{"text-blue":"time1"===a.order.cur},on:{click:function(t){return a.onChangeOrder("time1")}}},[a._v("出发站/时间\n                  "),"time1"!==a.order.cur||a.order.order?n("i",{staticClass:"iconfont icon-arrow-down"}):n("i",{staticClass:"iconfont icon-arrow-up"})])]),a._v(" "),n("div",{staticClass:"flex-sub"},[n("div",{staticClass:"margin-sm-reverse padding-sm cursor-pointer text-center",class:{"text-blue":"runtime"===a.order.cur},on:{click:function(t){return a.onChangeOrder("runtime")}}},[a._v("运行时长\n                  "),"runtime"!==a.order.cur||a.order.order?n("i",{staticClass:"iconfont icon-arrow-down"}):n("i",{staticClass:"iconfont icon-arrow-up"})])]),a._v(" "),n("div",{staticClass:"margin-right-sm w140 text-left",staticStyle:{"min-width":"140px"}},[n("div",{staticClass:"margin-sm-reverse padding-sm cursor-pointer",class:{"text-blue":"time2"===a.order.cur},on:{click:function(t){return a.onChangeOrder("time2")}}},[a._v("到达站/时间\n                  "),"time2"!==a.order.cur||a.order.order?n("i",{staticClass:"iconfont icon-arrow-down"}):n("i",{staticClass:"iconfont icon-arrow-up"})])])]),a._v(" "),n("div",{staticClass:"w500 flex padding-right-sm"},[n("div",{staticClass:"w120 text-right"},[a._v("席别")]),a._v(" "),n("div",{staticClass:"margin-left w80 text-left"},[n("div",{staticClass:"margin-sm-reverse padding-sm cursor-pointer",class:{"text-blue":"ticketPrice"===a.order.cur},on:{click:function(t){return a.onChangeOrder("ticketPrice")}}},[a._v("参考价\n                  "),"ticketPrice"!==a.order.cur||a.order.order?n("i",{staticClass:"iconfont icon-arrow-down"}):n("i",{staticClass:"iconfont icon-arrow-up"})])]),a._v(" "),n("div",{staticClass:"w80 text-right"}),a._v(" "),n("div",{staticClass:"flex-sub text-right"},[n("el-checkbox",{model:{value:a.filter.showOnlyTicket,callback:function(t){a.$set(a.filter,"showOnlyTicket",t)},expression:"filter.showOnlyTicket"}},[a._v("只显示有票车次")])],1)])])]),a._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],staticStyle:{"min-height":"300px"}},[0<a.filterList.length?a._l(a.filterList,function(r,t){return n("div",{key:t,staticClass:"margin-bottom-sm bg-white z-2"},[n("div",{staticClass:"padding-lg flex align-start",staticStyle:{position:"relative"}},[n("div",{staticClass:"w120"},[n("div",{staticClass:"text-black text-bold margin-bottom-sm"},[a._v(a._s(r.train_code))]),a._v(" "),n("timetable",{key:r.train_code,attrs:{"from-station":r.from_station_name,"to-station":r.to_station_name,query:{arriveStation:r.to_station_code,departStation:r.from_station_code,trainCode:r.train_code,trainNo:r.train_no,departTime:a.getShortDate(a.searchForm.departDate)}}},[n("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[a._v("经停站")])],1)],1),a._v(" "),n("div",{staticClass:"flex-sub flex align-center",staticStyle:{width:"360px"}},[n("div",{staticClass:"margin-left-sm w140 text-right",staticStyle:{"min-width":"140px"}},[n("div",{staticClass:"text-xxl text-dark text-bold"},[a._v(a._s(r.start_time))]),a._v(" "),n("div",[n("span",[a._v(a._s(r.from_station_name))]),a._v(" "),r.from_station_name===r.start_station_name?n("span",{staticClass:"font-size13 mark-start"},[a._v("始")]):n("span",{staticClass:"font-size13 mark-pass"},[a._v("过")])])]),a._v(" "),n("div",{staticClass:"padding-tb-sm padding-lr-xl flex-sub"},[n("div",{staticClass:"air-arrow-right"},[n("div",{staticClass:"label text-gray text-center"},[a._v(a._s(r.runTimeStr))]),a._v(" "),n("div",{staticClass:"label-bottom text-gray text-center text-cut"},[n("span")])])]),a._v(" "),n("div",{staticClass:"margin-right-sm w140 text-left",staticStyle:{"min-width":"140px"}},[n("div",{staticClass:"text-xxl text-dark text-bold"},[n("span",[a._v(a._s(r.arrive_time))]),a._v(" "),0<r.arrive_days?n("span",{staticClass:"text-sm"},[a._v("+"+a._s(r.arrive_days))]):a._e()]),a._v(" "),n("div",[n("span",[a._v(a._s(r.to_station_name))]),a._v(" "),r.to_station_name===r.end_station_name?n("span",{staticClass:"font-size13 mark-end"},[a._v("终")]):n("span",{staticClass:"font-size13 mark-pass"},[a._v("过")])])])]),a._v(" "),n("div",{staticClass:"w500 padding-right-sm"},[r.note?n("div",{staticClass:"padding-bottom-xs"},[a._v("\n                    "+a._s(r.note)+"\n                  ")]):a._l(r.tickets,function(e){return n("div",{key:e.name,staticClass:"flex align-center",staticStyle:{"line-height":"30px"}},[n("div",{staticClass:"w120 text-right text-dark"},[a._v(a._s(e.name))]),a._v(" "),n("div",{staticClass:"margin-left w80 text-left text-orange"},[n("span",[a._v("¥")]),a._v(" "),n("span",{staticClass:"text-xl text-bold"},[a._v(a._s(e.price))])]),a._v(" "),n("div",{staticClass:"w80 text-right"},[20<e.num?n("span",{staticClass:"text-green"},[a._v("有票")]):e.num<=0?n("span",{staticClass:"text-gray"},[a._v("无票")]):n("span",[a._v("余"),n("span",{staticClass:"text-orange"},[a._v(a._s(e.num))]),a._v("张")])]),a._v(" "),n("div",{staticClass:"flex-sub text-right"},[0<e.num?n("easy-button",{attrs:{size:"mini",type:"warning"},on:{click:function(t){return a.onBook(r,e.key)}}},[a._v("预订")]):n("el-button",{attrs:{size:"mini",disabled:""}},[a._v("预订")])],1)])})],2)])])}):a.loading?a._e():n("div",{staticClass:"text-center margin-bottom-sm bg-white z-2",staticStyle:{height:"300px","line-height":"300px"}},[n("div",{staticClass:"text-bold text-gray",staticStyle:{"font-size":"66px"}},[a._v("暂无数据")])])],2)])])],1)],1)},[],!1,null,"324eb307",null);e.default=m.exports},oZW5:function(t,e,r){"use strict";var a=r("lSNA"),n=r.n(a),i=r("o0o1"),s=r.n(i),o=r("yXPU"),c=r.n(o),l=r("Cd74"),u=r("Pk/8");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}var p={name:"Timetable",props:{fromStation:String,toStation:String,query:{type:Object,default:function(){return{}}}},setup:function(r){var a=Object(l.e)({visible:!1,loading:!1,list:[]}),e=function(){var t=c()(s.a.mark(function t(){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.loading=!0,t.prev=1,t.next=4,u.a.getTrainInfo(r.query);case 4:(e=t.sent).data&&(a.list=e.data.data||[]);case 6:return t.prev=6,a.loading=!1,t.finish(6);case 9:case"end":return t.stop()}},t,null,[[1,,6,9]])}));return function(){return t.apply(this,arguments)}}();return Object(l.h)(function(){return a.visible},function(t){t&&e()}),a.departIndex=Object(l.a)(function(){return a.list.findIndex(function(t){return t.stationName===r.fromStation})}),a.arriveIndex=Object(l.a)(function(){return a.list.findIndex(function(t){return t.stationName===r.toStation})}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){n()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},Object(l.g)(a),{rowClassName:function(t){t.row;var e=t.rowIndex;return-1!==a.departIndex&&-1!==a.arriveIndex&&e>=a.departIndex&&e<=a.arriveIndex?"current-row":""},getStationNo:function(t){return(Array(2).join("0")+t).slice(-2)}})}},m=r("KHd+"),f=Object(m.a)(p,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-popover",{attrs:{placement:"right",trigger:"click"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("div",[r("div",[e._v("经停站信息")]),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"el-easy-ui-table",attrs:{border:"",data:e.list,"max-height":"400px","row-class-name":e.rowClassName}},[r("el-table-column",{attrs:{prop:"stationNo",label:"站序",width:"40"}}),e._v(" "),r("el-table-column",{attrs:{prop:"stationName",label:"站名","min-width":"100"}}),e._v(" "),r("el-table-column",{attrs:{prop:"arriveTime",label:"到站时间","min-width":"80"}}),e._v(" "),r("el-table-column",{attrs:{prop:"startTime",label:"出发时间","min-width":"80"}}),e._v(" "),r("el-table-column",{attrs:{prop:"stopoverTime",label:"停留时间","min-width":"60"}})],1)],1),e._v(" "),e._t("reference",null,{slot:"reference"})],2)},[],!1,null,null,null);e.a=f.exports},zCTp:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAMAAABGS8AGAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAFdQTFRFAAAAFZv5FZv5FZv5FZv5FZv5FZv5FZv5FZv5FZv5FZv53ocj/YQC74UR/YwT/+bM/s6a//fu/////r14/+/d/rVn/t68/qVF/Z01/tar/ZQk/q1W/saJMg4sdQAAAB10Uk5TAAEDBgsSGyc0QlDP/7////////////////////8ji8QTAAACv0lEQVR4nO3Y2ZrbIAwG0MzajQJiD/b7P2dlsBNPIjmxjW/acpPl4nyaHySTOZ3Kenl9e//4/Pb9x89fYv36/fnx/vb6cqLWXy7Lg2Sp9CGyVNBeloNrbPOapfMiQFS+uZyMT4Bsc1kDHCLrUnB7WYOF1FpOZ6nNWXjwMOWsITWQswJIWgtrVKw1A+VukKWGKPQZVIwljUC7k0zCTBre2GSUHHN2jDvKNMzl7NAVWhWZmERzmYFpOQEEIaDzRb583VEyB5Nyr3IS2UhR5BpF6p3JhMzCpCxdsNaI1CmQEl/s2RnX37so8zApZ6sMLtARP5R3+MZT27gAMzuYjR3Lj0kNeXgDdh3MyG7aNjm6uoNwF8ciTMs63Lj4V4S7opdhOud6HmbuMKex09fA/Kyb3AJLp3IwcQ3MyZd6E2j8gA0pYloFMxPpmgPKZ7jv78cwKZcRNOULhjjIT8B0D4pkqys67JdtMJ2GM6HcMzL0aSZHuQKma7bYFroTQQ1p1GMsfZj68jmYe6ZEyLYEnLDBfR/w8E1n7kmYe6Y4Cb0Yk8Zlr6fjWZiWrfU4nYuWI146rlv7PMzUjIPD1lTR7X3E5XuH/fI8zEwk4+pkQ1eWWY1TY9jAFTAz+f1Ubw0kZpzYeR28cPsaXT/MDBHNms1blCe39mK3HuZ2sLpTj9sNMN2DanBjqHySG6Lg5BwCmFBmXIJzNKvO8aKsezveX0DJPDxL1sOLd/7BxZC3wQtydcvaArPyzN0Gc7fcmbsRpuUwc7fCzKkT++GHv2E3w4/k7fADeQe8LO+BF+Vd8JK8D16Qd8K8vBdm5d0wJ++HGbkBTMstYFJuAlNyG5iQG8H3civ4Tm4G38rt4Bu5IfxVbgl/kZvCc7ktPJMbw1e5NXyRm8OT3B4e5QPgKh8BF/kQeJCPgVE+CD7R/6P/v/7x9QcodZPByES1ngAAAABJRU5ErkJggg=="}}]);