(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"6q8y":function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"c",function(){return i}),a.d(e,"b",function(){return r});var n="/air/order-detail",i="/train/order-detail",r="/hotel/order-detail"},E2Kk:function(t,e,a){},E8uO:function(t,e,a){"use strict";var n=a("E2Kk");a.n(n).a},Ir7S:function(t,e,a){"use strict";var n=a("lThn");a.n(n).a},KxU4:function(t,e,a){"use strict";var n=a("lSNA"),i=a.n(n),r=a("o0o1"),o=a.n(r),s=a("yXPU"),c=a.n(s),l=a("fyny"),d=a("xGbm"),u=a("hqYi"),m=a("Cd74"),v=a("+n12");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var p={name:"RefundDetailDialog",props:{data:{type:Object,default:function(){return{id:""}}}},setup:function(t){var s=Object(m.e)({loading:!1,visible:!0,detail:{orderId:"",refundId:"",customerStatusName:"",customerStatus:"",passengerList:[],sectionList:[],refundLogList:[],refundAmount:0}});s.refundId=Object(m.a)(function(){return t.data.id}),s.statusClass=Object(m.a)(function(){return 40===s.detail.customerStatus?"text-green":""}),s.totalPrice=Object(m.a)(function(){return-l.a.toFixed2((s.detail.refundAmount||0)/100)}),s.showMoney=Object(m.a)(function(){return 30===s.detail.customerStatus||40===s.detail.customerStatus}),s.train=Object(m.a)(function(){var t=new Date,e=s.detail.sectionList[0];if(!e)return{};var a,n,i=d.a.parseDate(e.departTime),r=d.a.parseDate(e.arriveTime);return a=i.getFullYear()!==t.getFullYear()?d.a.getFormatDate(i,"yyyy-MM-dd hh:mm"):d.a.getFormatDate(i,"MM-dd hh:mm"),n=i.getFullYear()!==r.getFullYear()?d.a.getFormatDate(r,"yyyy-MM-dd hh:mm"):d.a.getFormatDate(i,"MM-dd")===d.a.getFormatDate(r,"MM-dd")?d.a.getFormatDate(r,"hh:mm"):d.a.getFormatDate(r,"MM-dd hh:mm"),{departStationName:e.departStationName,arriveStationName:e.arriveStationName,departTimeStr:a,arriveTimeStr:n,takeDays:e.takeDays,trainCode:e.trainCode}}),s.transPassengers=Object(m.a)(function(){return s.detail.passengerList.map(function(t){return t.passengerName}).join(",")}),s.transLogList=Object(m.a)(function(){var n=new Date;return s.detail.refundLogList.map(function(t){var e="",a=d.a.parseDate(t.operateTime);return e=n.getFullYear()===a.getFullYear()?d.a.getFormatDate(a,"MM-dd hh:mm"):d.a.getFormatDate(a,"yyyy-MM-dd hh:mm"),{actionMsg:t.actionMsg,operateTimeStr:e}})});return function(){var t=c()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s.loading=!0,t.prev=1,t.next=4,u.a.detail({refundId:s.refundId});case 4:null!==(e=t.sent).data&&Object.assign(s.detail,Object(v.h)(e.data,Object.keys(s.detail)));case 6:return t.prev=6,s.loading=!1,t.finish(6);case 9:case"end":return t.stop()}},t,null,[[1,,6,9]])}));return function(){return t.apply(this,arguments)}}()(),function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach(function(t){i()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},Object(m.g)(s),{onBack:function(){s.visible=!1}})}},f=(a("E8uO"),a("KHd+")),b=Object(f.a)(p,function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("el-dialog",{attrs:{"close-on-click-modal":!1,title:"退票详情",visible:a.visible},on:{close:function(t){return a.$emit("close")},"update:visible":function(t){a.visible=t}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],staticClass:"padding-lr",staticStyle:{"min-height":"400px","overflow-y":"auto"}},[n("div",{staticClass:"padding",staticStyle:{position:"relative"}},[n("div",{staticClass:"bg-white padding border-radius-xs z-2"},[n("div",[n("div",{staticClass:"flex align-center text-black text-xl margin-bottom-sm"},[n("div",{staticClass:"text-bold"},[a._v(a._s(a.train.departStationName))]),a._v(" "),n("div",{staticClass:"iconfont icon-turn_right margin-lr-xs"}),a._v(" "),n("div",{staticClass:"text-bold"},[a._v(a._s(a.train.arriveStationName))]),a._v(" "),n("div",{staticClass:"margin-left text-bold"},[a._v(a._s(a.train.trainCode))])]),a._v(" "),n("div",{staticClass:"margin-bottom"},[n("div",{staticClass:"margin-bottom-xs"},[a._v(a._s(a.train.departTimeStr)+" 至 "+a._s(a.train.arriveTimeStr))])])]),a._v(" "),n("div",{staticClass:"flex align-start"},[n("div",{staticClass:"round-icon bg-grey margin-right-sm"},[n("span",{staticClass:"iconfont icon-peoplefill"})]),a._v(" "),n("div",{staticClass:"flex-sub text-lg"},[n("span",[a._v(a._s(a.transPassengers))])])])])]),a._v(" "),n("div",{staticClass:"padding",staticStyle:{position:"relative"}},[n("div",{staticClass:"margin-bottom flex justify-between align-center"},[n("div",[n("div",{staticClass:"text-xxl text-bold",class:a.statusClass},[a._v(a._s(a.detail.customerStatusName))]),a._v(" "),n("div",{staticClass:"text-gray"},[a._v("退票单号："+a._s(a.detail.refundId))])]),a._v(" "),n("div",{staticClass:"text-orange"},[a.showMoney?[n("span",{staticClass:"margin-right-xs"},[a._v("¥")]),a._v(" "),n("span",{staticClass:"text-xxl text-bold"},[a._v(a._s(a.totalPrice))])]:a._e()],2)]),a._v(" "),n("div",{staticClass:"timeline green text-black"},a._l(a.transLogList,function(t,e){return n("div",{key:e,staticClass:"timeline-item"},[n("div",{staticClass:"padding-bottom"},[n("div",{staticClass:"text-bold margin-bottom-xs text-lg"},[a._v(a._s(t.actionMsg))]),a._v(" "),n("div",{staticClass:"text-gray"},[a._v(a._s(t.operateTimeStr))])])])}),0)])]),a._v(" "),n("div",{staticClass:"padding text-center"},[n("el-button",{on:{click:a.onBack}},[a._v("关闭")])],1)])},[],!1,null,"4d44dd19",null);e.a=b.exports},Lr9c:function(t,e,a){"use strict";var n=a("lSNA"),i=a.n(n),r=a("o0o1"),o=a.n(r),s=a("yXPU"),c=a.n(s),l=a("fyny"),d=a("xGbm"),u=a("6q8y"),m=a("Xv+L"),v=a("Cd74"),g=a("+n12"),p=a("33P3");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var b={name:"ChangeDetailDialog",props:{data:{type:Object,default:function(){return{id:""}}}},setup:function(t,e){var a=e.emit,s=Object(v.e)({visible:!0,loading:!1,showOld:!1,flight:{},form:{contactName:"",contactPhone:""},showPriceDetail:!1,detail:{changeId:"",orderId:"",status:"",statusName:"",passengerList:[],sectionList:[],changeLogList:[],total:0}});s.changeId=Object(v.a)(function(){return t.data.id}),s.showOper=Object(v.a)(function(){return-1<[10,20,25].indexOf(s.detail.status)}),s.canPay=Object(v.a)(function(){return 20===s.detail.status}),s.canConfirm=Object(v.a)(function(){return 25===s.detail.status}),s.canCancel=Object(v.a)(function(){return 10===s.detail.status||20===s.detail.status||25===s.detail.status}),s.totalPrice=Object(v.a)(function(){return l.a.toFixed2((s.detail.total||0)/100)}),s.showMoney=Object(v.a)(function(){return 20<=s.detail.status&&s.detail.status<=50}),s.newTrain=Object(v.a)(function(){var t=new Date,e=s.detail.sectionList[0];if(!e)return{};var a,n,i=d.a.parseDate(e.newDepartTime),r=d.a.parseDate(e.newArriveTime);return a=i.getFullYear()!==t.getFullYear()?d.a.getFormatDate(i,"yyyy-MM-dd hh:mm"):d.a.getFormatDate(i,"MM-dd hh:mm"),n=i.getFullYear()!==r.getFullYear()?d.a.getFormatDate(r,"yyyy-MM-dd hh:mm"):d.a.getFormatDate(i,"MM-dd")===d.a.getFormatDate(r,"MM-dd")?d.a.getFormatDate(r,"hh:mm"):d.a.getFormatDate(r,"MM-dd hh:mm"),{departStationName:e.newDepartStationName,arriveStationName:e.newArriveStationName,departTimeStr:a,arriveTimeStr:n,takeDays:e.newTakeDays,trainCode:e.newTrainCode}}),s.oldTrain=Object(v.a)(function(){var t=new Date,e=s.detail.sectionList[0];if(!e)return{};var a,n,i=d.a.parseDate(e.departTime),r=d.a.parseDate(e.arriveTime);return a=i.getFullYear()!==t.getFullYear()?d.a.getFormatDate(i,"yyyy-MM-dd hh:mm"):d.a.getFormatDate(i,"MM-dd hh:mm"),n=i.getFullYear()!==r.getFullYear()?d.a.getFormatDate(r,"yyyy-MM-dd hh:mm"):d.a.getFormatDate(i,"MM-dd")===d.a.getFormatDate(r,"MM-dd")?d.a.getFormatDate(r,"hh:mm"):d.a.getFormatDate(r,"MM-dd hh:mm"),{departStationName:e.departStationName,arriveStationName:e.arriveStationName,departTimeStr:a,arriveTimeStr:n,takeDays:e.takeDays,trainCode:e.trainCode}}),s.statusClass=Object(v.a)(function(){return 50===s.detail.status?"text-green":""}),s.transLogList=Object(v.a)(function(){var n=new Date;return s.detail.changeLogList.map(function(t){var e="",a=d.a.parseDate(t.operateTime);return e=n.getFullYear()===a.getFullYear()?d.a.getFormatDate(a,"MM-dd hh:mm"):d.a.getFormatDate(a,"yyyy-MM-dd hh:mm"),{actionMsg:t.actionMsg,operateTimeStr:e}})}),s.transPassengers=Object(v.a)(function(){return s.detail.passengerList.map(function(t){return t.passengerName}).join(",")});var n=function(){var t=c()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s.loading=!0,t.prev=1,t.next=4,m.a.detail({changeId:s.changeId});case 4:null!==(e=t.sent).data&&Object.assign(s.detail,Object(g.h)(e.data,Object.keys(s.detail)));case 6:return t.prev=6,t.next=9,Object(v.b)();case 9:return s.loading=!1,t.finish(6);case 11:case"end":return t.stop()}},t,null,[[1,,6,11]])}));return function(){return t.apply(this,arguments)}}();return n(),function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach(function(t){i()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},Object(v.g)(s),{toggleShowOld:function(){s.showOld=!s.showOld},onCancel:function(){return c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.confirm("确认要取消吗？（提示：12306规定同一订单最多提交3次改签）","提示",{confirmButtonText:"确 认",cancelButtonText:"再考虑下",type:"warning"});case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return");case 8:return t.prev=8,t.next=11,m.a.cancel({changeId:s.changeId});case 11:s.visible=!1,a("ok");case 13:return t.prev=13,t.next=16,n();case 16:return t.finish(13);case 17:case"end":return t.stop()}},t,null,[[0,5],[8,,13,17]])}))()},onConfirm:function(){return c()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.changeId,t.prev=1,t.next=4,p.a.confirm("是否确认改签?",e,{confirmButtonText:"确定",cancelButtonText:"再考虑下",type:"warning"});case 4:t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(1),t.abrupt("return");case 9:return t.prev=9,t.next=12,m.a.customerConfirm({changeId:e});case 12:s.visible=!1,a("ok");case 14:return t.prev=14,t.next=17,n();case 17:return t.finish(14);case 18:case"end":return t.stop()}},t,null,[[1,6],[9,,14,18]])}))()},onPay:function(){window.open("#/main/pay?id=".concat(s.changeId,"&redirect=").concat(encodeURIComponent("".concat(u.a,"?id=").concat(s.detail.orderId))))}})}},h=(a("Ir7S"),a("KHd+")),y=Object(h.a)(b,function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("el-dialog",{attrs:{"close-on-click-modal":!1,title:"改签详情",visible:a.visible},on:{close:function(t){return a.$emit("close")},"update:visible":function(t){a.visible=t}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],staticClass:"padding-lr",staticStyle:{"min-height":"400px","overflow-y":"auto"}},[n("div",{staticClass:"padding"},[a.showOld?n("div",{staticClass:"new-flight bg-white padding border-radius-xs z-2 margin-bottom"},[n("div",{staticClass:"new-flight-mark bg-grey padding-lr-sm padding-tb-xs text-sm"},[a._v("\n          旧车票\n        ")]),a._v(" "),n("div",[n("div",{staticClass:"flex align-center text-black text-xl margin-bottom-sm"},[n("div",{staticClass:"text-bold"},[a._v(a._s(a.oldTrain.departStationName))]),a._v(" "),n("div",{staticClass:"iconfont icon-turn_right margin-lr-xs"}),a._v(" "),n("div",{staticClass:"text-bold"},[a._v(a._s(a.oldTrain.arriveStationName))]),a._v(" "),n("div",{staticClass:"margin-left text-bold"},[a._v(a._s(a.oldTrain.trainCode))])]),a._v(" "),n("div",[n("div",{staticClass:"margin-bottom-xs"},[a._v(a._s(a.oldTrain.departTimeStr)+" 至 "+a._s(a.oldTrain.arriveTimeStr))])])])]):a._e(),a._v(" "),n("div",{staticClass:"new-flight bg-white padding-top padding-lr border-radius-xs z-2"},[n("div",{staticClass:"new-flight-mark bg-blue padding-lr-sm padding-tb-xs text-sm"},[a._v("\n          新车票\n        ")]),a._v(" "),n("div",[n("div",{staticClass:"flex align-center text-black text-xl margin-bottom-sm"},[n("div",{staticClass:"text-bold"},[a._v(a._s(a.newTrain.departStationName))]),a._v(" "),n("div",{staticClass:"iconfont icon-turn_right margin-lr-xs"}),a._v(" "),n("div",{staticClass:"text-bold"},[a._v(a._s(a.newTrain.arriveStationName))]),a._v(" "),n("div",{staticClass:"margin-left text-bold"},[a._v(a._s(a.newTrain.trainCode))])]),a._v(" "),n("div",{staticClass:"margin-bottom"},[n("div",{staticClass:"margin-bottom-xs"},[a._v(a._s(a.newTrain.departTimeStr)+" 至 "+a._s(a.newTrain.arriveTimeStr))])])]),a._v(" "),n("div",{staticClass:"flex align-start"},[n("div",{staticClass:"round-icon bg-grey margin-right-sm"},[n("span",{staticClass:"iconfont icon-peoplefill"})]),a._v(" "),n("div",{staticClass:"flex-sub text-lg"},[n("span",[a._v(a._s(a.transPassengers))])])]),a._v(" "),n("div",{staticClass:"padding text-center cursor-pointer",on:{click:a.toggleShowOld}},[n("span",{staticClass:"iconfont",class:a.showOld?"icon-fold":"icon-unfold"})])])]),a._v(" "),n("div",{staticClass:"bg-white padding"},[n("div",{staticClass:"margin-bottom flex align-center justify-between"},[n("div",[n("div",{staticClass:"text-xxl text-bold",class:a.statusClass},[a._v(a._s(a.detail.statusName))]),a._v(" "),n("div",{staticClass:"text-gray"},[a._v("改签单号："+a._s(a.detail.changeId))])]),a._v(" "),n("div",{staticClass:"text-orange"},[a.showMoney?[n("span",{staticClass:"margin-right-xs"},[a._v("¥")]),a._v(" "),n("span",{staticClass:"text-xxl text-bold"},[a._v(a._s(a.totalPrice))])]:a._e()],2)]),a._v(" "),n("div",{staticClass:"timeline green text-black"},a._l(a.transLogList,function(t,e){return n("div",{key:e,staticClass:"timeline-item"},[n("div",{staticClass:"padding-bottom"},[n("div",{staticClass:"text-bold margin-bottom-xs text-lg"},[a._v(a._s(t.actionMsg))]),a._v(" "),n("div",{staticClass:"text-gray"},[a._v(a._s(t.operateTimeStr))])])])}),0)])]),a._v(" "),n("div",{staticClass:"padding text-center"},[n("el-button",{on:{click:function(t){a.visible=!1}}},[a._v("关闭")]),a._v(" "),a.showOper?[a.canCancel?n("easy-button",{attrs:{plain:""},on:{click:a.onCancel}},[a._v("取消改签单")]):a._e(),a._v(" "),a.canPay?n("el-button",{attrs:{type:"warning"},on:{click:a.onPay}},[a._v("支付")]):a._e(),a._v(" "),a.canConfirm?n("easy-button",{attrs:{type:"warning"},on:{click:a.onConfirm}},[a._v("确认改签")]):a._e()]:a._e()],2)])},[],!1,null,"87dd1c34",null);e.a=y.exports},"Xv+L":function(t,e,a){"use strict";var n=a("lwsE"),i=a.n(n),r=a("II3V");e.a=new function t(){i()(this,t),this.submitChangeApply=r.a.makeJPost("/api/train/change/submitChangeApply"),this.queryPage4User=r.a.makeGet("/api/train/change/queryPage4User"),this.detail=r.a.makeGet("/api/train/change/detail"),this.status=r.a.makeGet("/api/train/change/status"),this.cancel=r.a.makePost("/api/train/change/cancel"),this.customerConfirm=r.a.makePost("/api/train/change/customerConfirm")}},Y4yO:function(t,e,a){"use strict";var n=a("lwsE"),i=a.n(n),r=a("II3V");e.a=new function t(){i()(this,t),this.submitOrder=r.a.makeJPost("/api/train/order/submitOrder",{successW:!1}),this.detail=r.a.makeGet("/api/train/order/detail"),this.status=r.a.makeGet("/api/train/order/status"),this.queryPage=r.a.makeGet("/api/train/order/queryPage"),this.cancel=r.a.makePost("/api/train/order/cancel"),this.verifyPassengerStatus=r.a.makeArrPost("/api/train/order/verifyPassengerStatus",{successW:!1})}},fyny:function(t,e,a){"use strict";e.a={toFixed2:function(t){return""===t||null==t?"":+Number(t).toFixed(2)},fixed2Money:function(t){if(null==t)return"";var e=Number(String(t).replace(/,/g,"")).toFixed(2).split(".");return e[0]=e[0].replace(/(?=((?!\b)\d{3})+$)/g,","),e.join(".")}}},hqYi:function(t,e,a){"use strict";var n=a("lwsE"),i=a.n(n),r=a("II3V");e.a=new function t(){i()(this,t),this.detail=r.a.makeGet("/api/train/refund/detail"),this.queryRefundFee=r.a.makePost("/api/train/refund/queryRefundFee",{showLoading:!0,successW:!1}),this.submitRefundApply=r.a.makeJPost("/api/train/refund/submitRefundApply"),this.queryPage4User=r.a.makeGet("/api/train/refund/queryPage4User")}},lThn:function(t,e,a){}}]);